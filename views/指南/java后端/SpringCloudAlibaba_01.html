<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringCloudAlibaba_01 | blog</title>
    <meta name="description" content="blog">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.29b4407c.css" as="style"><link rel="preload" href="/assets/js/app.20e080e3.js" as="script"><link rel="preload" href="/assets/js/3.69b4042a.js" as="script"><link rel="preload" href="/assets/js/1.c4c6ad86.js" as="script"><link rel="preload" href="/assets/js/27.c059cd71.js" as="script"><link rel="prefetch" href="/assets/js/10.fbf5bf0b.js"><link rel="prefetch" href="/assets/js/11.89c72eac.js"><link rel="prefetch" href="/assets/js/12.8f3fc90e.js"><link rel="prefetch" href="/assets/js/13.606381d5.js"><link rel="prefetch" href="/assets/js/14.7a61181a.js"><link rel="prefetch" href="/assets/js/15.2595a1ba.js"><link rel="prefetch" href="/assets/js/16.3a0abb52.js"><link rel="prefetch" href="/assets/js/17.6a344db1.js"><link rel="prefetch" href="/assets/js/18.4bf78878.js"><link rel="prefetch" href="/assets/js/19.8f00e0c6.js"><link rel="prefetch" href="/assets/js/20.260311cc.js"><link rel="prefetch" href="/assets/js/21.8578208c.js"><link rel="prefetch" href="/assets/js/22.20e75bd8.js"><link rel="prefetch" href="/assets/js/23.363521a2.js"><link rel="prefetch" href="/assets/js/24.15a014dc.js"><link rel="prefetch" href="/assets/js/25.f74701fe.js"><link rel="prefetch" href="/assets/js/26.9805c56f.js"><link rel="prefetch" href="/assets/js/28.04fb7d74.js"><link rel="prefetch" href="/assets/js/29.b1ef7687.js"><link rel="prefetch" href="/assets/js/30.5fb4a460.js"><link rel="prefetch" href="/assets/js/31.860de359.js"><link rel="prefetch" href="/assets/js/32.d40511a0.js"><link rel="prefetch" href="/assets/js/33.abe76948.js"><link rel="prefetch" href="/assets/js/34.c95627c4.js"><link rel="prefetch" href="/assets/js/35.884b7ac2.js"><link rel="prefetch" href="/assets/js/36.ce4ffc06.js"><link rel="prefetch" href="/assets/js/37.ed7666d7.js"><link rel="prefetch" href="/assets/js/38.6efa9d7f.js"><link rel="prefetch" href="/assets/js/39.ff98a367.js"><link rel="prefetch" href="/assets/js/4.295bb786.js"><link rel="prefetch" href="/assets/js/40.040344ed.js"><link rel="prefetch" href="/assets/js/41.79742567.js"><link rel="prefetch" href="/assets/js/42.bea47c85.js"><link rel="prefetch" href="/assets/js/43.14107803.js"><link rel="prefetch" href="/assets/js/44.f793a44c.js"><link rel="prefetch" href="/assets/js/45.293deda9.js"><link rel="prefetch" href="/assets/js/46.025ac826.js"><link rel="prefetch" href="/assets/js/47.9857334e.js"><link rel="prefetch" href="/assets/js/48.4d7aeb19.js"><link rel="prefetch" href="/assets/js/5.6ab23509.js"><link rel="prefetch" href="/assets/js/6.a01c80cf.js"><link rel="prefetch" href="/assets/js/7.6ced6a0e.js"><link rel="prefetch" href="/assets/js/8.3a631268.js"><link rel="prefetch" href="/assets/js/9.09f4064e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.29b4407c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>blog</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="blog" class="logo"> <span class="site-name">blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/java/" class="nav-link"><i class="iconfont undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 后端/" class="nav-link"><i class="iconfont undefined"></i>
  java 后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/typora/" class="nav-link"><i class="iconfont undefined"></i>
  typora
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 基础/" class="nav-link"><i class="iconfont undefined"></i>
  java 基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程方法/" class="nav-link"><i class="iconfont undefined"></i>
  编程方法
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mysql/" class="nav-link"><i class="iconfont undefined"></i>
  Mysql
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-npm"></i>
      在线工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://smallpdf.com/cn/pdf-to-word" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  PDF 转换器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  JSON 编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tableconvert.com/?output=text" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  MD 表格生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  CRON 表达式
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.oschina.net/codeformat/html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  代码格式化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.numberempire.com/latexequationeditor.php" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  公式编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  二维码生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线编码转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.toyaml.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  YAML &lt;-&gt; Properties
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jsfiddle.net/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线 Web 练习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/rxt520" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-jianshu"></i>
  简书
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-csdn"></i>
  CSDN
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-bokeyuan"></i>
  博客圆
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  WeChat
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    blog
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>23</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>16</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/java/" class="nav-link"><i class="iconfont undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 后端/" class="nav-link"><i class="iconfont undefined"></i>
  java 后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/typora/" class="nav-link"><i class="iconfont undefined"></i>
  typora
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 基础/" class="nav-link"><i class="iconfont undefined"></i>
  java 基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程方法/" class="nav-link"><i class="iconfont undefined"></i>
  编程方法
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mysql/" class="nav-link"><i class="iconfont undefined"></i>
  Mysql
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-npm"></i>
      在线工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://smallpdf.com/cn/pdf-to-word" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  PDF 转换器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  JSON 编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tableconvert.com/?output=text" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  MD 表格生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  CRON 表达式
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.oschina.net/codeformat/html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  代码格式化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.numberempire.com/latexequationeditor.php" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  公式编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  二维码生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线编码转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.toyaml.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  YAML &lt;-&gt; Properties
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jsfiddle.net/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线 Web 练习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/rxt520" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-jianshu"></i>
  简书
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-csdn"></i>
  CSDN
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-bokeyuan"></i>
  博客圆
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  WeChat
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>SpringCloudAlibaba_01</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#springboot创建项目与配置" class="sidebar-link">Springboot创建项目与配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#版本对应关系" class="sidebar-link">版本对应关系</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#创建项目工程" class="sidebar-link">创建项目工程</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#创建统一的依赖管理" class="sidebar-link">创建统一的依赖管理</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#服务提供者" class="sidebar-link">服务提供者</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#服务消费者" class="sidebar-link">服务消费者</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#什么是-feign" class="sidebar-link">什么是 Feign</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#附：扩展阅读" class="sidebar-link">附：扩展阅读</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#nacos" class="sidebar-link">Nacos</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#nacos-docker-快速开始" class="sidebar-link">Nacos Docker 快速开始</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#nacos-分布式配置中心" class="sidebar-link">Nacos 分布式配置中心</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#nacos多环境配置" class="sidebar-link">Nacos多环境配置</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#sentinel" class="sidebar-link">Sentinel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#什么是服务雪崩" class="sidebar-link">什么是服务雪崩</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#什么是-sentinel" class="sidebar-link">什么是 Sentinel</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#sentinel控制台" class="sidebar-link">Sentinel控制台</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/java%E5%90%8E%E7%AB%AF/SpringCloudAlibaba_01.html#sentinel客户端接入" class="sidebar-link">Sentinel客户端接入</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>SpringCloudAlibaba_01</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>blog</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>SpringCloudAlibaba_01</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>blog</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2019-10-14</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      spring Cloud
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="springcloudalibaba-01"><a href="#springcloudalibaba-01" class="header-anchor">#</a> SpringCloudAlibaba_01</h1> <h2 id="springboot创建项目与配置"><a href="#springboot创建项目与配置" class="header-anchor">#</a> Springboot创建项目与配置</h2> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p><strong>2018 年 10 月 31 日的凌晨，这个伟大的日子里，Spring Cloud Alibaba 正式入驻了 Spring Cloud 官方孵化器，并在 Maven 中央库发布了第一个版本。</strong></p> <p><a href="https://spring.io/blog/2018/10/30/spring-cloud-for-alibaba-0-2-0-released" target="_blank" rel="noopener noreferrer">Spring<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>Spring Cloud for Alibaba，它是由一些阿里巴巴的开源组件和云产品组成的。这个项目的目的是为了让大家所熟知的 Spring 框架，其优秀的设计模式和抽象理念，以给使用阿里巴巴产品的 Java 开发者带来使用 Spring Boot 和 Spring Cloud 的更多便利。</p></blockquote> <p>Spring Cloud Alibaba 致力于提供微服务开发的一站式解决方案。此项目包含开发分布式应用微服务的必需组件，方便开发者通过 Spring Cloud 编程模型轻松使用这些组件来开发分布式应用服务。</p> <p>依托 Spring Cloud Alibaba，您只需要添加一些注解和少量配置，就可以将 Spring Cloud 应用接入阿里微服务解决方案，通过阿里中间件来迅速搭建分布式应用系统。</p> <p><a href="https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md" target="_blank" rel="noopener noreferrer">Spring Cloud Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="主要功能"><a href="#主要功能" class="header-anchor">#</a> 主要功能</h4> <ul><li><strong>服务限流降级：</strong> 默认支持 Servlet、Feign、RestTemplate、Dubbo 和 RocketMQ 限流降级功能的接入，可以在运行时通过控制台实时修改限流降级规则，还支持查看限流降级 Metrics 监控。</li> <li><strong>服务注册与发现：</strong> 适配 Spring Cloud 服务注册与发现标准，默认集成了 Ribbon 的支持。</li> <li><strong>分布式配置管理：</strong> 支持分布式系统中的外部化配置，配置更改时自动刷新。</li> <li><strong>消息驱动能力：</strong> 基于 Spring Cloud Stream 为微服务应用构建消息驱动能力。</li> <li><strong>阿里云对象存储：</strong> 阿里云提供的海量、安全、低成本、高可靠的云存储服务。支持在任何应用、任何时间、任何地点存储和访问任意类型的数据。</li> <li><strong>分布式任务调度：</strong> 提供秒级、精准、高可靠、高可用的定时（基于 Cron 表达式）任务调度服务。同时提供分布式的任务执行模型，如网格任务。网格任务支持海量子任务均匀分配到所有 Worker（schedulerx-client）上执行。</li></ul> <h4 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h4> <ul><li><strong>Sentinel：</strong> 把流量作为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。</li> <li><strong>Nacos：</strong> 一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。</li> <li><strong>RocketMQ：</strong> 一款开源的分布式消息系统，基于高可用分布式集群技术，提供低延时的、高可靠的消息发布与订阅服务。</li> <li><strong>Dubbo：</strong> Apache Dubbo™ 是一款高性能 Java RPC 框架。</li> <li><strong>Seata：</strong> 阿里巴巴开源产品，一个易于使用的高性能微服务分布式事务解决方案。</li> <li><strong>Alibaba Cloud ACM：</strong> 一款在分布式架构环境中对应用配置进行集中管理和推送的应用配置中心产品。</li> <li><strong>Alibaba Cloud OSS：</strong> 阿里云对象存储服务（Object Storage Service，简称 OSS），是阿里云提供的海量、安全、低成本、高可靠的云存储服务。您可以在任何应用、任何时间、任何地点存储和访问任意类型的数据。</li> <li><strong>Alibaba Cloud SchedulerX：</strong> 阿里中间件团队开发的一款分布式任务调度产品，提供秒级、精准、高可靠、高可用的定时（基于 Cron 表达式）任务调度服务。</li> <li><strong>Alibaba Cloud SMS：</strong> 覆盖全球的短信服务，友好、高效、智能的互联化通讯能力，帮助企业迅速搭建客户触达通道。</li></ul> <h4 id="注意：spring-cloud-alibaba-已毕业"><a href="#注意：spring-cloud-alibaba-已毕业" class="header-anchor">#</a> 注意：Spring Cloud Alibaba 已毕业</h4> <p><strong>Spring Cloud Alibaba 已于 2019 年 7 月 30 日</strong> 从 Spring Cloud 孵化器中正式毕业并迎来了毕业的第一个版本，孵化器中的 Spring Cloud Alibaba 仓库迁移回 Alibaba 官方仓库，进行正式的毕业发布，对原有使用 Spring Cloud Alibaba 开发的项目影响如下：</p> <h5 id="更新包名和-maven-坐标"><a href="#更新包名和-maven-坐标" class="header-anchor">#</a> 更新包名和 Maven 坐标</h5> <p>接到阿里官方通知在 2019 年 7 月 4 日修改相关包名和 Maven 坐标，请参考 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvc3ByaW5nLWNsb3VkLWFsaWJhYmEvaXNzdWVzLzczNA==" target="_blank" rel="noopener noreferrer">Update package name &amp; maven coordinates<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，由于视频录制于 2019 年 6 月 28 日，故所使用的包名和坐标依然沿用原先的 <code>org.springframework.cloud</code>，后面的视频会改用最新的标准，看到这里的小伙伴可以尝试使用新坐标。</p> <h5 id="包名修改"><a href="#包名修改" class="header-anchor">#</a> 包名修改</h5> <p>包名前缀由 <code>org.springframework.cloud.alibaba</code> 变更为 <code>com.alibaba.cloud</code></p> <h5 id="maven-坐标修改"><a href="#maven-坐标修改" class="header-anchor">#</a> Maven 坐标修改</h5> <p>bom 由 <code>spring-cloud-alibaba-dependencies</code> 变更为 <code>alibaba-spring-cloud-dependencies</code></p> <p>maven groupid 由 <code>org.springframework.cloud</code> 变更为 <code>com.alibaba.cloud</code></p> <h5 id="spring-cloud-alibaba"><a href="#spring-cloud-alibaba" class="header-anchor">#</a> Spring Cloud Alibaba</h5> <table><thead><tr><th style="text-align:left;"></th> <th style="text-align:left;">修改前</th> <th style="text-align:left;">修改后</th></tr></thead> <tbody><tr><td style="text-align:left;">sentinel starter</td> <td style="text-align:left;">spring-cloud-starter-alibaba-sentinel</td> <td style="text-align:left;">alibaba-sentinel-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">nacos config starter</td> <td style="text-align:left;">spring-cloud-starter-alibaba-nacos-config</td> <td style="text-align:left;">alibaba-nacos-config-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">nacos discovery starter</td> <td style="text-align:left;">spring-cloud-starter-alibaba-nacos-discovery</td> <td style="text-align:left;">alibaba-nacos-discovery-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">seata starter</td> <td style="text-align:left;">spring-cloud-starter-alibaba-seata</td> <td style="text-align:left;">alibaba-seata-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">dubbo starter</td> <td style="text-align:left;">spring-cloud-starter-dubbo</td> <td style="text-align:left;">dubbo-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">rocketmq binder starter</td> <td style="text-align:left;">spring-cloud-starter-stream-rocketmq</td> <td style="text-align:left;">rocketmq-stream-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">rocketmq bus module name</td> <td style="text-align:left;">spring-cloud-starter-bus-rocketmq</td> <td style="text-align:left;">rocketmq-bus-spring-cloud-starter</td></tr> <tr><td style="text-align:left;">sentinel module name</td> <td style="text-align:left;">spring-cloud-alibaba-sentinel</td> <td style="text-align:left;">alibaba-sentinel-spring-cloud</td></tr> <tr><td style="text-align:left;">sentinel datasource module name</td> <td style="text-align:left;">spring-cloud-alibaba-sentinel-datasource</td> <td style="text-align:left;">alibaba-sentinel-datasource-spring-cloud</td></tr> <tr><td style="text-align:left;">sentinel gateway module name</td> <td style="text-align:left;">spring-cloud-alibaba-sentinel-gateway</td> <td style="text-align:left;">alibaba-sentinel-gateway-spring-cloud</td></tr> <tr><td style="text-align:left;">nacos config module name</td> <td style="text-align:left;">spring-cloud-alibaba-nacos-config</td> <td style="text-align:left;">alibaba-nacos-config-spring-cloud</td></tr> <tr><td style="text-align:left;">nacos discovery module name</td> <td style="text-align:left;">spring-cloud-alibaba-nacos-discovery</td> <td style="text-align:left;">alibaba-nacos-discovery-spring-cloud</td></tr> <tr><td style="text-align:left;">dubbo module name</td> <td style="text-align:left;">spring-cloud-alibaba-dubbo</td> <td style="text-align:left;">alibaba-dubbo-spring-cloud</td></tr> <tr><td style="text-align:left;">seata module name</td> <td style="text-align:left;">spring-cloud-alibaba-seata</td> <td style="text-align:left;">alibaba-seata-spring-cloud</td></tr> <tr><td style="text-align:left;">rocketmq binder module name</td> <td style="text-align:left;">spring-cloud-stream-binder-rocketmq</td> <td style="text-align:left;">rocketmq-spring-cloud-stream-binder</td></tr></tbody></table> <h5 id="spring-cloud-alicloud-商业化组件"><a href="#spring-cloud-alicloud-商业化组件" class="header-anchor">#</a> Spring Cloud Alicloud(商业化组件)</h5> <table><thead><tr><th style="text-align:left;"></th> <th style="text-align:left;">修改前</th> <th style="text-align:left;">修改后</th></tr></thead> <tbody><tr><td style="text-align:left;">oss starter</td> <td style="text-align:left;">spring-cloud-alicloud-oss</td> <td style="text-align:left;">alicloud-oss-spring-cloud</td></tr> <tr><td style="text-align:left;">sms starter</td> <td style="text-align:left;">spring-cloud-alicloud-sms</td> <td style="text-align:left;">alicloud-sms-spring-cloud</td></tr> <tr><td style="text-align:left;">schedulerx starter</td> <td style="text-align:left;">spring-cloud-alicloud-schedulerx</td> <td style="text-align:left;">alicloud-schedulerx-spring-cloud</td></tr> <tr><td style="text-align:left;">ans starter</td> <td style="text-align:left;">spring-cloud-alicloud-ans</td> <td style="text-align:left;">alicloud-ans-spring-cloud</td></tr> <tr><td style="text-align:left;">acm starter</td> <td style="text-align:left;">spring-cloud-alicloud-acm</td> <td style="text-align:left;">alicloud-acm-spring-cloud</td></tr> <tr><td style="text-align:left;">oss module name</td> <td style="text-align:left;">spring-cloud-alicloud-oss</td> <td style="text-align:left;">alicloud-oss-spring-cloud</td></tr> <tr><td style="text-align:left;">sms module name</td> <td style="text-align:left;">spring-cloud-alicloud-sms</td> <td style="text-align:left;">alicloud-sms-spring-cloud</td></tr> <tr><td style="text-align:left;">schedulerx module name</td> <td style="text-align:left;">spring-cloud-alicloud-schedulerx</td> <td style="text-align:left;">alicloud-schedulerx-spring-cloud</td></tr> <tr><td style="text-align:left;">ans module name</td> <td style="text-align:left;">spring-cloud-alicloud-ans</td> <td style="text-align:left;">alicloud-ans-spring-cloud</td></tr> <tr><td style="text-align:left;">acm module name</td> <td style="text-align:left;">spring-cloud-alicloud-acm</td> <td style="text-align:left;">alicloud-acm-spring-cloud</td></tr></tbody></table> <h3 id="版本对应关系"><a href="#版本对应关系" class="header-anchor">#</a> 版本对应关系</h3> <p><a href="https://start.spring.io/actuator/info" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;spring-cloud&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;Finchley.M2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.M3 and &lt;2.0.0.M5&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.M3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.M5 and &lt;=2.0.0.M5&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.M4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.M6 and &lt;=2.0.0.M6&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.M5&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.M7 and &lt;=2.0.0.M7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.M6&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.RC1 and &lt;=2.0.0.RC1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.M7&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.RC2 and &lt;=2.0.0.RC2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.M9&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.0.RELEASE and &lt;=2.0.0.RELEASE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.RC1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.1.RELEASE and &lt;2.0.2.RELEASE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.RC2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.2.RELEASE and &lt;2.0.3.RELEASE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.SR4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.3.RELEASE and &lt;2.0.999.BUILD-SNAPSHOT&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Finchley.BUILD-SNAPSHOT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.0.999.BUILD-SNAPSHOT and &lt;2.1.0.M3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Greenwich.M1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.1.0.M3 and &lt;2.1.0.RELEASE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Greenwich.SR3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.1.0.RELEASE and &lt;2.1.10.BUILD-SNAPSHOT&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Greenwich.BUILD-SNAPSHOT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.1.10.BUILD-SNAPSHOT and &lt;2.2.0.M4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Hoxton.M2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.2.0.M4 and &lt;2.2.0.BUILD-SNAPSHOT&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Hoxton.BUILD-SNAPSHOT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Spring Boot &gt;=2.2.0.BUILD-SNAPSHOT&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="创建项目工程"><a href="#创建项目工程" class="header-anchor">#</a> 创建项目工程</h3> <p>新建Springboot工程，不添加任何依赖，打开pom</p> <h4 id="pom"><a href="#pom" class="header-anchor">#</a> POM</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>project xmlns<span class="token operator">=</span><span class="token string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>modelVersion<span class="token punctuation">&gt;</span></span><span class="token number">4.0</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>modelVersion<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>parent<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>parent<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.1</span><span class="token number">.6</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>relativePath<span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> lookup parent from repository <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>parent<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>smxy<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>hello<span class="token operator">-</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>alibaba<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.0</span><span class="token number">.1</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>packaging<span class="token punctuation">&gt;</span></span>pom<span class="token operator">&lt;</span><span class="token operator">/</span>packaging<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>rxt520<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token operator">/</span><span class="token class-name">Ruan</span><span class="token punctuation">.</span><span class="token class-name">X</span><span class="token punctuation">.</span><span class="token class-name">T</span><span class="token punctuation">.</span>blog<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>modules<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">module</span><span class="token punctuation">&gt;</span></span>hello<span class="token operator">-</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>alibaba<span class="token operator">-</span>dependencies<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">module</span><span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">module</span><span class="token punctuation">&gt;</span></span>hello<span class="token operator">-</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>alibaba<span class="token operator">-</span>provider<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">module</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>modules<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>properties<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>java<span class="token punctuation">.</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>java<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>maven<span class="token punctuation">.</span>compiler<span class="token punctuation">.</span>source<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>java<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maven<span class="token punctuation">.</span>compiler<span class="token punctuation">.</span>source<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>maven<span class="token punctuation">.</span>compiler<span class="token punctuation">.</span>target<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>java<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maven<span class="token punctuation">.</span>compiler<span class="token punctuation">.</span>target<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>project<span class="token punctuation">.</span>build<span class="token punctuation">.</span>sourceEncoding<span class="token punctuation">&gt;</span></span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token punctuation">.</span>build<span class="token punctuation">.</span>sourceEncoding<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>project<span class="token punctuation">.</span>reporting<span class="token punctuation">.</span>outputEncoding<span class="token punctuation">&gt;</span></span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token punctuation">.</span>reporting<span class="token punctuation">.</span>outputEncoding<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>licenses<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>license<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span><span class="token class-name">Apache</span> <span class="token number">2.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>licenses<span class="token operator">/</span>LICENSE<span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">.</span>txt<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>license<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>licenses<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>developers<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>developer<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>ruanxiongteng<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span><span class="token class-name">Liberty</span> ruan<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>email<span class="token punctuation">&gt;</span></span><span class="token number">958465427</span><span class="token annotation punctuation">@qq</span><span class="token punctuation">.</span>com<span class="token operator">&lt;</span><span class="token operator">/</span>email<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>developer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>developers<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>dependencyManagement<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>smxy<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>hello<span class="token operator">-</span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>alibaba<span class="token operator">-</span>dependencies<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>project<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
                <span class="token generics"><span class="token punctuation">&lt;</span>type<span class="token punctuation">&gt;</span></span>pom<span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
                <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span><span class="token keyword">import</span><span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencyManagement<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>profiles<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>profile<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span><span class="token keyword">default</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>activation<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>activeByDefault<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>activeByDefault<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>activation<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>properties<span class="token punctuation">&gt;</span></span>
                <span class="token operator">&lt;</span>spring<span class="token operator">-</span>javaformat<span class="token punctuation">.</span>version<span class="token operator">&gt;</span><span class="token number">0.0</span><span class="token number">.12</span><span class="token operator">&lt;</span><span class="token operator">/</span>spring<span class="token operator">-</span>javaformat<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>build<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>plugins<span class="token punctuation">&gt;</span></span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>io<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>javaformat<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>javaformat<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span>$<span class="token punctuation">{</span>spring<span class="token operator">-</span>javaformat<span class="token punctuation">.</span>version<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>surefire<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
                            <span class="token generics"><span class="token punctuation">&lt;</span>includes<span class="token punctuation">&gt;</span></span>
                                <span class="token generics"><span class="token punctuation">&lt;</span>include<span class="token punctuation">&gt;</span></span><span class="token operator">*</span><span class="token operator">*</span><span class="token comment">/*Tests.java&lt;/include&gt;
                            &lt;/includes&gt;
                            &lt;excludes&gt;
                                &lt;exclude&gt;**/</span><span class="token class-name">Abstract</span><span class="token operator">*</span><span class="token punctuation">.</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>exclude<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>excludes<span class="token operator">&gt;</span>
                            <span class="token generics"><span class="token punctuation">&lt;</span>systemPropertyVariables<span class="token punctuation">&gt;</span></span>
                                <span class="token generics"><span class="token punctuation">&lt;</span>java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>egd<span class="token punctuation">&gt;</span></span>file<span class="token operator">:</span><span class="token operator">/</span>dev<span class="token operator">/</span><span class="token punctuation">.</span>/urandom<span class="token operator">&lt;</span><span class="token operator">/</span>java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>egd<span class="token operator">&gt;</span>
                                <span class="token generics"><span class="token punctuation">&lt;</span>java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>systemPropertyVariables<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>enforcer<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>executions<span class="token punctuation">&gt;</span></span>
                            <span class="token generics"><span class="token punctuation">&lt;</span>execution<span class="token punctuation">&gt;</span></span>
                                <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>enforce<span class="token operator">-</span>rules<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
                                <span class="token generics"><span class="token punctuation">&lt;</span>goals<span class="token punctuation">&gt;</span></span>
                                    <span class="token generics"><span class="token punctuation">&lt;</span>goal<span class="token punctuation">&gt;</span></span>enforce<span class="token operator">&lt;</span><span class="token operator">/</span>goal<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>goals<span class="token operator">&gt;</span>
                                <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
                                    <span class="token generics"><span class="token punctuation">&lt;</span>rules<span class="token punctuation">&gt;</span></span>
                                        <span class="token generics"><span class="token punctuation">&lt;</span>bannedDependencies<span class="token punctuation">&gt;</span></span>
                                            <span class="token generics"><span class="token punctuation">&lt;</span>excludes<span class="token punctuation">&gt;</span></span>
                                                <span class="token generics"><span class="token punctuation">&lt;</span>exclude<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>logging<span class="token operator">:</span><span class="token operator">*</span><span class="token operator">:</span><span class="token operator">*</span><span class="token operator">&lt;</span><span class="token operator">/</span>exclude<span class="token operator">&gt;</span>
                                            <span class="token operator">&lt;</span><span class="token operator">/</span>excludes<span class="token operator">&gt;</span>
                                            <span class="token generics"><span class="token punctuation">&lt;</span>searchTransitive<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>searchTransitive<span class="token operator">&gt;</span>
                                        <span class="token operator">&lt;</span><span class="token operator">/</span>bannedDependencies<span class="token operator">&gt;</span>
                                    <span class="token operator">&lt;</span><span class="token operator">/</span>rules<span class="token operator">&gt;</span>
                                    <span class="token generics"><span class="token punctuation">&lt;</span>fail<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>fail<span class="token operator">&gt;</span>
                                <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token operator">/</span>execution<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>executions<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>install<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
                            <span class="token generics"><span class="token punctuation">&lt;</span>skip<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>skip<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
                    <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>javadoc<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
                            <span class="token generics"><span class="token punctuation">&lt;</span>skip<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>skip<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
                        <span class="token generics"><span class="token punctuation">&lt;</span>inherited<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>inherited<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>profile<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>profiles<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>repositories<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>repository<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>milestone<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span><span class="token class-name">Spring</span> <span class="token class-name">Milestone</span><span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>repo<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>io<span class="token operator">/</span>milestone<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>snapshots<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>enabled<span class="token punctuation">&gt;</span></span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>enabled<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>snapshots<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>repository<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>repository<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>snapshot<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span><span class="token class-name">Spring</span> <span class="token class-name">Snapshot</span><span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>repo<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>io<span class="token operator">/</span>snapshot<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>snapshots<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>enabled<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>enabled<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>snapshots<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>repository<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>repositories<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>pluginRepositories<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>pluginRepository<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>milestone<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span><span class="token class-name">Spring</span> <span class="token class-name">Milestone</span><span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>repo<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>io<span class="token operator">/</span>milestone<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>snapshots<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>enabled<span class="token punctuation">&gt;</span></span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>enabled<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>snapshots<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>pluginRepository<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>pluginRepository<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>id<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>snapshot<span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span><span class="token class-name">Spring</span> <span class="token class-name">Snapshot</span><span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>url<span class="token punctuation">&gt;</span></span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>repo<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>io<span class="token operator">/</span>snapshot<span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>snapshots<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>enabled<span class="token punctuation">&gt;</span></span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>enabled<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>snapshots<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>pluginRepository<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>pluginRepositories<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br></div></div><h3 id="创建统一的依赖管理"><a href="#创建统一的依赖管理" class="header-anchor">#</a> 创建统一的依赖管理</h3> <p>根目录新建文件夹hello-spring-cloud-alibaba-dependencies</p> <p>新建文件pom</p> <h4 id="pom-2"><a href="#pom-2" class="header-anchor">#</a> POM</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.smxy&lt;/groupId&gt;
    &lt;artifactId&gt;hello-spring-cloud-alibaba-dependencies&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;url&gt;https://rxt520.github.io/Ruan.X.T.blog&lt;/url&gt;
    &lt;properties&gt;
        &lt;spring-cloud.version&gt;Greenwich.RELEASE&lt;/spring-cloud.version&gt;
        &lt;spring-cloud-alibaba.version&gt;0.9.0.RELEASE&lt;/spring-cloud-alibaba.version&gt;
    &lt;/properties&gt;
    &lt;licenses&gt;
        &lt;license&gt;
            &lt;name&gt;Apache 2.0&lt;/name&gt;
            &lt;url&gt;https://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;
        &lt;/license&gt;
    &lt;/licenses&gt;
    &lt;developers&gt;
        &lt;developer&gt;
            &lt;id&gt;ruanxiongteng&lt;/id&gt;
            &lt;name&gt;Liberty ruan&lt;/name&gt;
            &lt;email&gt;958465427@qq.com&lt;/email&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;
    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;
                &lt;version&gt;${spring-cloud-alibaba.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestone&lt;/id&gt;
            &lt;name&gt;Spring Milestone&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-snapshot&lt;/id&gt;
            &lt;name&gt;Spring Snapshot&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-milestone&lt;/id&gt;
            &lt;name&gt;Spring Milestone&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-snapshot&lt;/id&gt;
            &lt;name&gt;Spring Snapshot&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h3 id="服务提供者"><a href="#服务提供者" class="header-anchor">#</a> 服务提供者</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>服务提供方： 是指提供可复用和可调用服务的应用方
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="pom-3"><a href="#pom-3" class="header-anchor">#</a> POM</h4> <p>创建一个名为 <code>hello-spring-cloud-alibaba-provider</code> 的服务提供者项目，<code>pom.xml</code> 配置如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.smxy&lt;/groupId&gt;
        &lt;artifactId&gt;hello-spring-cloud-alibaba&lt;/artifactId&gt;
        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;
    &lt;/parent&gt;
    &lt;artifactId&gt;hello-spring-cloud-alibaba-provider&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;url&gt;https://rxt520.github.io/Ruan.X.T.blog/&lt;/url&gt;
    &lt;inceptionYear&gt;2018-Now&lt;/inceptionYear&gt;
    &lt;licenses&gt;
        &lt;license&gt;
            &lt;name&gt;Apache 2.0&lt;/name&gt;
            &lt;url&gt;https://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;
        &lt;/license&gt;
    &lt;/licenses&gt;
    &lt;developers&gt;
        &lt;developer&gt;
            &lt;id&gt;ruanxiongteng&lt;/id&gt;
            &lt;name&gt;Liberty ruan&lt;/name&gt;
            &lt;email&gt;958465427@qq.com&lt;/email&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;
    &lt;dependencies&gt;
        &lt;!-- Spring Boot Begin --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Boot End --&gt;
        &lt;!-- Spring Cloud Begin --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Cloud End --&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;mainClass&gt;com.smxy.spring.cloud.alibaba.provider.ProviderApplication&lt;/mainClass&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h4 id="application-yml"><a href="#application-yml" class="header-anchor">#</a> application.yml</h4> <p>在 <code>application.yml</code> 中配置 Nacos Server 的地址</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  application:
    # 服务名
    name: service-provider
  cloud:
    nacos:
      discovery:
        # 服务注册中心
        server-addr: 192.168.141.132:8848
server:
  # 服务端口
  port: 8070
management:
  # 端点检查（健康检查）
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="application"><a href="#application" class="header-anchor">#</a> Application</h4> <p>通过 Spring Cloud 原生注解 <code>@EnableDiscoveryClient</code> 开启服务注册发现功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.provider;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;
@SpringBootApplication
@EnableDiscoveryClient
public class ProviderApplication {
    public static void main(String[] args) {
        SpringApplication.run(ProviderApplication.class, args);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="controller"><a href="#controller" class="header-anchor">#</a> Controller</h4> <p>编写一个 <code>RestController</code> 提供 RESTFul API 用于测试提供者</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.provider.controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
@RestController
public class EchoController {
    @GetMapping(value = &quot;/echo/{string}&quot;)
    public String echo(@PathVariable String string) {
        return &quot;Hello Nacos Provider &quot; + string;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="验证是否成功"><a href="#验证是否成功" class="header-anchor">#</a> 验证是否成功</h4> <p>通过浏览器访问 <a href="">http:ip:8848/nacos</a> Nacos Server 网址</p> <h4 id="服务端点检查"><a href="#服务端点检查" class="header-anchor">#</a> 服务端点检查</h4> <blockquote><p><strong>健康检查：</strong> 以指定方式检查服务下挂载的实例 (Instance) 的健康度，从而确认该实例 (Instance) 是否能提供服务。根据检查结果，实例 (Instance) 会被判断为健康或不健康。对服务发起解析请求时，不健康的实例 (Instance) 不会返回给客户端。</p></blockquote> <p>通过浏览器访问 <a href="http://localhost:8070/actuator/nacos-discovery" target="_blank" rel="noopener noreferrer">http://localhost:8070/actuator/nacos-discovery<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;subscribe&quot;: [
        {
            &quot;jsonFromServer&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;service-provider&quot;,
            &quot;groupName&quot;: &quot;DEFAULT_GROUP&quot;,
            &quot;clusters&quot;: null,
            &quot;cacheMillis&quot;: 1000,
            &quot;hosts&quot;: [],
            &quot;lastRefTime&quot;: 0,
            &quot;checksum&quot;: &quot;&quot;,
            &quot;allIPs&quot;: false,
            &quot;key&quot;: &quot;service-provider&quot;,
            &quot;valid&quot;: true,
            &quot;keyEncoded&quot;: &quot;service-provider&quot;
        },
        {
            &quot;jsonFromServer&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;service-consumer&quot;,
            &quot;groupName&quot;: &quot;DEFAULT_GROUP&quot;,
            &quot;clusters&quot;: null,
            &quot;cacheMillis&quot;: 1000,
            &quot;hosts&quot;: [],
            &quot;lastRefTime&quot;: 0,
            &quot;checksum&quot;: &quot;&quot;,
            &quot;allIPs&quot;: false,
            &quot;key&quot;: &quot;service-consumer&quot;,
            &quot;valid&quot;: true,
            &quot;keyEncoded&quot;: &quot;service-consumer&quot;
        }
    ],
    &quot;NacosDiscoveryProperties&quot;: {
        &quot;serverAddr&quot;: &quot;192.168.141.132:8848&quot;,
        &quot;endpoint&quot;: &quot;&quot;,
        &quot;namespace&quot;: &quot;&quot;,
        &quot;watchDelay&quot;: 30000,
        &quot;logName&quot;: &quot;&quot;,
        &quot;service&quot;: &quot;service-provider&quot;,
        &quot;weight&quot;: 1,
        &quot;clusterName&quot;: &quot;DEFAULT&quot;,
        &quot;namingLoadCacheAtStart&quot;: &quot;false&quot;,
        &quot;metadata&quot;: {
            &quot;preserved.register.source&quot;: &quot;SPRING_CLOUD&quot;
        },
        &quot;registerEnabled&quot;: true,
        &quot;ip&quot;: &quot;192.168.141.1&quot;,
        &quot;networkInterface&quot;: &quot;&quot;,
        &quot;port&quot;: 8070,
        &quot;secure&quot;: false,
        &quot;accessKey&quot;: &quot;&quot;,
        &quot;secretKey&quot;: &quot;&quot;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="服务消费者"><a href="#服务消费者" class="header-anchor">#</a> 服务消费者</h3> <blockquote><p><strong>服务消费方：</strong> 是指会发起对某个服务调用的应用方</p></blockquote> <p>服务消费者的创建与服务提供者大同小异，这里采用最原始的一种方式，即显示的使用 <strong>LoadBalanceClient</strong> 和 <strong>RestTemplate</strong> 结合的方式来访问</p> <h4 id="pom-4"><a href="#pom-4" class="header-anchor">#</a> POM</h4> <p>创建一个名为 <code>hello-spring-cloud-alibaba-consumer</code> 的服务消费者项目，<code>pom.xml</code> 配置如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.smxy&lt;/groupId&gt;
        &lt;artifactId&gt;hello-spring-cloud-alibaba&lt;/artifactId&gt;
        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
        &lt;relativePath&gt;../pom.xml&lt;/relativePath&gt;
    &lt;/parent&gt;
    &lt;artifactId&gt;hello-spring-cloud-alibaba-consumer&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;url&gt;https://rxt520.github.io/Ruan.X.T.blog&lt;/url&gt;
    &lt;inceptionYear&gt;2018-Now&lt;/inceptionYear&gt;
    &lt;licenses&gt;
        &lt;license&gt;
            &lt;name&gt;Apache 2.0&lt;/name&gt;
            &lt;url&gt;https://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;
        &lt;/license&gt;
    &lt;/licenses&gt;
    &lt;developers&gt;
        &lt;developer&gt;
            &lt;id&gt;ruanxiongteng&lt;/id&gt;
            &lt;name&gt;Liberty ruan&lt;/name&gt;
            &lt;email&gt;958465427@qq.com&lt;/email&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;
    &lt;dependencies&gt;
        &lt;!-- Spring Boot Begin --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Boot End --&gt;
        &lt;!-- Spring Cloud Begin --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Cloud End --&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;mainClass&gt;com.funtl.spring.cloud.alibaba.consumer.ConsumerApplication&lt;/mainClass&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h4 id="application-yml-2"><a href="#application-yml-2" class="header-anchor">#</a> application.yml</h4> <p>在 <code>application.yml</code> 中配置 Nacos Server 的地址</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  application:
    # 服务名
    name: service-consumer
  cloud:
    nacos:
      discovery:
        # 服务注册中心
        server-addr: 192.168.141.132:8848
server:
  # 服务端口
  port: 8080
management:
  # 端点检查（健康检查）
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="application-2"><a href="#application-2" class="header-anchor">#</a> Application</h4> <p>通过 Spring Cloud 原生注解 <code>@EnableDiscoveryClient</code> 开启服务注册发现功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;
@SpringBootApplication
@EnableDiscoveryClient
public class ConsumerApplication {
    public static void main(String[] args) {
        SpringApplication.run(ConsumerApplication.class, args);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h4> <p>创建一个 <strong>Java 配置类</strong>，主要作用是为了注入 <strong>RestTemplate</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.configure;
import org.springframework.cloud.client.loadbalancer.LoadBalanced;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.client.RestTemplate;
@Configuration
public class ConsumerConfiguration {
    @Bean
    @LoadBalanced
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="controller-2"><a href="#controller-2" class="header-anchor">#</a> Controller</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.controller;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;
@RestController
public class TestController {
    private final RestTemplate restTemplate;
    @Autowired
    public TestController(RestTemplate restTemplate) {
        this.restTemplate = restTemplate;
    }
    @GetMapping(value = &quot;/echo/{str}&quot;)
    public String echo(@PathVariable String str) {
        // 使用服务名请求服务提供者
        return restTemplate.getForObject(&quot;http://service-provider/echo/&quot; + str, String.class);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="验证是否成功-2"><a href="#验证是否成功-2" class="header-anchor">#</a> 验证是否成功</h4> <p>通过浏览器访问 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovLzE5Mi4xNjguMTQxLjEzMjo4ODQ4L25hY29z" target="_blank" rel="noopener noreferrer">http://192.168.141.132:8848/nacos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Nacos Server 网址</p> <h4 id="服务端点检查-2"><a href="#服务端点检查-2" class="header-anchor">#</a> 服务端点检查</h4> <p>通过浏览器访问 <a href="http://localhost:8080/actuator/nacos-discovery%5D" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/nacos-discovery<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;subscribe&quot;: [
        {
            &quot;jsonFromServer&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;service-provider&quot;,
            &quot;groupName&quot;: &quot;DEFAULT_GROUP&quot;,
            &quot;clusters&quot;: null,
            &quot;cacheMillis&quot;: 1000,
            &quot;hosts&quot;: [],
            &quot;lastRefTime&quot;: 0,
            &quot;checksum&quot;: &quot;&quot;,
            &quot;allIPs&quot;: false,
            &quot;key&quot;: &quot;service-provider&quot;,
            &quot;valid&quot;: true,
            &quot;keyEncoded&quot;: &quot;service-provider&quot;
        },
        {
            &quot;jsonFromServer&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;service-consumer&quot;,
            &quot;groupName&quot;: &quot;DEFAULT_GROUP&quot;,
            &quot;clusters&quot;: null,
            &quot;cacheMillis&quot;: 1000,
            &quot;hosts&quot;: [],
            &quot;lastRefTime&quot;: 0,
            &quot;checksum&quot;: &quot;&quot;,
            &quot;allIPs&quot;: false,
            &quot;key&quot;: &quot;service-consumer&quot;,
            &quot;valid&quot;: true,
            &quot;keyEncoded&quot;: &quot;service-consumer&quot;
        }
    ],
    &quot;NacosDiscoveryProperties&quot;: {
        &quot;serverAddr&quot;: &quot;192.168.141.132:8848&quot;,
        &quot;endpoint&quot;: &quot;&quot;,
        &quot;namespace&quot;: &quot;&quot;,
        &quot;watchDelay&quot;: 30000,
        &quot;logName&quot;: &quot;&quot;,
        &quot;service&quot;: &quot;service-consumer&quot;,
        &quot;weight&quot;: 1,
        &quot;clusterName&quot;: &quot;DEFAULT&quot;,
        &quot;namingLoadCacheAtStart&quot;: &quot;false&quot;,
        &quot;metadata&quot;: {
            &quot;preserved.register.source&quot;: &quot;SPRING_CLOUD&quot;
        },
        &quot;registerEnabled&quot;: true,
        &quot;ip&quot;: &quot;192.168.141.1&quot;,
        &quot;networkInterface&quot;: &quot;&quot;,
        &quot;port&quot;: 8080,
        &quot;secure&quot;: false,
        &quot;accessKey&quot;: &quot;&quot;,
        &quot;secretKey&quot;: &quot;&quot;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="什么是-feign"><a href="#什么是-feign" class="header-anchor">#</a> 什么是 Feign</h3> <p>Feign 是一个声明式的伪 HTTP 客户端，它使得写 HTTP 客户端变得更简单。使用 Feign，只需要创建一个接口并注解。它具有可插拔的注解特性，可使用 Feign 注解和 JAX-RS 注解。Feign 支持可插拔的编码器和解码器。Feign 默认集成了 Ribbon，Nacos 也很好的兼容了 Feign，默认实现了负载均衡的效果</p> <ul><li>Feign 采用的是基于接口的注解</li> <li>Feign 整合了 Ribbon</li></ul> <h4 id="pom-5"><a href="#pom-5" class="header-anchor">#</a> POM</h4> <p>在 <code>hello-spring-cloud-alibaba-consumer</code> 项目中增加 <code>org.springframework.cloud:spring-cloud-starter-openfeign</code> 依赖</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="application-3"><a href="#application-3" class="header-anchor">#</a> Application</h4> <p>通过 <code>@EnableFeignClients</code> 注解开启 Feign 功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;
import org.springframework.cloud.openfeign.EnableFeignClients;
@SpringBootApplication
@EnableDiscoveryClient
@EnableFeignClients
public class ConsumerApplication {
    public static void main(String[] args) {
        SpringApplication.run(ConsumerApplication.class, args);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="service"><a href="#service" class="header-anchor">#</a> Service</h4> <p>创建业务结构，通过 <code>@FeignClient(&quot;服务名&quot;)</code> 注解来指定调用哪个服务</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.service;
import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
@FeignClient(value = &quot;service-provider&quot;)
public interface EchoService {
    @GetMapping(value = &quot;/echo/{string}&quot;)
    String echo(@PathVariable(&quot;string&quot;) String string);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="controller-3"><a href="#controller-3" class="header-anchor">#</a> Controller</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.controller;
import com.funtl.spring.cloud.alibaba.consumer.service.EchoService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
@RestController
public class TestEchoController {
    @Autowired
    private EchoService echoService;
    @GetMapping(value = &quot;/feign/echo/{str}&quot;)
    public String echo(@PathVariable String str) {
        return echoService.echo(str);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="验证是否成功-3"><a href="#验证是否成功-3" class="header-anchor">#</a> 验证是否成功</h4> <p>通过浏览器访问 <a href="http://localhost:8080/feign/echo/hi" target="_blank" rel="noopener noreferrer">http://localhost:8080/feign/echo/hi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Hello Nacos Provider hi
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="配置负载均衡"><a href="#配置负载均衡" class="header-anchor">#</a> 配置负载均衡</h4> <ul><li>修改 <code>service-provider</code> 服务的端口号如 8071，并启动多个实例，IDEA 中依次点击 <strong>Run</strong> -&gt; <strong>Edit Configurations</strong> 并勾选 <strong>Allow parallel run</strong> 以允许 IDEA 多实例运行项目</li> <li>再次启动 <code>service-provider</code> 实例，IDEA Spring Boot 面板可以看到</li> <li>Nacos Server 控制台可以看到 <code>service-provider</code> 有 2 个实例</li></ul> <p><strong>服务：</strong> 通过预定义接口网络访问的提供给客户端的软件功能
<strong>服务名：</strong> 服务提供的标识，通过该标识可以唯一确定其指代的服务
<strong>服务分组：</strong> 不同的服务可以归类到同一分组
<strong>虚拟集群：</strong> 同一个服务下的所有服务实例组成一个默认集群，集群可以被进一步按需求划分，划分的单位可以是虚拟集群
<strong>实例：</strong> 提供一个或多个服务的具有可访问网络地址（IP:Port）的进程
<strong>权重：</strong> 实例级别的配置。权重为浮点数。权重越大，分配给该实例的流量越大
<strong>健康保护阈值：</strong> 为了防止因过多实例 (Instance) 不健康导致流量全部流向健康实例 (Instance) ，继而造成流量压力把健康 健康实例 (Instance) 压垮并形成雪崩效应，应将健康保护阈值定义为一个 0 到 1 之间的浮点数。当域名健康实例 (Instance) 占总服务实例 (Instance) 的比例小于该值时，无论实例 (Instance) 是否健康，都会将这个实例 (Instance) 返回给客户端。这样做虽然损失了一部分流量，但是保证了集群的剩余健康实例 (Instance) 能正常工作</p> <ul><li>在 <code>service-provider</code> 项目的 <code>EchoController</code> 中增加测试方法</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Value(&quot;${server.port}&quot;)
private String port;
@GetMapping(value = &quot;/lb&quot;)
public String lb() {
    return &quot;Hello Nacos Provider i am from port: &quot; + port;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>在 <code>service-consumer</code> 项目的 <code>EchoService</code> 中增加测试方法</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@GetMapping(value = &quot;/lb&quot;)
String lb();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>在 <code>service-consumer</code> 项目的 <code>TestEchoController</code> 中增加测试方法</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>@GetMapping(value = &quot;/lb&quot;)
public String lb() {
    return echoService.lb();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>重启服务，通过浏览器访问 <a href="http://localhost:8080/lb" target="_blank" rel="noopener noreferrer">http://localhost:8080/lb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，反复刷新浏览器，浏览器交替显示</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Hello Nacos Provider i am from port: 8070
Hello Nacos Provider i am from port: 8071
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="附：扩展阅读"><a href="#附：扩展阅读" class="header-anchor">#</a> 附：扩展阅读</h3> <h4 id="常见负载均衡策略"><a href="#常见负载均衡策略" class="header-anchor">#</a> 常见负载均衡策略</h4> <p>负载主机可以提供很多种负载均衡方法，也就是我们常说的调度方法或算法</p> <h4 id="轮循"><a href="#轮循" class="header-anchor">#</a> 轮循</h4> <p><strong>Round Robin：</strong> 这种方法会将收到的请求循环分配到服务器集群中的每台机器，即有效服务器。如果使用这种方式，所有的标记进入虚拟服务的服务器应该有相近的资源容量 以及负载形同的应用程序。如果所有的服务器有相同或者相近的性能那么选择这种方式会使服务器负载形同。基于这个前提，轮循调度是一个简单而有效的分配请求 的方式。然而对于服务器不同的情况，选择这种方式就意味着能力比较弱的服务器也会在下一轮循环中接受轮循，即使这个服务器已经不能再处理当前这个请求了。 这可能导致能力较弱的服务器超载。</p> <h4 id="加权轮循"><a href="#加权轮循" class="header-anchor">#</a> 加权轮循</h4> <p><strong>Weighted Round Robin：</strong> 这种算法解决了简单轮循调度算法的缺点：传入的请求按顺序被分配到集群中服务器，但是会考虑提前为每台服务器分配的权重。管理员只是简单的通过服务 器的处理能力来定义各台服务器的权重。例如，能力最强的服务器 A 给的权重是 100，同时能力最低的服务器给的权重是 50。这意味着在服务器 B 接收到第一个 请求之前前，服务器 A 会连续的接受到 2 个请求，以此类推。</p> <h4 id="最少连接数"><a href="#最少连接数" class="header-anchor">#</a> 最少连接数</h4> <p><strong>Least Connection：</strong> 以上两种方法都没有考虑的是系统不能识别在给定的时间里保持了多少连接。因此可能发生，服务器 B 服务器收到的连接比服务器 A 少但是它已经超载，因为 服务器 B 上的用户打开连接持续的时间更长。这就是说连接数即服务器的负载是累加的。这种潜在的问题可以通过 “最少连接数” 算法来避免：传入的请求是根据每 台服务器当前所打开的连接数来分配的。即活跃连接数最少的服务器会自动接收下一个传入的请求。接本上和简单轮询的原则相同：所有拥有虚拟服务的服务器资源 容量应该相近。值得注意的是，在流量率低的配置环境中，各服务器的流量并不是相同的，会优先考虑第一台服务器。这是因为，如果所有的服务器是相同的，那么 第一个服务器优先，直到第一台服务器有连续的活跃流量，否则总是会优先选择第一台服务器。</p> <h4 id="最少连接数慢启动时间"><a href="#最少连接数慢启动时间" class="header-anchor">#</a> 最少连接数慢启动时间</h4> <p><strong>Least Connection Slow Start Time：</strong> 对最少连接数和带权重的最小连接数调度方法来说，当一个服务器刚加入线上环境是，可以为其配置一个时间段，在这段时间内连接数是有限制的而且是缓慢 增加的。这为服务器提供了一个‘过渡时间’以保证这个服务器不会因为刚启动后因为分配的连接数过多而超载。这个值在 L7 配置界面设置。</p> <h4 id="加权最少连接"><a href="#加权最少连接" class="header-anchor">#</a> 加权最少连接</h4> <p><strong>Weighted Least Connection：</strong> 如果服务器的资源容量各不相同，那么 “加权最少连接” 方法更合适：由管理员根据服务器情况定制的权重所决定的活跃连接数一般提供了一种对服务器非常 平衡的利用，因为他它借鉴了最少连接和权重两者的优势。通常，这是一个非常公平的分配方式，因为它使用了连接数和服务器权重比例；集群中比例最低的服务器 自动接收下一个请求。但是请注意，在低流量情况中使用这种方法时，请参考 “最小连接数” 方法中的注意事项。</p> <h4 id="基于代理的自适应负载均衡"><a href="#基于代理的自适应负载均衡" class="header-anchor">#</a> 基于代理的自适应负载均衡</h4> <p><strong>Agent Based Adaptive Balancing：</strong> 除了上述方法之外，负载主机包含一个自适用逻辑用来定时监测服务器状态和该服务器的权重。对于非常强大的 “基于代理的自适应负载均衡” 方法来说，负 载主机以这种方式来定时检测所有服务器负载情况：每台服务器都必须提供一个包含文件，这个文件包含一个 0~99 的数字用来标明改服务器的实际负载情况 (0 = 空前，99 = 超载，101 = 失败，102 = 管理员禁用)，而服务器同构 http get 方法来获取这个文件；同时对集群中服务器来说，以二进制文件形式提供自身负载情况也是该服务器工作之一，然而，并没有限制服务器如何计算自身的负载 情况。根据服务器整体负载情况，有两种策略可以选择：在常规的操作中，调度算法通过收集的服务器负载值和分配给该服务器的连接数的比例计算出一个权重比 例。因此，如果一个服务器负载过大，权重会通过系统透明的作重新调整。和加权轮循调度方法一样，不正确的分配可以被记录下来使得可以有效的为不同服务器分 配不同的权重。然而，在流量非常低的环境下，服务器报上来的负载值将不能建立一个有代表性的样本；那么基于这些值来分配负载的话将导致失控以及指令震荡。 因此，在这种情况下更合理的做法是基于静态的权重比来计算负载分配。当所有服务器的负载低于管理员定义的下限时，负载主机就会自动切换为加权轮循方式来分 配请求；如果负载大于管理员定义的下限，那么负载主机又会切换回自适应方式。</p> <h4 id="固定权重"><a href="#固定权重" class="header-anchor">#</a> 固定权重</h4> <p><strong>Fixed Weighted：</strong> 最高权重只有在其他服务器的权重值都很低时才使用。然而，如果最高权重的服务器下降，则下一个最高优先级的服务器将为客户端服务。这种方式中每个真实服务器的权重需要基于服务器优先级来配置。</p> <h4 id="加权响应"><a href="#加权响应" class="header-anchor">#</a> 加权响应</h4> <p><strong>Weighted Response：</strong> 流量的调度是通过加权轮循方式。加权轮循中所使用的权重是根据服务器有效性检测的响应时间来计算。每个有效性检测都会被计时，用来标记它响应成功花 了多长时间。但是需要注意的是，这种方式假定服务器心跳检测是基于机器的快慢，但是这种假设也许不总是能够成立。所有服务器在虚拟服务上的响应时间的总和 加在一起，通过这个值来计算单个服务物理服务器的权重；这个权重值大约每 15 秒计算一次。</p> <h4 id="源-ip-哈希"><a href="#源-ip-哈希" class="header-anchor">#</a> 源 IP 哈希</h4> <p><strong>Source IP Hash：</strong> 这种方式通过生成请求源 IP 的哈希值，并通过这个哈希值来找到正确的真实服务器。这意味着对于同一主机来说他对应的服务器总是相同。使用这种方式，你不需要保存任何源 IP。但是需要注意，这种方式可能导致服务器负载不平衡。</p> <h2 id="nacos"><a href="#nacos" class="header-anchor">#</a> <a href="https://nacos.io/zh-cn/docs/quick-start-docker.html" target="_blank" rel="noopener noreferrer">Nacos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <h3 id="nacos-docker-快速开始"><a href="#nacos-docker-快速开始" class="header-anchor">#</a> Nacos Docker 快速开始</h3> <p>Clone 项目</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>git clone https:<span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>nacos<span class="token operator">-</span><span class="token function">group</span><span class="token operator">/</span>nacos<span class="token operator">-</span>docker<span class="token punctuation">.</span>git
cd nacos<span class="token operator">-</span>docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>单机模式 Derby</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>docker<span class="token operator">-</span>compose <span class="token operator">-</span>f example<span class="token operator">/</span>standalone<span class="token operator">-</span>derby<span class="token punctuation">.</span>yaml up <span class="token operator">-</span>d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>单机模式 Mysql</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>docker<span class="token operator">-</span>compose <span class="token operator">-</span>f example<span class="token operator">/</span>standalone<span class="token operator">-</span>mysql<span class="token punctuation">.</span>yaml up <span class="token operator">-</span>d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>集群模式</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>docker<span class="token operator">-</span>compose <span class="token operator">-</span>f example<span class="token operator">/</span>cluster<span class="token operator">-</span>hostname<span class="token punctuation">.</span>yaml up <span class="token operator">-</span>d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>服务注册</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>curl <span class="token operator">-</span>X POST <span class="token string">'http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=nacos.naming.serviceName&amp;ip=20.18.7.10&amp;port=8080'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>服务发现</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>curl <span class="token operator">-</span>X GET <span class="token string">'http://127.0.0.1:8848/nacos/v1/ns/instances?serviceName=nacos.naming.serviceName'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>发布配置</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>curl <span class="token operator">-</span>X POST <span class="token string">&quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&amp;content=helloWorld&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>获取配置</p> <div class="language-powershell line-numbers-mode"><pre class="language-powershell"><code>  curl <span class="token operator">-</span>X GET <span class="token string">&quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Nacos 控制台</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>link：http://127.0.0.1:8848/nacos/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看日志</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker-compose -f example/standalone-derby.yaml logs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="nacos-分布式配置中心"><a href="#nacos-分布式配置中心" class="header-anchor">#</a> Nacos 分布式配置中心</h3> <h4 id="概述-2"><a href="#概述-2" class="header-anchor">#</a> 概述</h4> <p>在分布式系统中，由于服务数量巨多，为了方便服务配置文件统一管理，实时更新，所以需要分布式配置中心组件</p> <h4 id="什么是-nacos-config"><a href="#什么是-nacos-config" class="header-anchor">#</a> 什么是 Nacos Config</h4> <p>Nacos 提供用于存储配置和其他元数据的 key/value 存储，为分布式系统中的外部化配置提供服务器端和客户端支持。使用 Spring Cloud Alibaba Nacos Config，您可以在 Nacos Server 集中管理你 Spring Cloud 应用的外部属性配置。</p> <p>Spring Cloud Alibaba Nacos Config 是 Spring Cloud Config Server 和 Client 的替代方案，客户端和服务器上的概念与 Spring Environment 和 PropertySource 有着一致的抽象，在特殊的 bootstrap 阶段，配置被加载到 Spring 环境中。当应用程序通过部署管道从开发到测试再到生产时，您可以管理这些环境之间的配置，并确保应用程序具有迁移时需要运行的所有内容。</p> <h4 id="接入配置中心"><a href="#接入配置中心" class="header-anchor">#</a> 接入配置中心</h4> <h4 id="pom-6"><a href="#pom-6" class="header-anchor">#</a> POM</h4> <p>我们以 <code>service-consumer</code> 项目为例，修改 <code>pom.xml</code> ，引入 <strong>Nacos Config Starter</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="controller-4"><a href="#controller-4" class="header-anchor">#</a> Controller</h4> <p>完成上述两步后，应用会从 Nacos Config 中获取相应的配置，并添加在 Spring Environment 的 PropertySources 中。这里我们使用 <code>@Value</code> 注解来将对应的配置注入到 <code>TestEchoController</code> 的 <code>username</code>字段，并添加 <code>@RefreshScope</code> 打开动态刷新功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.controller;
import com.funtl.spring.cloud.alibaba.consumer.service.EchoService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.cloud.context.config.annotation.RefreshScope;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
@RefreshScope
@RestController
public class TestEchoController {
    @Autowired
    private EchoService echoService;
    @Value(&quot;${user.name}&quot;)
    private String username;
    @GetMapping(value = &quot;/config&quot;)
    public String config() {
        return echoService.echo(username);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="使用控制台发布配置"><a href="#使用控制台发布配置" class="header-anchor">#</a> 使用控制台发布配置</h4> <p>通过浏览器访问 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovLzE5Mi4xNjguMTQxLjEzMjo4ODQ4L25hY29z" target="_blank" rel="noopener noreferrer">http://192.168.141.132:8848/nacos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，访问 Nacos Server</p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/c00a9541009306e.png" alt="img"></p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/39061c569d742e0.png" alt="img"></p> <blockquote><p><strong>注意：</strong> Data ID 的默认扩展名为 <code>.properties</code> ，希望使用 YAML 配置，此处必须指明是 <code>.yaml</code></p></blockquote> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/3fbe3a8f4fad2a5.png" alt="img"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  application:
    # 服务名
    name: service-consumer
  cloud:
    nacos:
      discovery:
        # 服务注册中心
        server-addr: 192.168.12.130:8848
server:
  # 服务端口
  port: 8080
management:
  # 端点检查（健康检查）
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
user:
  name: &quot;RXT&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="修改客户端配置"><a href="#修改客户端配置" class="header-anchor">#</a> 修改客户端配置</h4> <p>创建名为 <code>bootstrap.properties</code> 的配置文件并删除之前创建的 <code>application.yml</code> 配置文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring.application.name=service-consumer-config
spring.cloud.nacos.config.server-addr=192.168.12.130:8848
spring.cloud.nacos.config.file-extension=yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>通过浏览器访问 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2NvbmZpZw==" target="_blank" rel="noopener noreferrer">http://localhost:8080/config<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，浏览器输出如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Hello Nacos Provider 灶门炭治郎
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><strong>注意：</strong> Spring Boot 配置文件的加载顺序，依次为 <code>bootstrap.properties</code> -&gt; <code>bootstrap.yml</code> -&gt; <code>application.properties</code> -&gt; <code>application.yml</code> ，其中 <strong>bootstrap.properties</strong> 配置为最高优先级</p></blockquote> <h4 id="动态刷新配置"><a href="#动态刷新配置" class="header-anchor">#</a> 动态刷新配置</h4> <p>在 Nacos Server 控制台修改配置文件，将 <code>user.name</code> 属性修改为 <code>灶门祢豆子</code>，此时观察控制台日志，你会发现我们已经成功刷新了配置</p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/97d827e6b255fbc.png" alt="img"></p> <h4 id="验证是否成功-4"><a href="#验证是否成功-4" class="header-anchor">#</a> 验证是否成功</h4> <p>通过浏览器访问 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2NvbmZpZw==" target="_blank" rel="noopener noreferrer">http://localhost:8080/config<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，浏览器输出如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Hello Nacos Provider 灶门祢豆子
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><strong>提示：</strong> 你可以使用 <code>spring.cloud.nacos.config.refresh.enabled=false</code> 来关闭动态刷新</p></blockquote> <h4 id="附：扩展阅读-2"><a href="#附：扩展阅读-2" class="header-anchor">#</a> 附：扩展阅读</h4> <h4 id="endpoint-信息查看"><a href="#endpoint-信息查看" class="header-anchor">#</a> Endpoint 信息查看</h4> <p>Spring Boot 应用支持通过 Endpoint 来暴露相关信息，Nacos Config Starter 也支持这一点。在使用之前需要在 maven 中添加 <code>spring-boot-starter-actuator</code>依赖，并在配置中允许 Endpoints 的访问。</p> <ul><li><strong>nacos-discovery：</strong> <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2FjdHVhdG9yL25hY29zLWRpc2NvdmVyeQ==" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/nacos-discovery<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;subscribe&quot;: [
        {
            &quot;jsonFromServer&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;service-consumer&quot;,
            &quot;groupName&quot;: &quot;DEFAULT_GROUP&quot;,
            &quot;clusters&quot;: null,
            &quot;cacheMillis&quot;: 1000,
            &quot;hosts&quot;: [],
            &quot;lastRefTime&quot;: 0,
            &quot;checksum&quot;: &quot;&quot;,
            &quot;allIPs&quot;: false,
            &quot;key&quot;: &quot;service-consumer&quot;,
            &quot;valid&quot;: true,
            &quot;keyEncoded&quot;: &quot;service-consumer&quot;
        },
        {
            &quot;jsonFromServer&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;service-provider&quot;,
            &quot;groupName&quot;: &quot;DEFAULT_GROUP&quot;,
            &quot;clusters&quot;: null,
            &quot;cacheMillis&quot;: 1000,
            &quot;hosts&quot;: [],
            &quot;lastRefTime&quot;: 0,
            &quot;checksum&quot;: &quot;&quot;,
            &quot;allIPs&quot;: false,
            &quot;key&quot;: &quot;service-provider&quot;,
            &quot;valid&quot;: true,
            &quot;keyEncoded&quot;: &quot;service-provider&quot;
        }
    ],
    &quot;NacosDiscoveryProperties&quot;: {
        &quot;serverAddr&quot;: &quot;192.168.141.132:8848&quot;,
        &quot;endpoint&quot;: &quot;&quot;,
        &quot;namespace&quot;: &quot;&quot;,
        &quot;watchDelay&quot;: 30000,
        &quot;logName&quot;: &quot;&quot;,
        &quot;service&quot;: &quot;service-consumer&quot;,
        &quot;weight&quot;: 1,
        &quot;clusterName&quot;: &quot;DEFAULT&quot;,
        &quot;namingLoadCacheAtStart&quot;: &quot;false&quot;,
        &quot;metadata&quot;: {
            &quot;preserved.register.source&quot;: &quot;SPRING_CLOUD&quot;
        },
        &quot;registerEnabled&quot;: true,
        &quot;ip&quot;: &quot;192.168.141.1&quot;,
        &quot;networkInterface&quot;: &quot;&quot;,
        &quot;port&quot;: 8080,
        &quot;secure&quot;: false,
        &quot;accessKey&quot;: &quot;&quot;,
        &quot;secretKey&quot;: &quot;&quot;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><ul><li><strong>nacos-config：</strong> <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2FjdHVhdG9yL25hY29zLWNvbmZpZw==" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/nacos-config<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;NacosConfigProperties&quot;: {
        &quot;serverAddr&quot;: &quot;192.168.141.132:8848&quot;,
        &quot;encode&quot;: null,
        &quot;group&quot;: &quot;DEFAULT_GROUP&quot;,
        &quot;prefix&quot;: null,
        &quot;fileExtension&quot;: &quot;yaml&quot;,
        &quot;timeout&quot;: 3000,
        &quot;endpoint&quot;: null,
        &quot;namespace&quot;: null,
        &quot;accessKey&quot;: null,
        &quot;secretKey&quot;: null,
        &quot;contextPath&quot;: null,
        &quot;clusterName&quot;: null,
        &quot;name&quot;: null,
        &quot;sharedDataids&quot;: null,
        &quot;refreshableDataids&quot;: null,
        &quot;extConfig&quot;: null
    },
    &quot;RefreshHistory&quot;: [
        {
            &quot;timestamp&quot;: &quot;2019-06-30 18:30:45&quot;,
            &quot;dataId&quot;: &quot;service-consumer-config.yaml&quot;,
            &quot;md5&quot;: &quot;690fd78b5ae9fac5b545c1a8d7ec4e2b&quot;
        },
        {
            &quot;timestamp&quot;: &quot;2019-06-30 18:22:08&quot;,
            &quot;dataId&quot;: &quot;service-consumer-config.yaml&quot;,
            &quot;md5&quot;: &quot;40b12ffc9d305ec1cad65d606e8f4708&quot;
        }
    ],
    &quot;Sources&quot;: [
        {
            &quot;lastSynced&quot;: &quot;2019-06-30 18:22:05&quot;,
            &quot;dataId&quot;: &quot;service-consumer-config.yaml&quot;
        }
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><blockquote><p><strong>注意：</strong> Sources 表示此客户端从哪些 Nacos Config 配置项中获取了信息，RefreshHistory 表示动态刷新的历史记录，最多保存20条，NacosConfigProperties 则为 Nacos Config Starter 本身的配置</p></blockquote> <h4 id="更多配置"><a href="#更多配置" class="header-anchor">#</a> 更多配置</h4> <table><thead><tr><th style="text-align:left;">配置项</th> <th style="text-align:left;">key</th> <th style="text-align:left;">默认值</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;">服务端地址</td> <td style="text-align:left;">spring.cloud.nacos.config.server-addr</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">DataId前缀</td> <td style="text-align:left;">spring.cloud.nacos.config.prefix</td> <td style="text-align:left;"></td> <td style="text-align:left;">spring.application.name</td></tr> <tr><td style="text-align:left;">Group</td> <td style="text-align:left;">spring.cloud.nacos.config.group</td> <td style="text-align:left;">DEFAULT_GROUP</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">dataID后缀及内容文件格式</td> <td style="text-align:left;">spring.cloud.nacos.config.file-extension</td> <td style="text-align:left;">properties</td> <td style="text-align:left;">dataId的后缀，同时也是配置内容的文件格式，目前只支持 properties</td></tr> <tr><td style="text-align:left;">配置内容的编码方式</td> <td style="text-align:left;">spring.cloud.nacos.config.encode</td> <td style="text-align:left;">UTF-8</td> <td style="text-align:left;">配置的编码</td></tr> <tr><td style="text-align:left;">获取配置的超时时间</td> <td style="text-align:left;">spring.cloud.nacos.config.timeout</td> <td style="text-align:left;">3000</td> <td style="text-align:left;">单位为 ms</td></tr> <tr><td style="text-align:left;">配置的命名空间</td> <td style="text-align:left;">spring.cloud.nacos.config.namespace</td> <td style="text-align:left;"></td> <td style="text-align:left;">常用场景之一是不同环境的配置的区分隔离，例如开发测试环境和生产环境的资源隔离等。</td></tr> <tr><td style="text-align:left;">AccessKey</td> <td style="text-align:left;">spring.cloud.nacos.config.access-key</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">SecretKey</td> <td style="text-align:left;">spring.cloud.nacos.config.secret-key</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">相对路径</td> <td style="text-align:left;">spring.cloud.nacos.config.context-path</td> <td style="text-align:left;"></td> <td style="text-align:left;">服务端 API 的相对路径</td></tr> <tr><td style="text-align:left;">接入点</td> <td style="text-align:left;">spring.cloud.nacos.config.endpoint</td> <td style="text-align:left;">UTF-8</td> <td style="text-align:left;">地域的某个服务的入口域名，通过此域名可以动态地拿到服务端地址</td></tr> <tr><td style="text-align:left;">是否开启监听和自动刷新</td> <td style="text-align:left;">spring.cloud.nacos.config.refresh.enabled</td> <td style="text-align:left;">true</td> <td style="text-align:left;"></td></tr></tbody></table> <h4 id="更多介绍"><a href="#更多介绍" class="header-anchor">#</a> 更多介绍</h4> <p>Nacos为用户提供包括动态服务发现，配置管理，服务管理等服务基础设施，帮助用户更灵活，更轻松地构建，交付和管理他们的微服务平台，基于 Nacos, 用户可以更快速的构建以“服务”为中心的现代云原生应用。Nacos 可以和 <strong>Spring Cloud</strong>、<strong>Kubernetes/CNCF</strong>、<strong>Dubbo</strong> 等微服务生态无缝融合，为用户提供更卓越的体验</p> <h3 id="nacos多环境配置"><a href="#nacos多环境配置" class="header-anchor">#</a> Nacos多环境配置</h3> <h4 id="概述-3"><a href="#概述-3" class="header-anchor">#</a> 概述</h4> <p>我们在做项目开发的时候，生产环境和测试环境的一些配置可能会不一样，有时候一些功能也可能会不一样，所以我们可能会在上线的时候手工修改这些配置信息。Spring 为我们提供了 Spring Boot Profile 这个功能（Maven 也为我们提供了 Maven Profile）。我们只需要在启动的时候添加一个虚拟机参数，激活自己环境所要用的 Profile 就可以了。</p> <p>操作起来很简单，只需要为不同的环境编写专门的配置文件，如：<code>application-dev.yml</code>、<code>application-prod.yml</code>， 启动项目时只需要增加一个命令参数 <code>--spring.profiles.active=</code> 环境配置即可</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>java -jar 1.0.0-SNAPSHOT.jar --spring.profiles.active=prod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="什么是-nacos-config-profile"><a href="#什么是-nacos-config-profile" class="header-anchor">#</a> 什么是 Nacos Config Profile</h4> <p><code>spring-cloud-starter-alibaba-nacos-config</code> 在加载配置的时候，不仅仅加载了以 dataid 为 <code>${spring.application.name}.${file-extension:properties}</code> 为前缀的基础配置，还加载了 dataid 为 <code>${spring.application.name}-${profile}.${file-extension:properties}</code> 的基础配置。在日常开发中如果遇到多套环境下的不同配置，可以通过 Spring 提供的 <code>${spring.profiles.active}</code> 这个配置项来配置。</p> <h4 id="使用-nacos-config-profile"><a href="#使用-nacos-config-profile" class="header-anchor">#</a> 使用 Nacos Config Profile</h4> <p>我们以 <code>service-provider</code> 项目为例，演示多环境配置效果，不要忘记依赖 Nacos Config Starter</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="使用控制台发布配置-2"><a href="#使用控制台发布配置-2" class="header-anchor">#</a> 使用控制台发布配置</h4> <blockquote><p><strong>注意：</strong> 控制台发布配置时不要加注释，否则打成 Jar 包后运行会报无法解析配置文件的错误</p></blockquote> <p>通过浏览器访问 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovLzE5Mi4xNjguMTQxLjEzMjo4ODQ4L25hY29z" target="_blank" rel="noopener noreferrer">http://192.168.141.132:8848/nacos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，访问 Nacos Server</p> <ul><li>发布一个名为 <code>service-provider-config.yaml</code> 的 <strong>测试环境</strong> 配置</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  application:
    # 服务名
    name: service-provider
  cloud:
    nacos:
      discovery:
        # 服务注册中心
        server-addr: 192.168.12.130:8848
server:
  # 服务端口
  port: 8070
management:
  # 端点检查（健康检查）
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>发布一个名为 <code>service-provider-config-prod.yaml</code> 的 <strong>生产环境</strong> 配置</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  application:
    # 服务名
    name: service-provider
  cloud:
    nacos:
      discovery:
        # 服务注册中心
        server-addr: 192.168.12.130:8848
server:
  # 修改了上面的端口号，区分配置的不同
  port: 8071
management:
  # 端点检查（健康检查）
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="修改客户端配置-2"><a href="#修改客户端配置-2" class="header-anchor">#</a> 修改客户端配置</h4> <ul><li>创建名为 <code>bootstrap.properties</code> 的配置文件并删除之前创建的 <code>application.yml</code> 配置文件</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring.application.name=service-provider-config
spring.cloud.nacos.config.server-addr=192.168.12.130:8848
spring.cloud.nacos.config.file-extension=yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>创建名为 <code>bootstrap-prod.properties</code> 的配置文件</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring.profiles.active=prod
spring.application.name=service-provider-config
spring.cloud.nacos.config.server-addr=192.168.12.130:8848
spring.cloud.nacos.config.file-extension=yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="测试多环境配置"><a href="#测试多环境配置" class="header-anchor">#</a> 测试多环境配置</h4> <p>此时我们有两个配置文件，分别为 <code>bootstrap.properties</code> 和 <code>bootstrap-prod.properties</code> ，我们需要指定启动时加载哪一个配置文件</p> <p><strong>Run</strong> -&gt; <strong>Edit Configurations</strong> -&gt; <strong>Active profiles:</strong></p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/d532565c5f5b7ed.png" alt="img"></p> <p>运行项目并观察日志</p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/658e561f28187f5.png" alt="img"></p> <p>由上图可知，我们成功加载了不同环境的配置</p> <h2 id="sentinel"><a href="#sentinel" class="header-anchor">#</a> Sentinel</h2> <h3 id="什么是服务雪崩"><a href="#什么是服务雪崩" class="header-anchor">#</a> 什么是服务雪崩</h3> <p>在微服务架构中，根据业务来拆分成一个个的服务，服务与服务之间可以通过 <code>HTTP/RPC</code> 相互调用，在 Spring Cloud 中可以用 <code>RestTemplate + LoadBalanceClient</code> 和 <code>Feign</code> 来调用。为了保证其高可用，单个服务通常会集群部署。由于网络原因或者自身的原因，服务并不能保证 100% 可用，如果单个服务出现问题，调用这个服务就会出现线程阻塞，此时若有大量的请求涌入，<code>Servlet</code> 容器的线程资源会被消耗完毕，导致服务瘫痪。服务与服务之间的依赖性，故障会传播，会对整个微服务系统造成灾难性的严重后果，这就是服务故障的 <strong>“雪崩”</strong> 效应。为了解决这个问题，业界提出了 <strong>熔断器模型</strong>。</p> <p>阿里巴巴开源了 Sentinel 组件，实现了熔断器模式，Spring Cloud 对这一组件进行了整合。在微服务架构中，一个请求需要调用多个服务是非常常见的</p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/5c6d81662d64988.png" alt="img"></p> <p>较底层的服务如果出现故障，会导致连锁故障。当对特定的服务的调用的不可用达到一个阀值熔断器将会被打开</p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/b0f3c3e396e845a.png" alt="img"></p> <p>熔断器打开后，为了避免连锁故障，通过 <code>fallback</code> 方法可以直接返回一个固定值。</p> <h3 id="什么是-sentinel"><a href="#什么是-sentinel" class="header-anchor">#</a> 什么是 Sentinel</h3> <p>随着微服务的流行，服务和服务之间的稳定性变得越来越重要。Sentinel 以流量为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。</p> <h4 id="sentinel-的特征"><a href="#sentinel-的特征" class="header-anchor">#</a> Sentinel 的特征</h4> <ul><li><strong>丰富的应用场景：</strong> Sentinel 承接了阿里巴巴近 10 年的双十一大促流量的核心场景，例如秒杀（即突发流量控制在系统容量可以承受的范围）、消息削峰填谷（对于突然到来的大量请求，您可以配置流控规则，以稳定的速度逐步处理这些请求，从而避免流量突刺造成系统负载过高）、集群流量控制、实时熔断下游不可用应用等</li> <li><strong>完备的实时监控：</strong> Sentinel 同时提供实时的监控功能。您可以在控制台中看到接入应用的单台机器秒级数据，甚至 500 台以下规模的集群的汇总运行情况</li> <li><strong>广泛的开源生态：</strong> Sentinel 提供开箱即用的与其它开源框架 / 库的整合模块，例如与 Spring Cloud、Dubbo、gRPC 的整合。您只需要引入相应的依赖并进行简单的配置即可快速地接入 Sentinel</li> <li><strong>完善的 SPI 扩展点：</strong> Sentinel 提供简单易用、完善的 SPI 扩展接口。您可以通过实现扩展接口来快速地定制逻辑。例如定制规则管理、适配动态数据源等</li></ul> <h4 id="sentinel-的主要特性"><a href="#sentinel-的主要特性" class="header-anchor">#</a> Sentinel 的主要特性</h4> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/0bd6df88b1d5c61.png" alt="img"></p> <h4 id="sentinel-的开源生态"><a href="#sentinel-的开源生态" class="header-anchor">#</a> Sentinel 的开源生态</h4> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/b8f3e97e62968bd.png" alt="img"></p> <h4 id="sentinel-的组成"><a href="#sentinel-的组成" class="header-anchor">#</a> Sentinel 的组成</h4> <ul><li><strong>核心库（Java 客户端）：</strong> 不依赖任何框架 / 库，能够运行于所有 Java 运行时环境，同时对 Dubbo / Spring Cloud 等框架也有较好的支持</li> <li><strong>控制台（Dashboard）：</strong> 基于 Spring Boot 开发，打包后可以直接运行，不需要额外的 Tomcat 等应用容器</li></ul> <h3 id="sentinel控制台"><a href="#sentinel控制台" class="header-anchor">#</a> Sentinel控制台</h3> <h4 id="概述-4"><a href="#概述-4" class="header-anchor">#</a> 概述</h4> <p>Sentinel 提供一个轻量级的开源控制台，它提供机器发现以及健康情况管理、监控（单机和集群），规则管理和推送的功能。另外，鉴权在生产环境中也必不可少。这里，我们将会详细讲述如何通过简单的步骤就可以使用这些功能。Sentinel 控制台最少应该包含如下功能</p> <ul><li><strong>查看机器列表以及健康情况：</strong> 收集 Sentinel 客户端发送的心跳包，用于判断机器是否在线。</li> <li><strong>监控 (单机和集群聚合)：</strong> 通过 Sentinel 客户端暴露的监控 API，定期拉取并且聚合应用监控信息，最终可以实现秒级的实时监控。</li> <li><strong>规则管理和推送：</strong> 统一管理推送规则。</li> <li><strong>鉴权：</strong> 生产环境中鉴权非常重要。这里每个开发者需要根据自己的实际情况进行定制。</li></ul> <h4 id="启动控制台"><a href="#启动控制台" class="header-anchor">#</a> 启动控制台</h4> <h5 id="获取"><a href="#获取" class="header-anchor">#</a> 获取</h5> <p>您可以从 <a href="https://github.com/alibaba/Sentinel/releases" target="_blank" rel="noopener noreferrer">官方 GitHub Release 页面<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 页面下载最新版本的控制台 JAR 包。</p> <h5 id="启动"><a href="#启动" class="header-anchor">#</a> 启动</h5> <blockquote><p><strong>注意：</strong> 启动 Sentinel 控制台需要 JDK 版本为 1.8 及以上版本</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>java -Dserver.port=8888 -Dcsp.sentinel.dashboard.server=localhost:8888 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中 <code>-Dserver.port=8080</code> 用于指定 Sentinel 控制台端口为 <code>8080</code></p> <blockquote><p><strong>注意：</strong> 从 Sentinel 1.6.0 起，Sentinel 控制台引入基本的 <strong>登录</strong> 功能，<strong>默认用户名和密码都是 sentinel</strong></p></blockquote> <h5 id="鉴权"><a href="#鉴权" class="header-anchor">#</a> 鉴权</h5> <p>用户可以通过如下参数进行配置</p> <ul><li><code>-Dsentinel.dashboard.auth.username=sentinel</code> 用于指定控制台的登录用户名为 sentinel</li> <li><code>-Dsentinel.dashboard.auth.password=123456</code> 用于指定控制台的登录密码为 123456；如果省略这两个参数，默认用户和密码均为 sentinel</li> <li><code>-Dserver.servlet.session.timeout=7200</code> 用于指定 Spring Boot 服务端 session 的过期时间，如 7200 表示 7200 秒；60m 表示 60 分钟，默认为 30 分钟</li></ul> <h5 id="验证安装是否成功"><a href="#验证安装是否成功" class="header-anchor">#</a> 验证安装是否成功</h5> <p>通过浏览器访问 <a href="http://localhost:8080/#/login" target="_blank" rel="noopener noreferrer">http://localhost:8080/#/login<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/a0dc2d9263dbb84.png" alt="img"></p> <ul><li><strong>账号：</strong> sentinel</li> <li><strong>密码：</strong> sentinel</li></ul> <p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/f26a3b76786f256.png" alt="img"></p> <p>详细说明请参考 <a href="https://github.com/alibaba/Sentinel/wiki" target="_blank" rel="noopener noreferrer">官方 Sentinel Wiki<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="sentinel客户端接入"><a href="#sentinel客户端接入" class="header-anchor">#</a> Sentinel客户端接入</h3> <h4 id="pom-7"><a href="#pom-7" class="header-anchor">#</a> POM</h4> <p>如果要在您的项目中引入 Sentinel，需要增加 <code>org.springframework.cloud:spring-cloud-starter-alibaba-sentinel</code> Starter POM</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-alibaba-sentinel&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="修改配置文件"><a href="#修改配置文件" class="header-anchor">#</a> 修改配置文件</h4> <p>在 Nacos 控制台修改配置文件，增加对 Sentinel 的支持</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>spring:
  application:
    # 服务名
    name: service-consumer
  cloud:
    nacos:
      discovery:
        # 服务注册中心
        server-addr: 192.168.141.132:8848
      config:
        # 服务配置中心
        server-addr: 192.168.141.132:8848
    # 熔断限流
    sentinel:
      transport:
        dashboard: localhost:8888
# 开启 Feign 对 Sentinel 的支持
feign:
  sentinel:
    enabled: true
server:
  # 服务端口
  port: 8080
management:
  # 端点检查（健康检查）
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
user:
  name: &quot;灶门祢豆子&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="配置熔断类"><a href="#配置熔断类" class="header-anchor">#</a> 配置熔断类</h4> <p>编写一个 Feign 接口的实现类并增加 <code>@Component</code> 注解</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.service.fallback;
import com.funtl.spring.cloud.alibaba.consumer.service.EchoService;
import org.springframework.stereotype.Component;
@Component
public class EchoServiceFallback implements EchoService {
    @Override
    public String echo(String string) {
        return &quot;echo fallback&quot;;
    }
    @Override
    public String lb() {
        return &quot;lb fallback&quot;;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="修改-feign-接口"><a href="#修改-feign-接口" class="header-anchor">#</a> 修改 Feign 接口</h4> <p>在 <code>@FeignClient</code> 接口上增加 <code>fallback</code> 属性指定熔断类即可</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>package com.funtl.spring.cloud.alibaba.consumer.service;
import com.funtl.spring.cloud.alibaba.consumer.service.fallback.EchoServiceFallback;
import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
@FeignClient(value = &quot;service-provider&quot;, fallback = EchoServiceFallback.class)
public interface EchoService {
    @GetMapping(value = &quot;/echo/{string}&quot;)
    String echo(@PathVariable(&quot;string&quot;) String string);
    @GetMapping(value = &quot;/lb&quot;)
    String lb();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="测试熔断"><a href="#测试熔断" class="header-anchor">#</a> 测试熔断</h4> <p>启动 <code>service-consumer</code> 服务并停止 <code>service-provider</code> 服务，通过浏览器访问 <a href="http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2ZlaWduL2VjaG8vaGk=" target="_blank" rel="noopener noreferrer">http://localhost:8080/feign/echo/hi<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>echo fallback
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="http://www.qfdmy.com/wp-content/uploads/2019/08/c2232aa74a8e4c6.png" alt="img"></p> <blockquote><p><strong>注意：</strong> 必须至少请求过一次才能在 Sentinel 控制台看到对应的服务</p></blockquote></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div></div></div>
    <script src="/assets/js/app.20e080e3.js" defer></script><script src="/assets/js/3.69b4042a.js" defer></script><script src="/assets/js/1.c4c6ad86.js" defer></script><script src="/assets/js/27.c059cd71.js" defer></script>
  </body>
</html>
