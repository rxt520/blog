<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mysql | blog</title>
    <meta name="description" content="blog">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.29b4407c.css" as="style"><link rel="preload" href="/assets/js/app.20e080e3.js" as="script"><link rel="preload" href="/assets/js/3.69b4042a.js" as="script"><link rel="preload" href="/assets/js/1.c4c6ad86.js" as="script"><link rel="preload" href="/assets/js/43.14107803.js" as="script"><link rel="prefetch" href="/assets/js/10.fbf5bf0b.js"><link rel="prefetch" href="/assets/js/11.89c72eac.js"><link rel="prefetch" href="/assets/js/12.8f3fc90e.js"><link rel="prefetch" href="/assets/js/13.606381d5.js"><link rel="prefetch" href="/assets/js/14.7a61181a.js"><link rel="prefetch" href="/assets/js/15.2595a1ba.js"><link rel="prefetch" href="/assets/js/16.3a0abb52.js"><link rel="prefetch" href="/assets/js/17.6a344db1.js"><link rel="prefetch" href="/assets/js/18.4bf78878.js"><link rel="prefetch" href="/assets/js/19.8f00e0c6.js"><link rel="prefetch" href="/assets/js/20.260311cc.js"><link rel="prefetch" href="/assets/js/21.8578208c.js"><link rel="prefetch" href="/assets/js/22.20e75bd8.js"><link rel="prefetch" href="/assets/js/23.363521a2.js"><link rel="prefetch" href="/assets/js/24.15a014dc.js"><link rel="prefetch" href="/assets/js/25.f74701fe.js"><link rel="prefetch" href="/assets/js/26.9805c56f.js"><link rel="prefetch" href="/assets/js/27.c059cd71.js"><link rel="prefetch" href="/assets/js/28.04fb7d74.js"><link rel="prefetch" href="/assets/js/29.b1ef7687.js"><link rel="prefetch" href="/assets/js/30.5fb4a460.js"><link rel="prefetch" href="/assets/js/31.860de359.js"><link rel="prefetch" href="/assets/js/32.d40511a0.js"><link rel="prefetch" href="/assets/js/33.abe76948.js"><link rel="prefetch" href="/assets/js/34.c95627c4.js"><link rel="prefetch" href="/assets/js/35.884b7ac2.js"><link rel="prefetch" href="/assets/js/36.ce4ffc06.js"><link rel="prefetch" href="/assets/js/37.ed7666d7.js"><link rel="prefetch" href="/assets/js/38.6efa9d7f.js"><link rel="prefetch" href="/assets/js/39.ff98a367.js"><link rel="prefetch" href="/assets/js/4.295bb786.js"><link rel="prefetch" href="/assets/js/40.040344ed.js"><link rel="prefetch" href="/assets/js/41.79742567.js"><link rel="prefetch" href="/assets/js/42.bea47c85.js"><link rel="prefetch" href="/assets/js/44.f793a44c.js"><link rel="prefetch" href="/assets/js/45.293deda9.js"><link rel="prefetch" href="/assets/js/46.025ac826.js"><link rel="prefetch" href="/assets/js/47.9857334e.js"><link rel="prefetch" href="/assets/js/48.4d7aeb19.js"><link rel="prefetch" href="/assets/js/5.6ab23509.js"><link rel="prefetch" href="/assets/js/6.a01c80cf.js"><link rel="prefetch" href="/assets/js/7.6ced6a0e.js"><link rel="prefetch" href="/assets/js/8.3a631268.js"><link rel="prefetch" href="/assets/js/9.09f4064e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.29b4407c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>blog</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="blog" class="logo"> <span class="site-name">blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/java/" class="nav-link"><i class="iconfont undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 后端/" class="nav-link"><i class="iconfont undefined"></i>
  java 后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/typora/" class="nav-link"><i class="iconfont undefined"></i>
  typora
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 基础/" class="nav-link"><i class="iconfont undefined"></i>
  java 基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程方法/" class="nav-link"><i class="iconfont undefined"></i>
  编程方法
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mysql/" class="nav-link"><i class="iconfont undefined"></i>
  Mysql
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-npm"></i>
      在线工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://smallpdf.com/cn/pdf-to-word" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  PDF 转换器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  JSON 编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tableconvert.com/?output=text" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  MD 表格生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  CRON 表达式
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.oschina.net/codeformat/html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  代码格式化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.numberempire.com/latexequationeditor.php" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  公式编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  二维码生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线编码转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.toyaml.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  YAML &lt;-&gt; Properties
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jsfiddle.net/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线 Web 练习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/rxt520" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-jianshu"></i>
  简书
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-csdn"></i>
  CSDN
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-bokeyuan"></i>
  博客圆
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  WeChat
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    blog
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>23</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>16</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/categories/java/" class="nav-link"><i class="iconfont undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 后端/" class="nav-link"><i class="iconfont undefined"></i>
  java 后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/typora/" class="nav-link"><i class="iconfont undefined"></i>
  typora
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/java 基础/" class="nav-link"><i class="iconfont undefined"></i>
  java 基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程方法/" class="nav-link"><i class="iconfont undefined"></i>
  编程方法
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mysql/" class="nav-link"><i class="iconfont undefined"></i>
  Mysql
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-npm"></i>
      在线工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://smallpdf.com/cn/pdf-to-word" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  PDF 转换器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.bejson.com/jsoneditoronline" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  JSON 编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tableconvert.com/?output=text" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  MD 表格生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://cron.qqe2.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  CRON 表达式
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.oschina.net/codeformat/html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  代码格式化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://zh.numberempire.com/latexequationeditor.php" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  公式编辑器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  二维码生成器
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.chinaz.com/tools/native_ascii.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线编码转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.toyaml.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  YAML &lt;-&gt; Properties
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jsfiddle.net/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  在线 Web 练习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/rxt520" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-jianshu"></i>
  简书
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-csdn"></i>
  CSDN
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-bokeyuan"></i>
  博客圆
</a></li><li class="dropdown-item"><!----> <a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  WeChat
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#数据库和sql概述" class="sidebar-link">数据库和SQL概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#数据库的好处" class="sidebar-link">数据库的好处</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#数据库的概念" class="sidebar-link">数据库的概念</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#sql语言" class="sidebar-link">SQL语言</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql的安装与使用" class="sidebar-link">mysql的安装与使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql的安装" class="sidebar-link">mysql的安装</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#启动和停止mysql服务" class="sidebar-link">启动和停止MySQL服务</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql服务端的登录和退出" class="sidebar-link">MySQL服务端的登录和退出</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql数据库的使用" class="sidebar-link">MySql数据库的使用</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#基本命令" class="sidebar-link">基本命令</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#基本查询" class="sidebar-link">基本查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#select-语句" class="sidebar-link">SELECT 语句</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#查询时给列的别名" class="sidebar-link">查询时给列的别名</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#查询去重" class="sidebar-link">查询去重</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#号的作用" class="sidebar-link">+号的作用</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#concat函数" class="sidebar-link">concat函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#ifnull函数" class="sidebar-link">IFNULL函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#isnull函数" class="sidebar-link">ISNULL函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#nullif函数" class="sidebar-link">NULLIF函数</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#条件查询" class="sidebar-link">条件查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#排序查询" class="sidebar-link">排序查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#特点" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-2" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#单行函数" class="sidebar-link">单行函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#字符函数" class="sidebar-link">字符函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#数学函数" class="sidebar-link">数学函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#日期函数" class="sidebar-link">日期函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#其他函数" class="sidebar-link">其他函数</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#流程控制函数" class="sidebar-link">流程控制函数</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分组函数" class="sidebar-link">分组函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#sum-expression" class="sidebar-link">SUM(expression)</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#avg-expression" class="sidebar-link">AVG(expression)</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#max-expression" class="sidebar-link">MAX(expression)</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#min-expression" class="sidebar-link">MIN(expression)</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#count-expression" class="sidebar-link">COUNT(expression)</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#参数支持哪些类型" class="sidebar-link">参数支持哪些类型</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#特点-2" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-3" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分组查询" class="sidebar-link">分组查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#语法-2" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#特点-3" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-4" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#连接查询" class="sidebar-link">连接查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#含义" class="sidebar-link">含义</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#笛卡尔乘积现象" class="sidebar-link">笛卡尔乘积现象</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分类" class="sidebar-link">分类</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#等值连接" class="sidebar-link">等值连接</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#非等值连接" class="sidebar-link">非等值连接</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#自连接" class="sidebar-link">自连接</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#sql99语法-内连接" class="sidebar-link">SQL99语法-内连接</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#sql99语法-外连接" class="sidebar-link">SQL99语法-外连接</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#子查询" class="sidebar-link">子查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#含义-2" class="sidebar-link">含义</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分类-3" class="sidebar-link">分类</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#示例" class="sidebar-link">示例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分页查询" class="sidebar-link">分页查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#应用场景-2" class="sidebar-link">应用场景</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#语法-6" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分页公式" class="sidebar-link">分页公式</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-5" class="sidebar-link">案例</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#语法-7" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#意义" class="sidebar-link">意义</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#特点-7" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-6" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#dml数据处理之增删改" class="sidebar-link">DML数据处理之增删改</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#insert" class="sidebar-link">INSERT</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#update" class="sidebar-link">UPDATE</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#delete" class="sidebar-link">DELETE</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#truncate" class="sidebar-link">TRUNCATE</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#delete和truncate的区别" class="sidebar-link">DELETE和TRUNCATE的区别</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#ddl数据库定义语言" class="sidebar-link">DDL数据库定义语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#库的管理" class="sidebar-link">库的管理</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#表的管理" class="sidebar-link">表的管理</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql数据类型" class="sidebar-link">MYSQL数据类型</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#常见的约束" class="sidebar-link">常见的约束</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#自增长列" class="sidebar-link">自增长列</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql事物" class="sidebar-link">MySQL事物</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#转账案例" class="sidebar-link">转账案例</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#事务的特性-acid" class="sidebar-link">事务的特性(ACID)</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#事务的创建" class="sidebar-link">事务的创建</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#并发事务" class="sidebar-link">并发事务</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#事物隔离级别" class="sidebar-link">事物隔离级别</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-7" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#mysql视图" class="sidebar-link">MySQL视图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#应用场景-3" class="sidebar-link">应用场景</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#优点" class="sidebar-link">优点</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#创建视图" class="sidebar-link">创建视图</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#修改视图" class="sidebar-link">修改视图</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#删除视图" class="sidebar-link">删除视图</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#查看视图" class="sidebar-link">查看视图</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#视图的更新" class="sidebar-link">视图的更新</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#视图和表的对比" class="sidebar-link">视图和表的对比</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#变量" class="sidebar-link">变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#系统变量" class="sidebar-link">系统变量</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#自定义变量" class="sidebar-link">自定义变量</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#局部变量" class="sidebar-link">局部变量</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#案例-9" class="sidebar-link">案例</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#存储过程" class="sidebar-link">存储过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#创建语法" class="sidebar-link">创建语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#调用语法" class="sidebar-link">调用语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#创建带in模式参数的存储过程" class="sidebar-link">创建带in模式参数的存储过程</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#创建out模式参数的存储过程" class="sidebar-link">创建out模式参数的存储过程</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#创建带inout模式参数的存储过程" class="sidebar-link">创建带inout模式参数的存储过程</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#查看存储过程的信息" class="sidebar-link">查看存储过程的信息</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#存储函数" class="sidebar-link">存储函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#存储过程与存储函数的区别" class="sidebar-link">存储过程与存储函数的区别</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#创建语法-2" class="sidebar-link">创建语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#调用语法-2" class="sidebar-link">调用语法</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#无参有返回" class="sidebar-link">无参有返回</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#有参有返回" class="sidebar-link">有参有返回</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#查看函数" class="sidebar-link">查看函数</a></li></ul></li><li><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#流程控制结构" class="sidebar-link">流程控制结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#分支结构" class="sidebar-link">分支结构</a></li><li class="sidebar-sub-header"><a href="/views/%E6%8C%87%E5%8D%97/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql.html#循环结构" class="sidebar-link">循环结构</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>Mysql</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>blog</span>
            
          <span data-v-6cbeab0a>2019 - </span>
          2020
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>Mysql</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>blog</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2019-11-22</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      Mysql
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="mysql教程"><a href="#mysql教程" class="header-anchor">#</a> MySql教程</h1> <h2 id="数据库和sql概述"><a href="#数据库和sql概述" class="header-anchor">#</a> 数据库和SQL概述</h2> <h3 id="数据库的好处"><a href="#数据库的好处" class="header-anchor">#</a> 数据库的好处</h3> <ul><li>实现数据持久化</li> <li>使用完整的管理系统统一管理，易于查询</li></ul> <h3 id="数据库的概念"><a href="#数据库的概念" class="header-anchor">#</a> 数据库的概念</h3> <p>DB DBMS SQL 数据库（database）：存储数据的“仓库”。它保存了一系列有组织的数据。 数据库管理系统（Database Management System）。数据库是通过DBMS创 建和操作的容器 结构化查询语言（Structure Query Language）：专门用来与数据库通信的语 言</p> <p>常见的数据库管理系统：MySQL、Oracle、DB2、SqlServe</p> <h3 id="sql语言"><a href="#sql语言" class="header-anchor">#</a> SQL语言</h3> <p>数据库是不认识JAVA语言的，但是我们同样要与数据库交互，这时需要使用到数据库认识的语言SQL语句，它是数据库的代码。</p> <p>结构化查询语言(Structured Query Language)简称SQL，是一种数据库查询和<a href="http://baike.baidu.com/view/128511.htm" target="_blank" rel="noopener noreferrer">程序设计语言<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，用于存取数据以及查询、更新和管理<a href="http://baike.baidu.com/view/549699.htm" target="_blank" rel="noopener noreferrer">关系数据库系统<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>创建数据库、创建数据表、向数据表中添加一条条数据信息均需要使用SQL语句。</p> <h4 id="dml"><a href="#dml" class="header-anchor">#</a> DML</h4> <p>DML（Data Manipulation Language):数据操纵语句，用于添加、删除、修改、查询数据库记录，并检查数据完整性。包括如下SQL语句等：</p> <ul><li>INSERT：添加数据到数据库中</li> <li>UPDATE：修改数据库中的数据</li> <li>DELETE：删除数据库中的数据</li> <li>SELECT：选择（查询）数据
<ul><li>SELECT是SQL语言的基础，最为重要。</li></ul></li></ul> <h4 id="ddl"><a href="#ddl" class="header-anchor">#</a> DDL</h4> <p>DDL（Data Definition Language):数据定义语句，用于库和表的创建、修改、删除。包括如下SQL语句等：</p> <ul><li>CREATE TABLE：创建数据库表</li> <li>ALTER TABLE：更改表结构、添加、删除、修改列长度</li> <li>DROP TABLE：删除表</li> <li>CREATE INDEX：在表上建立索引</li> <li>DROP INDEX：删除索引</li></ul> <h4 id="dcl"><a href="#dcl" class="header-anchor">#</a> DCL</h4> <p>DCL（Data Control Language):数据控制语句，用于定义用户的访问权限和安全级别包括如下SQL语句等：</p> <ul><li>GRANT：授予访问权限</li> <li>REVOKE：撤销访问权限</li> <li>COMMIT：提交事务处理</li> <li>ROLLBACK：事务处理回退</li> <li>SAVEPOINT：设置保存点</li> <li>LOCK：对数据库的特定部分进行锁定</li></ul> <h4 id="dql"><a href="#dql" class="header-anchor">#</a> DQL</h4> <p>数据查询语言：简称DQL(Data Query Language)，用来查询数据库中表的记录。关键字：select，from，where等</p> <h2 id="mysql的安装与使用"><a href="#mysql的安装与使用" class="header-anchor">#</a> <a href="#/backend/mysql/install?id=mysql%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8">mysql的安装与使用</a></h2> <h3 id="mysql的安装"><a href="#mysql的安装" class="header-anchor">#</a> <a href="#/backend/mysql/install?id=mysql%E7%9A%84%E5%AE%89%E8%A3%85">mysql的安装</a></h3> <ul><li>Windows</li> <li><a href="https://note.zzrfdsn.cn/note/root/cloudlandboy/linux/1566488563139.html" target="_blank" rel="noopener noreferrer">Linux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="启动和停止mysql服务"><a href="#启动和停止mysql服务" class="header-anchor">#</a> <a href="#/backend/mysql/install?id=%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2mysql%E6%9C%8D%E5%8A%A1">启动和停止MySQL服务</a></h3> <ul><li><p>Windows</p> <p>方式一：通过计算机管理方式 右击计算机—管理—服务—启动或停止MySQL服务 方式二：通过命令行方式 启动：net start mysql服务名 停止：net stop mysql服务名</p></li> <li><p>Linux</p> <p>启动：service mysql(mysqld) start</p> <p>停止：service mysql(mysqld) stop</p> <p>状态：service mysql(mysqld) status</p></li></ul> <h3 id="mysql服务端的登录和退出"><a href="#mysql服务端的登录和退出" class="header-anchor">#</a> <a href="#/backend/mysql/install?id=mysql%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA">MySQL服务端的登录和退出</a></h3> <ul><li><p>登录</p> <p>mysql –u用户名 –p密码</p></li> <li><p>远程登录</p> <p>mysql -h 主机名 -P 端口号 -u root -proot</p></li> <li><p>退出</p> <p>exit(quit)</p></li></ul> <h3 id="mysql数据库的使用"><a href="#mysql数据库的使用" class="header-anchor">#</a> <a href="#/backend/mysql/install?id=mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8">MySql数据库的使用</a></h3> <ul><li>不区分大小写(Linux上区分，可以通过配置文件修改)</li> <li>每句话用;或\g结尾</li> <li>各子句一般分行写</li> <li>关键字不能缩写也不能分行</li> <li>用缩进提高语句的可读性</li></ul> <h3 id="基本命令"><a href="#基本命令" class="header-anchor">#</a> <a href="#/backend/mysql/install?id=%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4">基本命令</a></h3> <p>查看 mysql 中有哪些个数据库:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>show databases;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用一个数据库:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>use 数据库名称;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看当前使用数据库中的表：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>show tables;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看指定数据库中的表：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>show tables from 库名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>新建一个数据库:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#创建数据库 数据库中数据的编码采用的是安装数据库时指定的默认编码 utf8
CREATE DATABASE 数据库名;

#创建数据库 并指定数据库中数据的编码
CREATE DATABASE 数据库名 CHARACTER SET utf8;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>查看当前选择的数据库:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select database();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建表:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>create table stuinfo(
    id int,
    name varchar(20));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查看表结构:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>desc 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看表中的所有记录:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select * from 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>向表中插入记录：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>insert into 表名(列名1,列名,...,列名n) values(列1值,列2值,...,列n值);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：插入 varchar 或 date 型的数据要用 单引号 引起来</p> <h2 id="基本查询"><a href="#基本查询" class="header-anchor">#</a> 基本查询</h2> <blockquote><p><a href="https://www.lanzous.com/i763iqf" target="_blank" rel="noopener noreferrer">SQL文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="select-语句"><a href="#select-语句" class="header-anchor">#</a> SELECT 语句</h3> <blockquote><p><strong>SELECT</strong> *****|{[DISTINCT] <strong>column</strong>|expression [alias],...}<strong>FROM</strong> <strong>table</strong></p></blockquote> <ul><li><strong>SELECT</strong> 标识选择哪些列。</li> <li><strong>FROM</strong> 标识从哪个表中选</li></ul> <p>语法：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select 查询列表 from 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>特点：</p> <ol><li>查询列表可以是：表中的字段、常量值、表达式、函数</li> <li>查询的结果是一个虚拟的表格</li></ol> <p>查询全部列:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *FROM 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询特定的列:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT id, name FROM student;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询表达式:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code> SELECT 100%98;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询函数:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select now();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="查询时给列的别名"><a href="#查询时给列的别名" class="header-anchor">#</a> 查询时给列的别名</h3> <p>别名使用双引号，以便在别名中包含空格或特殊的字符</p> <p>①便于理解 ②如果要查询的字段有重名的情况，使用别名可以区分开来</p> <ol><li><p>使用<strong>as</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 列名1 AS &quot;列1别名&quot;,列名2 AS &quot;列2别名&quot; FROM 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 100%98 AS &quot;结果&quot;;
SELECT last_name AS &quot;姓&quot;,first_name AS &quot;名&quot; FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>使用<strong>空格</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 列名1 &quot;列1别名&quot;,列名2 &quot;列2别名&quot; FROM 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例:</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 查询salary，显示结果为 out put
SELECT salary AS &quot;out put&quot; FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="查询去重"><a href="#查询去重" class="header-anchor">#</a> 查询去重</h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select distinct 字段名 from 表名;
# 案例：查询员工表中涉及到的所有的部门编号
SELECT DISTINCT department_id FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="号的作用"><a href="#号的作用" class="header-anchor">#</a> +号的作用</h3> <p><code>java</code>中的+号： ①运算符，两个操作数都为数值型 ②连接符，只要有一个操作数为字符串</p> <p><code>mysql</code>中的+号： 仅仅只有一个功能：运算符</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 直接运算
select 数值+数值;

# 先试图将字符转换成数值，如果转换成功，则继续运算；否则转换成0，再做运算
select 字符+数值;

# 结果都为null
select null+值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="concat函数"><a href="#concat函数" class="header-anchor">#</a> concat函数</h3> <p>功能：拼接字符，相当于java中的 <code>&quot;1&quot;+&quot;23&quot;=&quot;123&quot;</code></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select concat(字符1，字符2，字符3,...);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="ifnull函数"><a href="#ifnull函数" class="header-anchor">#</a> IFNULL函数</h3> <p>功能：判断某字段或表达式是否为null，如果为null 返回指定的值，否则返回原本的值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 如果commission_pct列为空则返回0
select ifnull(1,0) 返回1
select ifnull(null,0) 返回0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="isnull函数"><a href="#isnull函数" class="header-anchor">#</a> ISNULL函数</h3> <p>功能：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select isnull(1) 返回0
select isnull(1/0) 返回1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="nullif函数"><a href="#nullif函数" class="header-anchor">#</a> NULLIF函数</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>NULLIF(expr1,expr2)  的用法： 
如果expr1 == expr2 则 NULL
否则 为 expr1
SELECT NULLIF(1,1) 返回NULL
SELECT NULLIF（2,1） 返回 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h2> <p>过滤：使用WHERE 子句，将不满足条件的行过滤掉。</p> <p>语法：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select 查询列表 from 表名 where 筛选条件;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>比较运算符</th> <th>&gt;、&lt; 、&gt;=、&lt;=、= 、&lt;&gt;</th> <th>大于、小于、大于等于、小于等于、等于、不等于</th></tr></thead> <tbody><tr><td></td> <td>BETWEEN ...AND...</td> <td>显示在某一区间的值(含头含尾)</td></tr> <tr><td></td> <td>IN(set)</td> <td>显示在in列表中的值，例：in(100,200)</td></tr> <tr><td></td> <td>LIKE 通配符</td> <td>模糊查询，Like语句中有两个通配符：% 用来匹配多个字符；例first_name like ‘a%’；_ 用来匹配一个字符。例first_name like ‘a_’;</td></tr> <tr><td></td> <td>IS NULL</td> <td>判断是否为空is null; 判断为空；is not null; 判断不为空</td></tr> <tr><td>逻辑运算符</td> <td>and (&amp;&amp;)</td> <td>多个条件同时成立</td></tr> <tr><td></td> <td>or (||)</td> <td>多个条件任一成立</td></tr> <tr><td></td> <td>not (!)</td> <td>不成立，例：where not(salary&gt;100);</td></tr></tbody></table> <h3 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h3> <h4 id="按条件表达式筛选"><a href="#按条件表达式筛选" class="header-anchor">#</a> 按条件表达式筛选</h4> <ol><li><p>查询工资&gt;12000的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 
    *
FROM
    employees
WHERE
    salary&gt;12000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查询部门编号不等于90号的员工名和部门编号</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 
    last_name,
    department_id
FROM
    employees
WHERE
    department_id&lt;&gt;90;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h4 id="按逻辑表达式筛选"><a href="#按逻辑表达式筛选" class="header-anchor">#</a> 按逻辑表达式筛选</h4> <ol><li><p>查询工资在10000到20000之间的员工名、工资以及奖金</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    salary,
    commission_pct
FROM
    employees
WHERE
    salary&gt;=10000 AND salary&lt;=20000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>或者</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    salary,
    commission_pct 
FROM
    employees 
WHERE
    salary BETWEEN 10000 
    AND 20000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>查询部门编号不是在90到110之间，或者工资高于15000的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    * 
FROM
    employees 
WHERE
    NOT ( department_id &gt;= 90 AND department_id &lt;= 110 ) 
    OR salary &gt; 15000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>或者</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    * 
FROM
    employees 
WHERE
    NOT ( department_id BETWEEN 90 AND 110 ) 
    OR salary &gt; 15000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h4 id="模糊查询"><a href="#模糊查询" class="header-anchor">#</a> 模糊查询</h4> <ol><li><p>查询员工名中包含字符a的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select 
    *
from
    employees
where
    last_name like '%a%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查询员工名中第三个字符为e，第五个字符为a的员工名和工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select
    last_name,
    salary
FROM
    employees
WHERE
    last_name LIKE '__e_a%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>查询员工名中第二个字符为_的员工名</p> <p>ESCAPE：定义转义标识</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name
FROM
    employees
WHERE
    last_name LIKE '_$_%' ESCAPE '$';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h4 id="in"><a href="#in" class="header-anchor">#</a> IN</h4> <p>含义：判断某字段的值是否属于in列表中的某一项 特点：</p> <ol><li>使用in提高语句简洁度</li> <li>列表的值类型必须一致或兼容</li> <li>列表中不支持通配符</li></ol> <p>查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    job_id
FROM
    employees
WHERE
    job_id IN( 'IT_PROT' ,'AD_VP','AD_PRES');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>或者</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    job_id
FROM
    employees
WHERE
    job_id = 'IT_PROT' OR job_id = 'AD_VP' OR JOB_ID ='AD_PRES';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="is-null"><a href="#is-null" class="header-anchor">#</a> IS NULL</h4> <p><strong>=或&lt;&gt;不能用于判断null值</strong> is null或is not null 可以判断null值</p> <ol><li><p>查询没有奖金的员工名和奖金率</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    commission_pct
FROM
    employees
WHERE
    commission_pct IS NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>查询有奖金的员工名和奖金率</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    commission_pct
FROM
    employees
WHERE
    commission_pct IS NOT NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h4 id="安全等于"><a href="#安全等于" class="header-anchor">#</a> 安全等于 &lt;=&gt;</h4> <ol><li><p>查询没有奖金的员工名和奖金率</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    commission_pct
FROM
    employees
WHERE
    commission_pct &lt;=&gt;NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>查询工资为12000的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    salary
FROM
    employees

WHERE 
    salary &lt;=&gt; 12000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <p>IS NULL:仅仅可以判断NULL值，可读性较高，建议使用 &lt;=&gt; :既可以判断NULL值，又可以判断普通的数值，可读性较低</p> <p>错误的写法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    commission_pct
FROM
    employees

WHERE 
    salary IS 12000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h2> <p>ORDER BY</p> <ul><li>使用 ORDER BY 子句排序
<ul><li>ASC（ascend）: 升序</li> <li>DESC（descend）: 降序</li></ul></li></ul> <h3 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select 查询列表

from 表名

【where  筛选条件】

order by 排序的字段或表达式;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="特点"><a href="#特点" class="header-anchor">#</a> <a href="#/backend/mysql/sortquery?id=%E7%89%B9%E7%82%B9">特点</a></h3> <ol><li>asc代表的是升序，可以省略</li> <li>order by子句可以支持 单个字段、别名、表达式、函数、多个字段</li> <li>order by子句在查询语句的最后面，除了limit子句</li></ol> <h3 id="案例-2"><a href="#案例-2" class="header-anchor">#</a> 案例</h3> <h4 id="单个字段排序"><a href="#单个字段排序" class="header-anchor">#</a> 单个字段排序</h4> <ol><li><p>查询员工表按薪水降序</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT * FROM employees ORDER BY salary DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查询部门编号&gt;=90的员工信息，并按员工编号降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *
FROM employees
WHERE department_id&gt;=90
ORDER BY employee_id DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h4 id="按表达式排序"><a href="#按表达式排序" class="header-anchor">#</a> 按表达式排序</h4> <ol><li><p>查询员工信息 按年薪降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *,salary*12*(1+IFNULL(commission_pct,0))
FROM employees
ORDER BY salary*12*(1+IFNULL(commission_pct,0)) DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h4 id="按别名排序"><a href="#按别名排序" class="header-anchor">#</a> 按别名排序</h4> <ol><li><p>查询员工信息 按年薪升序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *,salary*12*(1+IFNULL(commission_pct,0)) 年薪
FROM employees
ORDER BY 年薪 ASC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h4 id="按函数排序"><a href="#按函数排序" class="header-anchor">#</a> 按函数排序</h4> <ol><li><p>查询员工名，并且按名字的长度降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT LENGTH(last_name),last_name 
FROM employees
ORDER BY LENGTH(last_name) DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h4 id="多个字段排序"><a href="#多个字段排序" class="header-anchor">#</a> 多个字段排序</h4> <ol><li><p>查询员工信息，要求先按工资降序，再按employee_id升序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *
FROM employees
ORDER BY salary DESC,employee_id ASC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h2 id="单行函数"><a href="#单行函数" class="header-anchor">#</a> 单行函数</h2> <h3 id="字符函数"><a href="#字符函数" class="header-anchor">#</a> 字符函数</h3> <h4 id="length-s"><a href="#length-s" class="header-anchor">#</a> length(s)</h4> <p>获取参数值的字符个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT LENGTH('john');
SELECT LENGTH('张三丰hahaha');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="concat-s1-s2-sn"><a href="#concat-s1-s2-sn" class="header-anchor">#</a> CONCAT(s1,s2...sn)</h4> <p>拼接字符串</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT CONCAT(last_name,'_',first_name) 姓名 FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="upper-s"><a href="#upper-s" class="header-anchor">#</a> UPPER(s)</h4> <p>将字符串转换为大写</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT UPPER('john');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="lower-s"><a href="#lower-s" class="header-anchor">#</a> LOWER(s)</h4> <p>将字符串转换为小写</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT LOWER('joHn');
# 示例：将姓变大写，名变小写，然后拼接
SELECT CONCAT(UPPER(last_name),LOWER(first_name))  姓名 FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="substr-s-start-length-、substring"><a href="#substr-s-start-length-、substring" class="header-anchor">#</a> SUBSTR(s, start, length)、SUBSTRING()</h4> <p>SUBSTR(s, start, length)：从字符串 s 的 start 位置截取长度为 length 的子字符串</p> <p>截取字符串（注意：索引从1开始）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT SUBSTR('李莫愁爱上了陆展元',7)  out_put;
SELECT SUBSTRING('李莫愁爱上了陆展元',7)  out_put;
SELECT SUBSTR('李莫愁爱上了陆展元',1,3)  out_put;
# 案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来

SELECT CONCAT(UPPER(SUBSTR(last_name,1,1)),'_',LOWER(SUBSTR(last_name,2)))  out_put
FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="instr-s-s"><a href="#instr-s-s" class="header-anchor">#</a> INSTR(s,s)</h4> <p>返回子串第一次出现的索引，如果找不到返回0</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT INSTR('杨不殷六侠悔爱上了殷六侠','殷八侠') AS out_put;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="trim-s"><a href="#trim-s" class="header-anchor">#</a> TRIM(s)</h4> <p>LTRIM(s)：去掉字符串 s <strong>开始</strong>处的空格</p> <p>RTRIM(s)：去掉字符串 s <strong>结尾</strong>处的空格</p> <p>去掉字符串开始和结尾处的空格</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT LENGTH(TRIM('    张翠山    ')) AS out_put;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="lpad-s1-len-s2"><a href="#lpad-s1-len-s2" class="header-anchor">#</a> LPAD(s1,len,s2)</h4> <p>在字符串 s1 的<code>开始</code>处填充字符串 s2，使字符串长度达到 len</p> <p>如果长度小于原字符串，则只取前len个字符</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT LPAD('殷素素',5,'*') AS out_put;    --&gt; **殷素素
SELECT LPAD('殷素素',2,'*') AS out_put;    --&gt; 殷素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="rpad-s1-len-s2"><a href="#rpad-s1-len-s2" class="header-anchor">#</a> RPAD(s1,len,s2)</h4> <p>在字符串 s1 的<code>结尾</code>处添加字符串 s2，使字符串的长度达到 len</p> <p>如果长度小于原字符串，则只取前len个字符</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT RPAD('殷素素',5,'*') AS out_put;    --&gt; 殷素素**
SELECT RPAD('殷素素',2,'*') AS out_put;    --&gt; 殷素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="replace-s-s1-s2"><a href="#replace-s-s1-s2" class="header-anchor">#</a> REPLACE(s,s1,s2)</h4> <p>用字符串 s2 替代字符串 s 中的字符串 s1</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT REPLACE('张无忌爱上了周芷若','周芷若','赵敏') AS out_put;    --&gt;张无忌爱上了赵敏
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="数学函数"><a href="#数学函数" class="header-anchor">#</a> 数学函数</h3> <h4 id="round-x"><a href="#round-x" class="header-anchor">#</a> ROUND(x)</h4> <p>ROUND(x,d)：保留d位小数</p> <p>四舍五入</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT ROUND(-1.55);    --&gt; -2
SELECT ROUND(1.567,2);    --&gt; 1.57
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="ceil-x"><a href="#ceil-x" class="header-anchor">#</a> CEIL(x)</h4> <p>向上取整</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT CEIL(-1.02);    --&gt; -1
SELECT CEIL(1.02);    --&gt; 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="floor-x"><a href="#floor-x" class="header-anchor">#</a> FLOOR(x)</h4> <p>向下取整</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT FLOOR(-1.58);    --&gt; -2
SELECT FLOOR(1.58);    --&gt; 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="truncate-x-y"><a href="#truncate-x-y" class="header-anchor">#</a> TRUNCATE(x,y)</h4> <p>返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别是<code>不会</code>进行四舍五入）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT TRUNCATE(1.567,2);    --&gt; 1.56
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="mod-x-y"><a href="#mod-x-y" class="header-anchor">#</a> MOD(x,y)</h4> <p>返回 x 除以 y 以后的余数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MOD(10,-3);    --&gt; 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>等价于</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 10%-3;    --&gt; 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>余数的符号取决于被除数的符号</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MOD(-10,3);    --&gt; -1
SELECT MOD(-10,-3);    --&gt; -1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h3> <h4 id="now"><a href="#now" class="header-anchor">#</a> NOW()</h4> <p>返回当前系统时间(注：日期+时间)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT NOW();    --&gt; 2019-10-05 09:56:57
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="curdate"><a href="#curdate" class="header-anchor">#</a> CURDATE()</h4> <p>返回当前系统日期，不包含时间</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT CURDATE();    --&gt; 2019-10-05
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="curtime"><a href="#curtime" class="header-anchor">#</a> CURTIME()</h4> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT CURTIME();    --&gt;09:56:57
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="year-d"><a href="#year-d" class="header-anchor">#</a> YEAR(d)</h4> <p>返回年份</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT YEAR(NOW());    --&gt;2019
SELECT YEAR('1998-1-1');    --&gt;1998
SELECT  YEAR(hiredate) 入职时间 FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="month-d"><a href="#month-d" class="header-anchor">#</a> MONTH(d)</h4> <p>返回日期d中的月份值，1 到 12</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MONTH(NOW());    --&gt; 10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="monthname-d"><a href="#monthname-d" class="header-anchor">#</a> MONTHNAME(d)</h4> <p>返回日期当中的月份名称，如 November</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MONTHNAME(NOW());    --&gt; October
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="str-to-date-s-f"><a href="#str-to-date-s-f" class="header-anchor">#</a> STR_TO_DATE(s, f)</h4> <p>将字符通过指定的格式转换成日期</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT STR_TO_DATE('1998-3-2','%Y-%c-%d') AS out_put;    --&gt; 1998-03-02
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询入职日期为1992-4-3的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM employees WHERE hiredate = '1992-4-3';

# 或者

SELECT * FROM employees WHERE hiredate = STR_TO_DATE('4-3 1992','%c-%d %Y');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="date-format-d-f"><a href="#date-format-d-f" class="header-anchor">#</a> DATE_FORMAT(d,f)</h4> <p>将日期通过指定的格式转换成字符</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT DATE_FORMAT(NOW(),'%Y年%m月%d日') AS out_put;    --&gt; 2019年10月05日
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询有奖金的员工名和入职日期(xx月/xx日 xx年)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,DATE_FORMAT(hiredate,'%m月/%d日 %y年') 入职日期
FROM employees
WHERE commission_pct IS NOT NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="其他函数"><a href="#其他函数" class="header-anchor">#</a> 其他函数</h3> <h4 id="version"><a href="#version" class="header-anchor">#</a> VERSION()</h4> <p>返回数据库的版本号</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT VERSION();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="database"><a href="#database" class="header-anchor">#</a> DATABASE()</h4> <p>返回当前数据库名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT DATABASE();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="user"><a href="#user" class="header-anchor">#</a> USER()</h4> <p>返回当前用户</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT USER();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="流程控制函数"><a href="#流程控制函数" class="header-anchor">#</a> 流程控制函数</h3> <h4 id="if-expr-v1-v2"><a href="#if-expr-v1-v2" class="header-anchor">#</a> IF(expr,v1,v2)</h4> <p>如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT IF(1 &gt; 0,'正确','错误');    --&gt; 正确
SELECT
    last_name,
    commission_pct,
IF
    ( commission_pct IS NULL, '没奖金，呵呵', '有奖金，嘻嘻' ) 备注 
FROM
    employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="case"><a href="#case" class="header-anchor">#</a> CASE</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>CASE expression
    WHEN condition1 THEN result1
    WHEN condition2 THEN result2
   ...
    WHEN conditionN THEN resultN
    ELSE result
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>CASE 表示函数开始，END 表示函数结束。如果 condition1 成立，则返回 result1, 如果 condition2 成立，则返回 result2，当全部不成立则返回 result，而当有一个成立之后，后面的就不执行了。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>case 要判断的字段或表达式
when 常量1 then 要显示的值1或语句1;
when 常量2 then 要显示的值2或语句2;
...
else 要显示的值n或语句n;
end
SELECT CASE 
　　WHEN 1 &gt; 0
　　THEN '1 &gt; 0'
　　WHEN 2 &gt; 0
　　THEN '2 &gt; 0'
　　ELSE '3 &gt; 0'
　　END
　　
--&gt; 1 &gt; 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>查询员工的工资，要求</p> <ol><li>部门号=30，显示的工资为1.1倍</li> <li>部门号=40，显示的工资为1.2倍</li> <li>部门号=50，显示的工资为1.3倍</li> <li>其他部门，显示的工资为原工资</li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT salary 原始工资,department_id,
CASE department_id
WHEN 30 THEN salary*1.1
WHEN 40 THEN salary*1.2
WHEN 50 THEN salary*1.3
ELSE salary
END AS 新工资
FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>查询员工的工资的情况</p> <ol><li>如果工资&gt;20000,显示A级别</li> <li>如果工资&gt;15000,显示B级别</li> <li>如果工资&gt;10000，显示C级别</li> <li>否则，显示D级别</li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT salary,
CASE 
WHEN salary&gt;20000 THEN 'A'
WHEN salary&gt;15000 THEN 'B'
WHEN salary&gt;10000 THEN 'C'
ELSE 'D'
END AS 工资级别
FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="分组函数"><a href="#分组函数" class="header-anchor">#</a> 分组函数</h2> <p>用作统计使用，又称为聚合函数或统计函数或组函数</p> <h3 id="sum-expression"><a href="#sum-expression" class="header-anchor">#</a> SUM(expression)</h3> <p>求和</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT SUM(salary) FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="avg-expression"><a href="#avg-expression" class="header-anchor">#</a> AVG(expression)</h3> <p>平均值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT AVG(salary) FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="max-expression"><a href="#max-expression" class="header-anchor">#</a> MAX(expression)</h3> <p>最大值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MAX(salary) FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="min-expression"><a href="#min-expression" class="header-anchor">#</a> MIN(expression)</h3> <p>最小值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MIN(salary) FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="count-expression"><a href="#count-expression" class="header-anchor">#</a> COUNT(expression)</h3> <p>计算个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT COUNT(salary) FROM employees;
SELECT COUNT(*) FROM employees;
SELECT COUNT(1) FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>效率： <code>MYISAM</code>存储引擎下 ，COUNT(<em>)的效率高 <code>INNODB</code>存储引擎下，COUNT(</em>)和COUNT(1)的效率差不多，比COUNT(字段)要高一些</p> <hr> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    SUM( salary ) 和,
    AVG( salary ) 平均,
    MAX( salary ) 最高,
    MIN( salary ) 最低,
    COUNT( salary ) 个数 
FROM
    employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>平均工资保留两位小数(四舍五入)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    SUM( salary ) 和,
    ROUND( AVG( salary ), 2 ) 平均,
    MAX( salary ) 最高,
    MIN( salary ) 最低,
    COUNT( salary ) 个数 
FROM
    employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="参数支持哪些类型"><a href="#参数支持哪些类型" class="header-anchor">#</a> 参数支持哪些类型</h3> <h4 id="字符"><a href="#字符" class="header-anchor">#</a> 字符</h4> <p>先试图将字符转换成数值，如果转换成功，则继续运算；否则转换成0，再做运算</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    SUM( last_name ),
    AVG( last_name ) 
FROM
    employees;

--&gt; 0,0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>与排序差不多</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    MAX( last_name ),
    MIN( last_name ) 
FROM
    employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="日期"><a href="#日期" class="header-anchor">#</a> 日期</h4> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT SUM(hiredate) ,AVG(hiredate) FROM employees;
SELECT MAX(hiredate),MIN(hiredate) FROM employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="特点-2"><a href="#特点-2" class="header-anchor">#</a> 特点</h3> <ol><li>sum、avg一般用于处理数值型</li> <li>max、min、count可以处理任何类型</li> <li>以上分组函数都忽略null值</li> <li>可以和distinct搭配实现去重的运算</li> <li>一般使用count(*)用作统计行数</li> <li>和分组函数一同查询的字段要求是group by后的字段</li></ol> <h3 id="案例-3"><a href="#案例-3" class="header-anchor">#</a> 案例</h3> <ol><li><p>查询员工表中的最大入职时间和最小入职时间的相差天数 （DIFFRENCE）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    MAX( hiredate ) 最大,
    MIN( hiredate ) 最小,
    (MAX( hiredate )- MIN( hiredate ))/ 1000 / 3600 / 24 DIFFRENCE 
FROM
    employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用DATEDIFF(d1,d2)函数，计算日期 d1～d2 之间相隔的天数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT DATEDIFF(MAX(hiredate),MIN(hiredate)) DIFFRENCE;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查询部门编号为90的员工个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    COUNT(*) 
FROM
    employees 
WHERE
    department_id = 90;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h2 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h2> <h3 id="语法-2"><a href="#语法-2" class="header-anchor">#</a> 语法</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>select 分组函数，分组后的字段
from 表
【where 筛选条件】
 group by 分组的字段
【having 分组后的筛选】
【order by 排序列表】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="特点-3"><a href="#特点-3" class="header-anchor">#</a> 特点</h3> <ol><li>和分组函数一同查询的字段<code>必须</code>是group by后出现的字段</li> <li>筛选分为两类：分组前筛选和分组后筛选</li></ol> <table><thead><tr><th>筛选</th> <th>针对的表</th> <th>连接的关键字</th></tr></thead> <tbody><tr><td>分组前筛选</td> <td>原始表</td> <td>where</td></tr> <tr><td>分组后筛选</td> <td>group by后的结果集</td> <td>having</td></tr></tbody></table> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <ol><li><p>分组函数做筛选能不能放在where后面</p> <p>不能，原表中没有分组后的数据</p></li></ol> <h3 id="案例-4"><a href="#案例-4" class="header-anchor">#</a> 案例</h3> <h4 id="简单的分组"><a href="#简单的分组" class="header-anchor">#</a> 简单的分组</h4> <ol><li><p>查询每个工种的员工平均工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT AVG(salary),job_id
FROM employees
GROUP BY job_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>查询每个位置的部门个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT COUNT(*),location_id
FROM departments
GROUP BY location_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h4 id="分组前筛选"><a href="#分组前筛选" class="header-anchor">#</a> 分组前筛选</h4> <ol><li><p>查询邮箱中包含a字符的 每个部门的最高工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MAX(salary),department_id
FROM employees
WHERE email LIKE '%a%'
GROUP BY department_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>查询有奖金的每个领导手下员工的平均工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    AVG( salary ),
    manager_id 
FROM
    employees 
WHERE
    commission_pct IS NOT NULL 
GROUP BY
    manager_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h4 id="分组后筛选"><a href="#分组后筛选" class="header-anchor">#</a> 分组后筛选</h4> <ol><li><p>查询哪个部门的员工个数&gt;5</p> <p>① 首先查询每个部门的员工个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT COUNT(*),department_id
FROM employees
GROUP BY department_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>② 筛选刚才①结果</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT COUNT(*),department_id
FROM employees

GROUP BY department_id

HAVING COUNT(*)&gt;5;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    MAX( salary ) 最高工资,
    job_id 工种编号 
FROM
    employees 
WHERE
    commission_pct IS NOT NULL 
GROUP BY
    job_id 
HAVING
    MAX( salary )&gt; 12000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    manager_id 领导编号,
    MIN( salary ) 最低工资 
FROM
    employees 
WHERE
    manager_id &gt; 102 
GROUP BY
    manager_id 
HAVING
    MIN( salary )&gt; 5000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol> <h4 id="添加排序"><a href="#添加排序" class="header-anchor">#</a> 添加排序</h4> <ol><li><p>每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资,按最高工资升序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    job_id 工种编号,
    MAX( salary ) 最高工资 
FROM
    employees 
WHERE
    commission_pct IS NOT NULL 
GROUP BY
    job_id 
HAVING
    MAX( salary )&gt; 6000 
ORDER BY
    MAX( salary );
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ol> <h4 id="按多个字段分组"><a href="#按多个字段分组" class="header-anchor">#</a> 按多个字段分组</h4> <ol><li><p>查询每个工种每个部门的最低工资,并按最低工资降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    MIN( salary ) 最低工资,
    department_id 部门,
    job_id 工种 
FROM
    employees 
GROUP BY
    department_id,
    job_id 
ORDER BY
    MIN( salary ) DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol> <h2 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h2> <h3 id="含义"><a href="#含义" class="header-anchor">#</a> 含义</h3> <p>又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select 字段1，字段2

from 表1，表2,...;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="笛卡尔乘积现象"><a href="#笛卡尔乘积现象" class="header-anchor">#</a> 笛卡尔乘积现象</h3> <p>当查询多个表时，没有添加有效的连接条件，导致多个表所有行实现完全连接</p> <p>表1 有m行，表2有n行，结果=m*n行</p> <p>发生原因：没有有效的连接条件 如何避免：添加有效的连接条件</p> <h3 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h3> <p>按年代分类： sql92标准:仅仅支持内连接 sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>按功能分类：
    内连接：
        等值连接
        非等值连接
        自连接
    外连接：
        左外连接
        右外连接
        全外连接（mysql不支持）

    交叉连接
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="等值连接"><a href="#等值连接" class="header-anchor">#</a> 等值连接</h3> <ol><li>多表等值连接的结果为多表的交集部分</li> <li>n表连接，至少需要n-1个连接条件</li> <li>表的顺序没有要求</li> <li>一般需要为表起别名</li> <li>可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</li></ol> <h4 id="案例1"><a href="#案例1" class="header-anchor">#</a> 案例1</h4> <ol><li><p>查询女神名和对应的男神名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT NAME,boyName 
FROM
    boys,
    beauty 
WHERE
    beauty.boyfriend_id = boys.id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查询员工名和对应的部门名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    department_name 
FROM
    employees,
    departments 
WHERE
    employees.`department_id` = departments.`department_id`;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h4 id="为表起别名"><a href="#为表起别名" class="header-anchor">#</a> 为表起别名</h4> <ol><li>提高语句的简洁度</li> <li>区分多个重名的字段</li></ol> <p><code>注意</code>：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</p> <ol><li><p>查询员工名、工种号、工种名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name,
    e.job_id,
    j.job_title 
FROM
    employees e,
    jobs j 
WHERE
    e.`job_id` = j.`job_id`;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h4 id="加筛选条件"><a href="#加筛选条件" class="header-anchor">#</a> 加筛选条件</h4> <ol><li><p>查询有奖金的员工名、部门名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    department_name,
    commission_pct 
FROM
    employees e,
    departments d 
WHERE
    e.`department_id` = d.`department_id` 
    AND e.`commission_pct` IS NOT NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>查询城市名中第二个字符为o的部门名和城市名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    department_name,
    city 
FROM
    departments d,
    locations l 
WHERE
    d.`location_id` = l.`location_id` 
    AND city LIKE '_o%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h4 id="加分组"><a href="#加分组" class="header-anchor">#</a> 加分组</h4> <ol><li><p>查询每个城市的部门个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    COUNT(*) 个数,
    city 
FROM
    departments d,
    locations l 
WHERE
    d.`location_id` = l.`location_id` 
GROUP BY
    city;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    department_name,
    d.`manager_id`,
    MIN( salary ) 
FROM
    departments d,
    employees e 
WHERE
    d.`department_id` = e.`department_id` 
    AND commission_pct IS NOT NULL 
GROUP BY
    department_name,
    d.`manager_id`;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>查询每个工种的工种名和员工的个数，并且按员工个数降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    job_title,
    COUNT(*) 
FROM
    employees e,
    jobs j 
WHERE
    e.`job_id` = j.`job_id` 
GROUP BY
    job_title 
ORDER BY
    COUNT(*) DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>查询员工名、部门名和所在的城市，并且城市名以s开头，按部门名称降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name 员工名,
    d.department_name 部门名,
    l.city 城市 
FROM
    employees e,
    departments d,
    locations l 
WHERE
    e.department_id = d.department_id 
    AND d.location_id = l.location_id 
    AND city LIKE 's%' 
ORDER BY
    department_name DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ol> <h3 id="非等值连接"><a href="#非等值连接" class="header-anchor">#</a> 非等值连接</h3> <h4 id="语法-3"><a href="#语法-3" class="header-anchor">#</a> 语法</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>       select 查询列表
       from 表1 别名,表2 别名
       where 非等值的连接条件
       【and 筛选条件】
       【group by 分组字段】
       【having 分组后的筛选】
       【order by 排序字段】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="案例2"><a href="#案例2" class="header-anchor">#</a> 案例2</h4> <ol><li><p>查询员工的工资和工资级别</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.salary 工资,
    j.grade_level 工资级别 
FROM
    employees e,
    job_grades j 
WHERE
    e.salary BETWEEN j.lowest_sal 
    AND j.highest_sal;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>查询员工的工资和工资级别并筛选出级别为A的</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.salary 工资,
    j.grade_level 工资级别 
FROM
    employees e,
    job_grades j 
WHERE
    e.salary BETWEEN j.lowest_sal 
    AND j.highest_sal 
    AND j.grade_level = 'A';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ol> <h3 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h3> <h4 id="语法-4"><a href="#语法-4" class="header-anchor">#</a> 语法</h4> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>    select 查询列表
    from 表 别名1,表 别名2
    where 等值的连接条件
    【and 筛选条件】
    【group by 分组字段】
    【having 分组后的筛选】
    【order by 排序字段】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li><p>查询员工名和上级的名称</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name 员工名,
    m.last_name 上级名称 
FROM
    employees e,
    employees m 
WHERE
    e.manager_id = m.employee_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h3 id="sql99语法-内连接"><a href="#sql99语法-内连接" class="header-anchor">#</a> SQL99语法-内连接</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>select 查询列表
from 表1 别名
【inner】 join 表2 别名 on 连接条件
where 筛选条件
group by 分组列表
having 分组后的筛选
order by 排序列表
limit 子句;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="特点-4"><a href="#特点-4" class="header-anchor">#</a> 特点</h4> <ol><li>表的顺序可以调换</li> <li>内连接的结果=多表的交集</li> <li>n表连接至少需要n-1个连接条件</li> <li>添加排序、分组、筛选</li> <li>inner可以省略</li> <li>筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读</li> <li>inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</li></ol> <h4 id="分类-2"><a href="#分类-2" class="header-anchor">#</a> 分类</h4> <ul><li>等值连接</li> <li>非等值连接</li> <li>自连接</li></ul> <h4 id="内连接-等值连接"><a href="#内连接-等值连接" class="header-anchor">#</a> 内连接-等值连接</h4> <ol><li><p>查询员工名、部门名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    department_name 
FROM
    departments d
    INNER JOIN employees e ON e.`department_id` = d.`department_id`;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查询名字中包含e的员工名和工种名（添加筛选）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    last_name,
    job_title 
FROM
    employees e
    JOIN jobs j ON e.`job_id` = j.`job_id` 
WHERE
    e.`last_name` LIKE '%e%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>查询部门个数&gt;3的城市名和部门个数，（添加分组+筛选）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    COUNT( department_id ) 部门个数,
    city 城市名 
FROM
    departments d
    JOIN locations l ON d.location_id = l.location_id 
GROUP BY
    l.city 
HAVING
    COUNT( department_id )&gt; 3;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序（添加排序）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    COUNT(*) 员工个数,
    d.department_name 部门名称 
FROM
    departments d
    JOIN employees e ON d.department_id = e.department_id 
GROUP BY
    d.department_id 
HAVING
    COUNT(
    *)&gt; 3 
ORDER BY
    1 DESC
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>查询员工名、部门名、工种名，并按部门名降序（添加三表连接）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name 员工名,
    d.department_name 部门号,
    j.job_title 工种名 
FROM
    employees e
    JOIN departments d ON e.department_id = d.department_id
    JOIN jobs j ON e.job_id = j.job_id 
ORDER BY
    d.department_name DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ol> <h4 id="内连接-非等值连接"><a href="#内连接-非等值连接" class="header-anchor">#</a> 内连接-非等值连接</h4> <ol><li><p>查询员工的工资级别</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name 员工名,
    e.salary 薪水,
    j.grade_level 工资级别 
FROM
    employees e
    JOIN job_grades j ON e.salary BETWEEN j.lowest_sal 
    AND j.highest_sal;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>查询工资级别的个数&gt;20的个数，并且按工资级别降序</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    j.grade_level 工资级别,
    COUNT( * ) 个数 
FROM
    employees e
    JOIN job_grades j ON e.salary BETWEEN j.lowest_sal 
    AND j.highest_sal 
GROUP BY
    j.grade_level 
HAVING
    COUNT( * ) &gt; 20 
ORDER BY
    2 DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ol> <h4 id="内连接-自连接"><a href="#内连接-自连接" class="header-anchor">#</a> 内连接-自连接</h4> <ol><li><p>查询员工的名字、上级的名字</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name 员工名,
    m.last_name 上级名 
FROM
    employees e
    JOIN employees m ON e.manager_id = m.employee_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查询姓名中包含字符k的员工的名字、上级的名字</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    e.last_name 员工名,
    m.last_name 上级名 
FROM
    employees e
    JOIN employees m ON e.manager_id = m.employee_id 
WHERE
    e.last_name LIKE '%k%'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h3 id="sql99语法-外连接"><a href="#sql99语法-外连接" class="header-anchor">#</a> SQL99语法-外连接</h3> <h4 id="语法-5"><a href="#语法-5" class="header-anchor">#</a> 语法</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>select 查询列表
from 表1 别名
left|right|full【outer】 join 表2 别名 on 连接条件
where 筛选条件
group by 分组列表
having 分组后的筛选
order by 排序列表
limit 子句;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h4> <p>用于查询一个表中有，另一个表没有的记录</p> <h4 id="特点-5"><a href="#特点-5" class="header-anchor">#</a> 特点</h4> <ol><li><p>外连接的查询结果为主表中的所有记录</p> <p>如果从表中有和它匹配的，则显示匹配的值</p> <p>如果从表中没有和它匹配的，则显示null</p> <p>外连接查询结果=内连接结果+主表中有而从表没有的记录</p></li> <li><p>左外连接，<code>left join</code> 左边的是主表</p></li> <li><p>右外连接，<code>right join</code> 右边的是主表</p></li> <li><p>左外和右外交换两个表的顺序，可以实现同样的效果</p></li> <li><p>全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</p></li></ol> <h4 id="左外连接"><a href="#左外连接" class="header-anchor">#</a> 左外连接</h4> <ol><li><p>查询哪个部门没有员工</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    d.* 
FROM
    departments d
    LEFT JOIN employees e ON d.department_id = e.department_id 
WHERE
    e.department_id IS NULL
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h4 id="右外连接"><a href="#右外连接" class="header-anchor">#</a> 右外连接</h4> <ol><li><p>查询哪个部门没有员工(调换位置使用RIGHT JOIN)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    d.* 
FROM
    employees e
    RIGHT JOIN departments d ON d.department_id = e.department_id 
WHERE
    e.department_id IS NULL
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h4 id="全外连接"><a href="#全外连接" class="header-anchor">#</a> 全外连接</h4> <p>mysql不支持全外连接</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> USE girls;
 SELECT b.*,bo.*
 FROM beauty b
 FULL OUTER JOIN boys bo
 ON b.`boyfriend_id` = bo.id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>同样boys表有的beauty没有的也是显示null</p> <h4 id="交叉连接"><a href="#交叉连接" class="header-anchor">#</a> 交叉连接</h4> <p>交叉联接返回左表中的所有行，左表中的每一行与右表中的所有行组合。交叉联接也称作笛卡尔积。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code> SELECT b.*,bo.*
 FROM beauty b
 CROSS JOIN boys bo;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h2> <h3 id="含义-2"><a href="#含义-2" class="header-anchor">#</a> 含义</h3> <p>嵌套在其他语句内部的select语句称为子查询或内查询， 外面的语句可以是insert、update、delete、select等，一般select作为外面语句较多 外面如果为select语句，则此语句称为外查询或主查询</p> <h3 id="分类-3"><a href="#分类-3" class="header-anchor">#</a> 分类</h3> <h4 id="按出现位置"><a href="#按出现位置" class="header-anchor">#</a> 按出现位置</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>select后面：
        仅仅支持标量子查询
from后面：
        表子查询
where或having后面：
        标量子查询
        列子查询
        行子查询
exists后面：
        标量子查询
        列子查询
        行子查询
        表子查询
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="按结果集的行列"><a href="#按结果集的行列" class="header-anchor">#</a> 按结果集的行列</h4> <p>标量子查询（单行子查询）：结果集为一行一列 列子查询（多行子查询）：结果集为多行一列 行子查询：结果集为多行多列 表子查询：结果集为多行多列</p> <h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <h4 id="where或having后面"><a href="#where或having后面" class="header-anchor">#</a> where或having后面</h4> <ol><li>标量子查询（单行单列）</li> <li>列子查询（多行单列）</li> <li>行子查询（多行多列）</li></ol> <h5 id="特点-6"><a href="#特点-6" class="header-anchor">#</a> 特点</h5> <p>① 子查询放在小括号内
② 子查询一般放在条件的右侧
③ 标量子查询，一般搭配着单行操作符使用</p> <blockquote><p>&lt;、&gt;、&lt;=、&gt;=、=、&lt;&gt;</p></blockquote> <p>④ 列子查询，一般搭配着多行操作符使用</p> <blockquote><p>in、any/some、all</p></blockquote> <p>⑤ 子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p> <h5 id="标量子查询"><a href="#标量子查询" class="header-anchor">#</a> 标量子查询</h5> <ol><li><p>谁的工资比 Abel 高?</p> <p>① 查询Abel的工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT salary
FROM employees
WHERE last_name = 'Abel'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>②查询员工的信息，满足 salary&gt;①结果</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *
FROM employees
WHERE salary&gt;(

    SELECT salary
    FROM employees
    WHERE last_name = 'Abel'

);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>返回job_id与141号员工相同，salary比143号员工多的员工 姓名，job_id 和工资</p> <p>① 查询141号员工的job_id</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT job_id
FROM employees
WHERE employee_id = 141
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>② 查询143号员工的salary</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT salary
FROM employees
WHERE employee_id = 143
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>③ 查询员工的姓名，job_id 和工资，要求job_id=①并且salary&gt;②</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,job_id,salary
FROM employees
WHERE job_id = (
    SELECT job_id
    FROM employees
    WHERE employee_id = 141
) AND salary&gt;(
    SELECT salary
    FROM employees
    WHERE employee_id = 143

);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>返回公司工资最少的员工的last_name,job_id和salary</p> <p>① 查询公司的 最低工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MIN(salary)
FROM employees
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>② 查询last_name,job_id和salary，要求salary=①</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,job_id,salary
FROM employees
WHERE salary=(
    SELECT MIN(salary)
    FROM employees
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查询最低工资大于50号部门最低工资的部门id和其最低工资</p> <p>① 查询50号部门的最低工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT  MIN(salary)
FROM employees
WHERE department_id = 50
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>② 查询每个部门的最低工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MIN(salary),department_id
FROM employees
GROUP BY department_id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>③ 在②基础上筛选，满足min(salary)&gt;①</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT MIN(salary),department_id
FROM employees
GROUP BY department_id
HAVING MIN(salary)&gt;(
    SELECT  MIN(salary)
    FROM employees
    WHERE department_id = 50
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>非法使用标量子查询</p> <p><code>SELECT MIN(salary),department_id FROM employees GROUP BY department_id HAVING MIN(salary)&gt;( SELECT salary FROM employees WHERE department_id = 250 );</code></p> <p>这里250号部门的员工可能不止一个人，查询的是多行单列，就是列子查询了</p></li></ol> <h5 id="列子查询"><a href="#列子查询" class="header-anchor">#</a> 列子查询</h5> <table><thead><tr><th>操作符</th> <th>含义</th></tr></thead> <tbody><tr><td>IN/NOT IN</td> <td>等于列表中的任意一个</td></tr> <tr><td>ANY|SOME</td> <td>和子查询返回的某一个值比较</td></tr> <tr><td>ALL</td> <td>和子查询返回的所有值比较</td></tr></tbody></table> <ol><li><p>返回location_id是1400或1700的部门中的所有员工姓名</p> <p>①查询location_id是1400或1700的<code>部门编号</code></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT DISTINCT department_id
FROM departments
WHERE location_id IN(1400,1700)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>② 查询员工姓名，要求部门号是①列表中的某一个</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name
FROM employees
WHERE department_id IN(
    SELECT DISTINCT department_id
    FROM departments
    WHERE location_id IN(1400,1700)
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>返回其它工种中比job_id为‘IT_PROG’工种任一工资低的员工的员工号、姓名、job_id 以及salary</p> <p>① 查询job_id为‘IT_PROG’部门任一工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT DISTINCT salary
FROM employees
WHERE job_id = 'IT_PROG';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>② 查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary&lt;ANY(
    SELECT DISTINCT salary
    FROM employees
    WHERE job_id = 'IT_PROG'

) AND job_id&lt;&gt;'IT_PROG';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>或者(小于最大值，就肯定满足任意一个)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary&lt;(
    SELECT MAX(salary)
    FROM employees
    WHERE job_id = 'IT_PROG'

) AND job_id&lt;&gt;'IT_PROG';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>返回其它部门中比job_id为‘IT_PROG’部门所有工资都低的员工 的员工号、姓名、job_id 以及salary</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary&lt;ALL(
    SELECT DISTINCT salary
    FROM employees
    WHERE job_id = 'IT_PROG'

) AND job_id&lt;&gt;'IT_PROG';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>或者（小于最小的）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT last_name,employee_id,job_id,salary
FROM employees
WHERE salary&lt;(
    SELECT MIN( salary)
    FROM employees
    WHERE job_id = 'IT_PROG'

) AND job_id&lt;&gt;'IT_PROG';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h5 id="行子查询"><a href="#行子查询" class="header-anchor">#</a> 行子查询</h5> <ol><li><p>查询员工编号最小并且工资最高的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * 
FROM employees
WHERE (employee_id,salary)=(
    SELECT MIN(employee_id),MAX(salary)
    FROM employees
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>或者</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT *
FROM employees
WHERE employee_id=(
    SELECT MIN(employee_id)
    FROM employees
)AND salary=(
    SELECT MAX(salary)
    FROM employees
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h4 id="select后面"><a href="#select后面" class="header-anchor">#</a> select后面</h4> <p>仅仅支持标量子查询</p> <ol><li><p>查询每个部门的员工个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT d.*,(
    SELECT COUNT(*)
    FROM employees e
    WHERE e.department_id = d.`department_id`
 ) 个数
 FROM departments d;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>或者(使用外连接)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    d.*,
    count( e.employee_id ) 个数 
FROM
    employees e
    RIGHT JOIN departments d ON e.department_id = d.department_id 
GROUP BY
    d.department_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>查询员工号=102的部门名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT department_id,( 
    SELECT department_name 
    FROM departments d 
    WHERE department_id = e.department_id 
) 
FROM
    employees e 
WHERE
    e.employee_id = 102;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>或者</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>    SELECT department_name,e.department_id
    FROM departments d
    INNER JOIN employees e
    ON d.department_id=e.department_id
    WHERE e.employee_id=102;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="from后面"><a href="#from后面" class="header-anchor">#</a> from后面</h4> <p>将子查询结果充当一张表，要求必须起别名</p> <ol><li><p>查询每个部门的平均工资的工资等级</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT  ag_dep.*,g.`grade_level`
FROM (
    SELECT AVG(salary) ag,department_id
    FROM employees
    GROUP BY department_id
) ag_dep
INNER JOIN job_grades g
ON ag_dep.ag BETWEEN lowest_sal AND highest_sal;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol></li></ol> <h4 id="exists后面（相关子查询）"><a href="#exists后面（相关子查询）" class="header-anchor">#</a> exists后面（相关子查询）</h4> <p>判断子查询是否存在结果，存在返回1，不能存在返回0，可用于筛选判断</p> <ol><li><p>查询有员工的部门名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT department_name
FROM departments d
WHERE EXISTS(
    SELECT *
    FROM employees e
    WHERE d.`department_id`=e.`department_id`
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>查询没有女朋友的男神信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT bo.*
FROM boys bo
WHERE NOT EXISTS(
    SELECT boyfriend_id
    FROM beauty b
    WHERE bo.`id`=b.`boyfriend_id`
);

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT bo.*
FROM boys bo
WHERE bo.id NOT IN(
    SELECT boyfriend_id
    FROM beauty
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <p>能用exists的地方就都可以用In替代</p> <h2 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h2> <h3 id="应用场景-2"><a href="#应用场景-2" class="header-anchor">#</a> 应用场景</h3> <p>当要显示的数据，一页显示不全，需要分页提交sql请求</p> <h3 id="语法-6"><a href="#语法-6" class="header-anchor">#</a> 语法</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>    select 查询列表
    from 表
    【join type】 join 表2
    on 连接条件
    where 筛选条件
    group by 分组字段
    having 分组后的筛选
    order by 排序的字段】
    limit 【offset,】size;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>offset</code>要显示条目的起始索引（起始索引从0开始）</p> <p><code>size</code> 要显示的条目个数</p> <h3 id="分页公式"><a href="#分页公式" class="header-anchor">#</a> 分页公式</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(page-1)*size,size
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="案例-5"><a href="#案例-5" class="header-anchor">#</a> 案例</h3> <p>1.查询前五条员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM  employees LIMIT 0,5;
# 或者
SELECT * FROM  employees LIMIT 5;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.查询第11条~第25条</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM  employees LIMIT 10,15;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.有奖金的员工信息，并且工资较高的前10名显示出来</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 
    * 
FROM
    employees 
WHERE commission_pct IS NOT NULL 
ORDER BY salary DESC 
LIMIT 10;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>合并、联合，将多次查询结果合并成一个结果</p> <h3 id="语法-7"><a href="#语法-7" class="header-anchor">#</a> 语法</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>查询语句1
union 【all】
查询语句2
union 【all】
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="意义"><a href="#意义" class="header-anchor">#</a> 意义</h3> <ol><li>将一条比较复杂的查询语句拆分成多条语句</li> <li>适用于查询多个表的时候，查询的列基本是一致</li></ol> <h3 id="特点-7"><a href="#特点-7" class="header-anchor">#</a> 特点</h3> <ol><li>要求多条查询语句的查询列数是一致的！</li> <li>要求多条查询语句的查询的每一列的类型和顺序最好一致</li> <li>union关键字默认去重，如果使用union all 可以包含重复项</li></ol> <h3 id="案例-6"><a href="#案例-6" class="header-anchor">#</a> 案例</h3> <ol><li><p>查询部门编号&gt;90或邮箱包含a的员工信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM employees WHERE email LIKE '%a%' OR department_id&gt;90;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM employees  WHERE email LIKE '%a%'
UNION
SELECT * FROM employees  WHERE department_id&gt;90;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h2 id="dml数据处理之增删改"><a href="#dml数据处理之增删改" class="header-anchor">#</a> DML数据处理之增删改</h2> <p>DML(Data Manipulation Language –数据操纵语言) 可以在下列条件下执行:</p> <ul><li>向表中插入数据</li> <li>修改现存数据</li> <li>删除现存数据</li></ul> <p><strong>事务是由完成若干项工作的DML语句组成的</strong></p> <p>运行以下脚本创建表my_employees</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>USE myemployees;
CREATE TABLE my_employees(
    Id INT(10),
    First_name VARCHAR(10),
    Last_name VARCHAR(10),
    Userid VARCHAR(10),
    Salary DOUBLE(10,2)
);
CREATE TABLE users(
    id INT,
    userid VARCHAR(10),
    department_id INT

);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>显示表my_employees的结构</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DESC my_employees;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="insert"><a href="#insert" class="header-anchor">#</a> INSERT</h3> <h4 id="方式一"><a href="#方式一" class="header-anchor">#</a> 方式一</h4> <h5 id="语法-8"><a href="#语法-8" class="header-anchor">#</a> 语法</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>insert into 表名(字段名,...) values(值,...);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="特点-8"><a href="#特点-8" class="header-anchor">#</a> 特点</h5> <ol><li><p>要求值的类型和字段的类型要一致或兼容</p></li> <li><p>字段的个数和顺序不一定与原始表中的字段个数和顺序一致</p> <p><code>但必须保证值和字段一一对应</code></p></li> <li><p>假如表中有可以为null的字段，注意可以通过以下两种方式插入null值</p> <p>① 字段和值都省略
② 字段写上，值使用null</p></li> <li><p>字段和值的个数必须一致</p></li> <li><p>字段名可以省略，默认所有列</p></li></ol> <h4 id="方式二"><a href="#方式二" class="header-anchor">#</a> 方式二</h4> <p>语法</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>insert into 表名 set 字段=值,字段=值,...;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>两种方式的区别：</strong></p> <ol><li><p>方式一支持一次插入多行，语法如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>insert into 表名【(字段名,..)】 values(值，..),(值，...),...;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>方式一支持子查询，语法如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>insert into 表名
查询语句;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h4 id="向表中插入数据"><a href="#向表中插入数据" class="header-anchor">#</a> 向表中插入数据</h4> <p>向my_employees表中插入下列数据</p> <table><thead><tr><th>ID</th> <th>FIRST_NAME</th> <th>LAST_NAME</th> <th>USERID</th> <th>SALARY</th></tr></thead> <tbody><tr><td>1</td> <td>patel</td> <td>Ralph</td> <td>Rpatel</td> <td>895</td></tr> <tr><td>2</td> <td>Dancs</td> <td>Betty</td> <td>Bdancs</td> <td>860</td></tr> <tr><td>3</td> <td>Biri</td> <td>Ben</td> <td>Bbiri</td> <td>1100</td></tr> <tr><td>4</td> <td>Newman</td> <td>Chad</td> <td>Cnewman</td> <td>750</td></tr> <tr><td>5</td> <td>Ropeburn</td> <td>Audrey</td> <td>Aropebur</td> <td>155</td></tr></tbody></table> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>INSERT INTO my_employees
VALUES
    ( 1, 'patel', 'Ralph', 'Rpatel', 895 ),
    ( 2, 'Dancs', 'Betty', 'Bdancs', 860 ),
    ( 3, 'Biri', 'Ben', 'Bbiri', 1100 ),
    ( 4, 'Newman', 'Chad', 'Cnewman', 750 ),
    ( 5, 'Ropeburn', 'Audrey', 'Aropebur', 1550 );
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>或者</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 先删除表数据
DELETE FROM my_employees;
# 再插入
INSERT INTO my_employees
SELECT 1,'patel','Ralph','Rpatel',895 UNION
SELECT 2,'Dancs','Betty','Bdancs',860 UNION
SELECT 3,'Biri','Ben','Bbiri',1100 UNION
SELECT 4,'Newman','Chad','Cnewman',750 UNION
SELECT 5,'Ropeburn','Audrey','Aropebur',1550;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>向users表中插入数据</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>INSERT INTO users
VALUES
    ( 1, 'Rpatel', 10 ),
    ( 2, 'Bdancs', 10 ),
    ( 3, 'Bbiri', 20 );
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="update"><a href="#update" class="header-anchor">#</a> UPDATE</h3> <h4 id="修改单表的记录"><a href="#修改单表的记录" class="header-anchor">#</a> 修改单表的记录</h4> <h5 id="语法-9"><a href="#语法-9" class="header-anchor">#</a> 语法</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>update 表名 set 字段=值,字段=值 【where 筛选条件】;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li><p>将3号员工的last_name修改为“drelxer”</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>UPDATE my_employees SET last_name='drelxer' WHERE id = 3;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>将所有工资少于900的员工的工资修改为1000</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>UPDATE my_employees SET salary=1000 WHERE salary&lt;900;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h4 id="修改多表的记录"><a href="#修改多表的记录" class="header-anchor">#</a> 修改多表的记录</h4> <h5 id="语法-10"><a href="#语法-10" class="header-anchor">#</a> 语法</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>update 表1 别名 
left|right|inner join 表2 别名 
on 连接条件  
set 字段=值,字段=值 
【where 筛选条件】;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="delete"><a href="#delete" class="header-anchor">#</a> DELETE</h3> <h4 id="删除单表的记录"><a href="#删除单表的记录" class="header-anchor">#</a> 删除单表的记录</h4> <h5 id="语法-11"><a href="#语法-11" class="header-anchor">#</a> 语法</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>delete from 表名 【where 筛选条件】【limit 条目数】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="级联删除"><a href="#级联删除" class="header-anchor">#</a> 级联删除</h4> <h5 id="语法-12"><a href="#语法-12" class="header-anchor">#</a> 语法</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>delete 别名1,别名2 from 表1 别名 
inner|left|right join 表2 别名 
on 连接条件
 【where 筛选条件】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol><li><p>将userid 为Bbiri的user表和my_employees表的记录全部删除</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELETE u,e 
FROM
    users u
    JOIN my_employees e 
ON u.`userid` = e.`Userid` 
WHERE
    u.`userid` = 'Bbiri';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>删除所有数据</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>DELETE FROM my_employees;
DELETE FROM users;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="truncate"><a href="#truncate" class="header-anchor">#</a> TRUNCATE</h3> <p>清空表</p> <h4 id="语法-13"><a href="#语法-13" class="header-anchor">#</a> 语法</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>truncate table 表名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="delete和truncate的区别"><a href="#delete和truncate的区别" class="header-anchor">#</a> DELETE和TRUNCATE的区别</h3> <ol><li>truncate删除后，如果再插入，标识列从1开始。delete删除后，如果再插入，标识列从断点开始</li> <li>delete可以添加筛选条件，truncate不可以添加筛选条件</li> <li>truncate效率较高</li> <li>truncate没有返回值，delete可以返回受影响的行数</li> <li>truncate不可以回滚，delete可以回滚</li></ol> <h2 id="ddl数据库定义语言"><a href="#ddl数据库定义语言" class="header-anchor">#</a> DDL数据库定义语言</h2> <p>数据定义语言：简称DDL(Data Definition Language)，用来定义数据库对象：数据库，表，列等。关键字：create，alter，drop等</p> <ul><li>创建： create</li> <li>修改： alter</li> <li>删除： drop</li></ul> <h3 id="库的管理"><a href="#库的管理" class="header-anchor">#</a> 库的管理</h3> <h4 id="创建库"><a href="#创建库" class="header-anchor">#</a> 创建库</h4> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>create database 【if not exists】 库名【 character set 字符集名】;
CREATE DATABASE IF NOT EXISTS books;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="修改库"><a href="#修改库" class="header-anchor">#</a> 修改库</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter database 库名 character set 字符集名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="修改库名"><a href="#修改库名" class="header-anchor">#</a> 修改库名</h5> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>已废弃：RENAME DATABASE books TO 新库名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="修改库的字符集"><a href="#修改库的字符集" class="header-anchor">#</a> 修改库的字符集</h5> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER DATABASE books CHARACTER SET gbk;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="删除库"><a href="#删除库" class="header-anchor">#</a> 删除库</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>drop database 【if exists】 库名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="表的管理"><a href="#表的管理" class="header-anchor">#</a> 表的管理</h3> <h4 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>create table 表名(
    列名 列的类型【(长度) 约束】,
    列名 列的类型【(长度) 约束】,
    列名 列的类型【(长度) 约束】,
    ...
    列名 列的类型【(长度) 约束】
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>创建表Book表</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE book ( 
    id INT AUTO_INCREMENT PRIMARY KEY, #编号
    bName VARCHAR ( 20 ), #图书名
    price DOUBLE, #价格
    authorId INT, #作者编号
    publishDate DATETIME #出版日期
);


CREATE TABLE college_professional(
	cp_id INT AUTO_INCREMENT PRIMARY KEY,
	c_id INT ,
	p_id INT ,
	CONSTRAINT fk_college_id FOREIGN KEY(c_id) REFERENCES college(c_id) 
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>查看book表结构</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DESC book;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>创建表author</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE IF NOT EXISTS author(
    id INT,
    au_name VARCHAR(20),
    nation VARCHAR(10)
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>数据类型</p> <h4 id="修改表"><a href="#修改表" class="header-anchor">#</a> 修改表</h4> <h5 id="添加列"><a href="#添加列" class="header-anchor">#</a> 添加列</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 add column 列名 类型 【first|after 字段名】;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="修改列的类型或约束"><a href="#修改列的类型或约束" class="header-anchor">#</a> 修改列的类型或约束</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 modify column 列名 新类型 【新约束】;

ALTER TABLE college_professional ADD CONSTRAINT fk_professional_id FOREIGN KEY(p_id) REFERENCES professional(p_id)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="修改列名"><a href="#修改列名" class="header-anchor">#</a> 修改列名</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 change column 旧列名 新列名 类型;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="删除列"><a href="#删除列" class="header-anchor">#</a> 删除列</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 drop column 列名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="修改表名"><a href="#修改表名" class="header-anchor">#</a> 修改表名</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 rename 【to】 新表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>drop table【if exists】 表名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="复制表"><a href="#复制表" class="header-anchor">#</a> 复制表</h4> <h5 id="复制表的结构"><a href="#复制表的结构" class="header-anchor">#</a> 复制表的结构</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>create table 表名 like 旧表;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="复制表的结构-数据"><a href="#复制表的结构-数据" class="header-anchor">#</a> 复制表的结构+数据</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>create table 表名 
select 查询列表 from 旧表【where 筛选】;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>案例</strong></p> <ol><li><p>向author表插入数据</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>INSERT INTO author
VALUES
    ( 1, '村上春树', '日本' ),
    ( 2, '莫言', '中国' ),
    ( 3, '冯唐', '中国' ),
    ( 4, '金庸', '中国' );
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>创建表copy，复制author表的结构</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE copy LIKE author;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>创建表copy2，复制author表的结构和数据</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE copy2 
SELECT * FROM author;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>创建表copy3，复制author表的<code>部分数据</code></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE copy3
SELECT id,au_name
FROM author 
WHERE nation='中国';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>创建表copy4，复制author表的<code>部分字段</code></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE copy4 
SELECT id,au_name
FROM author
WHERE 0;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h3 id="mysql数据类型"><a href="#mysql数据类型" class="header-anchor">#</a> MYSQL数据类型</h3> <table><thead><tr><th><strong>分类</strong></th> <th><strong>类型名称</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td><strong>整数类型</strong></td> <td>tinyInt</td> <td>很小的整数</td></tr> <tr><td></td> <td>smallint</td> <td>小的整数</td></tr> <tr><td></td> <td>mediumint</td> <td>中等大小的整数</td></tr> <tr><td></td> <td>int(integer)</td> <td>普通大小的整数</td></tr> <tr><td><strong>小数类型</strong></td> <td>float</td> <td>单精度浮点数</td></tr> <tr><td></td> <td>double</td> <td>双精度浮点数</td></tr> <tr><td></td> <td>decimal（m,d）</td> <td>压缩严格的定点数</td></tr> <tr><td><strong>日期类型</strong></td> <td>year</td> <td>YYYY 1901~2155</td></tr> <tr><td></td> <td>time</td> <td>HH : MM : SS -838:59 : 59~838 : 59 : 59</td></tr> <tr><td></td> <td>date</td> <td>YYYY-MM-DD 1000-01-01~9999-12-3</td></tr> <tr><td></td> <td>datetime</td> <td>YYYY-MM-DD HH : MM : SS 1000-01-01 00 : 00 : 00~ 9999-12-31 23 : 59 : 59</td></tr> <tr><td></td> <td>timestamp</td> <td>YYYY-MM-DD HH : MM : SS 1970<s>01</s>01 00 : 00 : 01 UTC~2038-01-19 03 : 14 : 07UTC</td></tr> <tr><td><strong>文本、二进制类型</strong></td> <td>CHAR(M)</td> <td>M为0~255之间的整数</td></tr> <tr><td></td> <td>VARCHAR(M)</td> <td>M为0~65535之间的整数</td></tr> <tr><td></td> <td>TINYBLOB</td> <td>允许长度0~255字节</td></tr> <tr><td></td> <td>BLOB</td> <td>允许长度0~65535字节</td></tr> <tr><td></td> <td>MEDIUMBLOB</td> <td>允许长度0~167772150字节</td></tr> <tr><td></td> <td>LONGBLOB</td> <td>允许长度0~4294967295字节</td></tr> <tr><td></td> <td>TINYTEXT</td> <td>允许长度0~255字节</td></tr> <tr><td></td> <td>TEXT</td> <td>允许长度0~65535字节</td></tr> <tr><td></td> <td>MEDIUMTEXT</td> <td>允许长度0~167772150字节</td></tr> <tr><td></td> <td>LONGTEXT</td> <td>允许长度0~4294967295字节</td></tr> <tr><td></td> <td>VARBINARY(M)</td> <td>允许长度0~M个字节的变长字节字符串</td></tr> <tr><td></td> <td>BINARY(M)</td> <td>允许长度0~M个字节的定长字节字符串</td></tr></tbody></table> <h4 id="数值型"><a href="#数值型" class="header-anchor">#</a> 数值型</h4> <h5 id="整型"><a href="#整型" class="header-anchor">#</a> 整型</h5> <p>tinyint、smallint、mediumint、int/integer、bigint</p> <p><strong>特点：</strong></p> <ol><li>都可以设置无符号和有符号，默认有符号，通过unsigned设置无符号</li> <li>如果超出了范围，会报out or range异常，插入临界值</li> <li>长度可以不指定，默认会有一个长度，长度代表显示的最大宽度，如果不够则左边用0填充，但需要搭配zerofill，并且默认变为无符号整型</li></ol> <p><strong>如何设置无符号</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE tab_int(
    t1 INT,
    t2 INT unsigned 
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>显示长度</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE tab_int(
    t1 INT(7) ZEROFILL,
    t2 INT(7) ZEROFILL 
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="浮点型"><a href="#浮点型" class="header-anchor">#</a> 浮点型</h5> <p><strong>定点数</strong>：decimal(M,D) <strong>浮点数</strong>: float(M,D) double(M,D)</p> <p><strong>特点：</strong></p> <ol><li>M代表整数部位+小数部位的个数，D代表小数部位</li> <li>如果超出范围，则报out or range异常，并且插入临界值</li> <li>M和D都可以省略，但对于定点数，M默认为10，D默认为0</li> <li>如果精度要求较高，则优先考虑使用定点数</li></ol> <h4 id="字符型"><a href="#字符型" class="header-anchor">#</a> 字符型</h4> <p>char、varchar、binary、varbinary、enum(用于保存枚举)、set(用于保存集合)、text、blob</p> <p>char：固定长度的字符，写法为char(M)，最大长度不能超过M，其中M可以省略，默认为1</p> <p>varchar：可变长度的字符，写法为varchar(M)，最大长度不能超过M，其中M不可以省略</p> <p>Enum：又称为枚举类型哦，要求插入的值必须属于列表中指定的值之一。</p> <p>Set：和Enum类型类似，里面可以保存0~64个成员。和Enum类型最大的区别是：SET类型一次可以选取多个成员，而Enum只能选一个</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE tab_char(
    c1 ENUM('a','b','c')
);

INSERT INTO tab_char VALUES('a');
INSERT INTO tab_char VALUES('b');
INSERT INTO tab_char VALUES('c');
INSERT INTO tab_char VALUES('m');    --&gt; 会插入空字符 ''
INSERT INTO tab_char VALUES('A');    --&gt;  会插入 'a'
CREATE TABLE tab_set(
    s1 SET('a','b','c','d')
);

INSERT INTO tab_set VALUES('a');
INSERT INTO tab_set VALUES('A,B');
INSERT INTO tab_set VALUES('a,c,d');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="日期型"><a href="#日期型" class="header-anchor">#</a> 日期型</h4> <p>year年 date日期 time时间 datetime 日期+时间 timestamp 日期+时间 ，比较容易受时区、语法模式、版本的影响，更能反映当前时区的真实时间</p> <h3 id="常见的约束"><a href="#常见的约束" class="header-anchor">#</a> 常见的约束</h3> <ul><li>NOT NULL：非空，该字段的值必填</li> <li>UNIQUE：唯一，该字段的值不可重复</li> <li>DEFAULT：默认，该字段的值不用手动插入有默认值</li> <li>CHECK：检查，mysql不支持（但是设置并不会报错，只是没有效果）</li> <li>PRIMARY KEY：主键，该字段的值不可重复并且非空 unique+not null</li> <li>FOREIGN KEY：外键，该字段的值引用了另外的表的字段</li></ul> <p>添加约束的时机：</p> <ol><li>创建表时</li> <li>修改表时</li></ol> <p><strong>约束的添加分类</strong>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    列级约束：

        六大约束语法上都支持，但外键约束没有效果

    表级约束：

        除了非空、默认，其他的都支持
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="主键和唯一"><a href="#主键和唯一" class="header-anchor">#</a> 主键和唯一</h4> <ol><li>一个表至多有一个主键，但可以有多个唯一</li> <li>主键不允许为空，唯一可以为空</li></ol> <table><thead><tr><th></th> <th>保证唯一性</th> <th>是否允许为空</th> <th>一个表中可以有多少个</th> <th>是否允许组合</th></tr></thead> <tbody><tr><td>主键</td> <td>√</td> <td>×</td> <td>至多有1个</td> <td>√，但不推荐</td></tr> <tr><td>唯一</td> <td>√</td> <td>√</td> <td>可以有多个</td> <td>√，但不推荐</td></tr></tbody></table> <p><strong>外键：</strong></p> <ol><li>要求在从表设置外键关系</li> <li>从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</li> <li>主表的关联列<code>必须是一个key</code>（一般是主键或唯一）</li> <li>插入数据时，先插入主表，再插入从表</li> <li>删除数据时，先删除从表，再删除主表</li></ol> <h4 id="创建表时添加约束"><a href="#创建表时添加约束" class="header-anchor">#</a> 创建表时添加约束</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE TABLE 表名(
    字段名 字段类型 列级约束,
    字段名 字段类型,
    表级约束
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="添加列级约束"><a href="#添加列级约束" class="header-anchor">#</a> 添加列级约束</h5> <p>直接在字段名和类型后面追加 约束类型即可。</p> <p>只支持：默认、非空、主键、唯一</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 创建一个数据库
CREATE DATABASE students;
USE students;
CREATE TABLE stuinfo (
    id INT PRIMARY KEY,#主键
    stuName VARCHAR ( 20 ) NOT NULL UNIQUE,#非空并且唯一
    gender CHAR ( 1 ) CHECK ( gender = '男' OR gender = '女' ),#检查
    seat INT UNIQUE,#唯一
    age INT DEFAULT 18,#默认约束
    majorId INT REFERENCES major ( id ) #外键，(没有效果)
);

CREATE TABLE major(
    id INT PRIMARY KEY,
    majorName VARCHAR(20)
);

# 查看stuinfo中的所有索引，包括主键、外键、唯一
SHOW INDEX FROM stuinfo;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="添加表级约束"><a href="#添加表级约束" class="header-anchor">#</a> 添加表级约束</h5> <p>在各个字段的最下面</p> <p>【constraint 约束名】 约束类型(字段名)</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DROP TABLE IF EXISTS stuinfo;
CREATE TABLE stuinfo (
    id INT,
    stuname VARCHAR ( 20 ),
    gender CHAR ( 1 ),
    seat INT,
    age INT,
    majorid INT,
    CONSTRAINT pk PRIMARY KEY ( id ),#主键
    CONSTRAINT uq UNIQUE ( seat ),#唯一键
    CONSTRAINT ck CHECK ( gender = '男' OR gender = '女' ),#检查
    CONSTRAINT fk_stuinfo_major FOREIGN KEY ( majorid ) REFERENCES major ( id ) #外键

);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="通用写法"><a href="#通用写法" class="header-anchor">#</a> 通用写法</h5> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TABLE IF NOT EXISTS stuinfo (
        id INT PRIMARY KEY,
        stuname VARCHAR ( 20 ),
        sex CHAR ( 1 ),
        age INT DEFAULT 18,
        seat INT UNIQUE,
        majorid INT,
    CONSTRAINT fk_stuinfo_major FOREIGN KEY ( majorid ) REFERENCES major ( id ) 
);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="修改表时添加约束"><a href="#修改表时添加约束" class="header-anchor">#</a> 修改表时添加约束</h4> <ul><li>添加列级约束</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 modify column 字段名 字段类型 新约束;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>添加表级约束</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;
DROP TABLE IF EXISTS stuinfo;
CREATE TABLE stuinfo(
    id INT,
    stuname VARCHAR(20),
    gender CHAR(1),
    seat INT,
    age INT,
    majorid INT
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol><li><p>添加非空约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20)  NOT NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>添加默认约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>添加主键</p> <p>① 列级约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>② 表级约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo ADD PRIMARY KEY(id);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>添加唯一</p> <p>① 列级约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>② 表级约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo ADD UNIQUE(seat);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>添加外键</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo 
ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id); 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h4 id="修改表时删除约束"><a href="#修改表时删除约束" class="header-anchor">#</a> 修改表时删除约束</h4> <ol><li><p>删除非空约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除默认约束</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo MODIFY COLUMN age INT ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除主键</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo DROP PRIMARY KEY;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除唯一</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo DROP INDEX seat;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除外键</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="自增长列"><a href="#自增长列" class="header-anchor">#</a> 自增长列</h3> <p>不用手动插入值，可以自动提供序列值，默认从1开始，步长为1</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>auto_increment_increment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果要更改起始值：手动插入值</p> <p>如果要更改步长：更改系统变量：<code>set auto_increment_increment=值;</code></p> <ol><li>一个表至多有一个自增长列</li> <li>自增长列只能支持数值型</li> <li>自增长列必须为一个key</li></ol> <h4 id="创建表时设置自增长列"><a href="#创建表时设置自增长列" class="header-anchor">#</a> 创建表时设置自增长列</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>create table 表(
    字段名 字段类型 约束 auto_increment
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="修改表时设置自增长列"><a href="#修改表时设置自增长列" class="header-anchor">#</a> 修改表时设置自增长列</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表 modify column 字段名 字段类型 约束 auto_increment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="删除自增长列"><a href="#删除自增长列" class="header-anchor">#</a> 删除自增长列</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter table 表 modify column 字段名 字段类型 约束 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="mysql事物"><a href="#mysql事物" class="header-anchor">#</a> MySQL事物</h2> <p>TCL：<code>Transaction Control Language</code> 事务控制语言</p> <blockquote><p>事务由单独单元的一个或多个SQL语句组成，在这个单元中，每个MySQL语句是相互依赖的。而整个单独单元作为一个不可分割的整体，如果单元中某条SQL语句一旦执行失败或产生错误，整个单元将会回滚。所有受到影响的数据将返回到事物开始以前的状态；如果单元中的所有SQL语句均执行成功，则事物被顺利执行。</p></blockquote> <p>一个或一组sql语句组成一个执行单元，这个执行单元要么<strong>全部执行</strong>，要么<strong>全部不执行</strong>。</p> <ul><li>概念：在mysql中的数据用各种不同的技术存储在文件（或内存）中。</li> <li>通过show engines；来查看mysql支持的存储引擎。</li> <li>在mysql中用的最多的存储引擎有：innodb，myisam ,memory 等。其中<code>innodb</code>支持事务，而myisam、memory等不支持</li></ul> <h3 id="转账案例"><a href="#转账案例" class="header-anchor">#</a> 转账案例</h3> <p>张三丰转给郭襄500元</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 张三丰  1000
# 郭襄    1000

update 表 set 张三丰的余额=张三丰的余额-500 where name='张三丰'

#　中间发生意外，张三丰的余额少了500，而郭襄的余额并没有增加

update 表 set 郭襄的余额=郭襄的余额+500 where name='郭襄'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="事务的特性-acid"><a href="#事务的特性-acid" class="header-anchor">#</a> 事务的特性(ACID)</h3> <ol><li><p><strong>原子性</strong>（Atomicity）</p> <p>原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。</p></li> <li><p><strong>一致性</strong>（Consistency）</p> <p>事务必须使数据库从一个一致性状态变换到另外一个一致性状态。</p></li> <li><p><strong>隔离性</strong>（Isolation）</p> <p>事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</p></li> <li><p><strong>持久性</strong>（Durability）</p> <p>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</p></li></ol> <h3 id="事务的创建"><a href="#事务的创建" class="header-anchor">#</a> 事务的创建</h3> <h4 id="隐式事务"><a href="#隐式事务" class="header-anchor">#</a> 隐式事务</h4> <p>事务没有明显的开启和结束的标记，比如insert、update、delete语句</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 执行完表中id列为1的那一行数据就直接被删除了
delete from 表 where id =1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="显式事务"><a href="#显式事务" class="header-anchor">#</a> 显式事务</h4> <p>事务具有明显的开启和结束的标记</p> <p>前提：必须先设置自动提交功能为禁用 <code>set autocommit=0;</code></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 查看自动提交是否开启
SHOW VARIABLES LIKE 'autocommit';

# 查看数据库引擎
SHOW ENGINES;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="开启事物步骤"><a href="#开启事物步骤" class="header-anchor">#</a> 开启事物步骤</h5> <ol><li><p>开启事务</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 关闭自动提交
set autocommit=0;

#　开启事物（可选）
start transaction;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>编写事务中的sql语句(select insert update delete)</p></li> <li><p>可选：<code>savepoint 节点名</code>;设置回滚点</p></li> <li><p>结束事务</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>commit;提交事务
# 或者
rollback;回滚事务
# 或者
rollback to 回滚点名;回滚到指定的地方
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h3 id="并发事务"><a href="#并发事务" class="header-anchor">#</a> 并发事务</h3> <ol><li><p>事务的并发问题是如何发生的？</p> <p>多个事务 同时 操作 同一个数据库的相同数据时</p></li> <li><p>并发问题都有哪些？</p> <p><strong>脏读:</strong> 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还没有被提交的字段. 之后, 若 T2 回滚, T1读取的内容就是临时且无效的</p> <p><strong>不可重复读:</strong> 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 更新了该字段. 之后, T1再次读取同一个字段, 值就不同了(在一个事物中不管读多少次，读取的数据应该都一样)</p> <p><strong>幻读:</strong> 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中插入了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行</p></li> <li><p>如何解决并发问题</p> <p>通过设置隔离级别来解决并发问题</p></li></ol> <h3 id="事物隔离级别"><a href="#事物隔离级别" class="header-anchor">#</a> 事物隔离级别</h3> <p>√：已解决</p> <table><thead><tr><th>隔离级别</th> <th>脏读</th> <th>不可重复读</th> <th>幻读</th></tr></thead> <tbody><tr><td>read uncommitted:读未提交</td> <td>×</td> <td>×</td> <td>×</td></tr> <tr><td>read committed：读已提交</td> <td>√</td> <td>×</td> <td>×</td></tr> <tr><td>repeatable read：可重复读</td> <td>√</td> <td>√</td> <td>×</td></tr> <tr><td>serializable：串行化</td> <td>√</td> <td>√</td> <td>√</td></tr></tbody></table> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql`中默认 第三个隔离级别 `repeatable read
oracle`中默认第二个隔离级别 `read committed
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>查看隔离级别</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select @@tx_isolation;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>设置隔离级别</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 设置当前 mySQL 连接的隔离级别: 
set transaction isolation level read committed;

# 设置数据库系统的全局的隔离级别:
set global transaction isolation level read committed;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="案例-7"><a href="#案例-7" class="header-anchor">#</a> 案例</h3> <ol><li><p>事务的使用步骤</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 开启事务
SET autocommit=0;
START TRANSACTION;
# 编写一组事务的语句
UPDATE account SET balance = 1000 WHERE username='张无忌';
UPDATE account SET balance = 1000 WHERE username='赵敏';

# 结束事务
ROLLBACK;
# COMMIT;

SELECT * FROM account;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>事务对于delete和truncate的处理的区别</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET autocommit=0;
START TRANSACTION;

DELETE FROM account;
ROLLBACK;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>TRUNCATE 无法回滚</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET autocommit=0;
START TRANSACTION;

TRUNCATE TABLE account;
ROLLBACK;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>savepoint 的使用</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET autocommit=0;
START TRANSACTION;
DELETE FROM account WHERE id=25;
SAVEPOINT a;#设置保存点
DELETE FROM account WHERE id=28;
ROLLBACK TO a;#回滚到保存点

SELECT * FROM account;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h2 id="mysql视图"><a href="#mysql视图" class="header-anchor">#</a> MySQL视图</h2> <blockquote><p>MySQL从5.0.1版本开始提供视图功能。一种虚拟存在的表，行和列的数据来自定义视图的查询中 使用的表，并且是在使用视图时动态生成的，只保存了sql逻辑，不保存查询结果</p></blockquote> <h3 id="应用场景-3"><a href="#应用场景-3" class="header-anchor">#</a> 应用场景</h3> <ul><li>多个地方用到同样的查询结果</li> <li>该查询结果使用的sql语句较复杂</li></ul> <h3 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h3> <ol><li>简化sql语句</li> <li>提高了sql的重用性</li> <li>保护基表的数据，提高了安全性</li></ol> <h3 id="创建视图"><a href="#创建视图" class="header-anchor">#</a> 创建视图</h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>create view 视图名
as
查询语句;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol><li><p>创建视图emp_v1,要求查询电话号码以‘011’开头的员工姓名和工资、邮箱</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE VIEW emp_v1 AS SELECT
    last_name,
    salary,
    email 
FROM
    employees 
WHERE
    phone_number LIKE '011%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>创建视图emp_v2，要求查询部门的最高工资高于12000的部门信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 创建视图，查询每个部门的最高工资,筛选出高于12000的
DROP VIEW emp_v2;
CREATE VIEW emp_v2 AS SELECT
department_id,
MAX( salary ) max_salary 
FROM
    employees 
GROUP BY
    department_id 
HAVING
    max_salary &gt; 12000;

# 根据创建的视图连接departments表查询部门信息
SELECT
    d.*,
    ev2.max_salary 
FROM
    departments d
    JOIN emp_v2 ev2 
    ON d.department_id = ev2.department_id;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>查询姓名中包含a字符的员工名、部门名和工种信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 查询员工名、部门名和工种信息
CREATE VIEW emp_v3 AS SELECT
e.last_name,
d.department_name,
j.job_title 
FROM
    employees e
    LEFT JOIN departments d ON e.department_id = d.department_id
    LEFT JOIN jobs j ON e.job_id = j.job_id;

# 筛选出姓名中包含a字符的员工
SELECT * FROM emp_v3 WHERE last_name LIKE '%a%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>查询各部门的平均工资级别</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 查询各部门的平均工资
CREATE VIEW emp_v4 AS SELECT
AVG( salary ) avg_salary,
department_id 
FROM
    employees 
GROUP BY
    department_id;

# 查询各部门的平均工资级别
SELECT
    department_id,
    j.grade_level 
FROM
    emp_v4 ev4
    LEFT JOIN job_grades j 
    ON ev4.avg_salary BETWEEN j.lowest_sal 
    AND j.highest_sal
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>查询平均工资最低的部门信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT
    d.*,
    ev4.avg_salary 
FROM
    departments d
    JOIN ( SELECT * FROM emp_v4 ORDER BY avg_salary LIMIT 1 ) ev4 
    ON d.department_id = ev4.department_id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h3 id="修改视图"><a href="#修改视图" class="header-anchor">#</a> 修改视图</h3> <h4 id="方式一-2"><a href="#方式一-2" class="header-anchor">#</a> 方式一</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>create or replace view  视图名
as
查询语句;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="方式二-2"><a href="#方式二-2" class="header-anchor">#</a> 方式二</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>alter view 视图名
as 
查询语句;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="删除视图"><a href="#删除视图" class="header-anchor">#</a> <a href="#/backend/mysql/view?id=%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE">删除视图</a></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>drop view 视图名,视图名,...
DROP VIEW emp_v1,emp_v2,emp_v3,emp_v4;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="查看视图"><a href="#查看视图" class="header-anchor">#</a> <a href="#/backend/mysql/view?id=%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE">查看视图</a></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>DESC 视图名;

SHOW CREATE VIEW 视图名;
CREATE VIEW emp_v1 AS SELECT
* 
FROM
    employees;

DESC emp_v1;

SHOW CREATE VIEW emp_v1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="视图的更新"><a href="#视图的更新" class="header-anchor">#</a> <a href="#/backend/mysql/view?id=%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0">视图的更新</a></h3> <p>视图的可更新性和视图中查询的定义有关系，以下类型的视图是不能更新的。</p> <ul><li>包含以下关键字的sql语句：分组函数、distinct、group by</li> <li>having、union或者union all</li> <li>常量视图</li> <li>Select中包含子查询</li> <li>join</li> <li>from一个不能更新的视图</li> <li>where子句的子查询引用了from子句中的表</li></ul> <h4 id="案例-8"><a href="#案例-8" class="header-anchor">#</a> <a href="#/backend/mysql/view?id=%E6%A1%88%E4%BE%8B">案例</a></h4> <ol><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">张飞能否成功插入？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   # 创建视图，查询员工的姓名，邮箱和年薪
   
   CREATE 
       OR REPLACE VIEW myv1 AS SELECT
       last_name,
       email,
       salary * 12 *(1+IFNULL ( commission_pct, 0 )) &quot;annual salary&quot; 
   FROM
       employees;
   
   # 插入一条数据
   INSERT INTO myv1 VALUES('张飞','zf@qq.com',94862.00);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">张飞能否成功插入？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   # 创建视图，查询员工的姓名和邮箱
   
   CREATE 
       OR REPLACE VIEW myv1 AS SELECT
       last_name,
       email
   FROM
       employees;
   
   # 插入一条数据
   INSERT INTO myv1 VALUES('张飞','zf@qq.com');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能否将张飞修改为张无忌？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   UPDATE myv1 SET last_name = '张无忌' WHERE last_name='张飞';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能否干掉张无忌？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   DELETE FROM myv1 WHERE last_name = '张无忌';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能否将10号部门的最高薪水改为9000？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   #　创建视图，查询每个部门的最高工资
   CREATE 
       OR REPLACE VIEW myv1 AS SELECT
       MAX( salary ) m,
       department_id 
   FROM
       employees 
   GROUP BY
       department_id;
   
   ＃ 将10号部门的最高薪水改为9000
   UPDATE myv1 SET m=9000 WHERE department_id=10;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="5"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能否更改？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   CREATE OR REPLACE VIEW myv2
   AS
   SELECT 'john' NAME;
   
   #更新
   UPDATE myv2 SET NAME='lucy';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="6"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能够将最高工资列修改为100000？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   CREATE OR REPLACE VIEW myv3 AS 
   SELECT department_id,( SELECT MAX( salary ) FROM employees ) 最高工资 
   FROM
       departments;
   
   # 修改
   
   UPDATE myv3 SET 最高工资=100000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="7"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">修改和插入能成功吗？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   # 创建视图，查询员工名与部门名
   CREATE 
       OR REPLACE VIEW myv4 AS SELECT
       last_name,
       department_name 
   FROM
       employees e
       JOIN departments d ON e.department_id = d.department_id;
   
   # 修改
   UPDATE myv4 SET last_name  = '张飞' WHERE last_name='Whalen';
   # 插入
   INSERT INTO myv4 VALUES('陈真','Acc');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="8"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能修改吗？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   CREATE 
       OR REPLACE VIEW myv5 AS SELECT
       * 
   FROM
       myv3;
   
   # 修改
   UPDATE myv5 SET 最高工资=10000 WHERE department_id=60;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="9"><li><details style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;"><summary style="-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);text-size-adjust:none;box-sizing:border-box;">能修改吗？</summary></details></li></ol> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>   # 查询所有的领导信息
   CREATE OR REPLACE VIEW myv6
   AS
   
   SELECT last_name,email,salary
   FROM employees
   WHERE employee_id IN(
       SELECT  manager_id
       FROM employees
       WHERE manager_id IS NOT NULL
   );
   
   # 修改
   UPDATE myv6 SET salary=10000 WHERE last_name = 'k_ing';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>查询领导Id（将所有员工的上级Id查出来，这些Id就是领导Id）：</p> <p><code>SELECT DISTINCT manager_id FROM employees WHERE manager_id IS NOT NULL</code></p> <h3 id="视图和表的对比"><a href="#视图和表的对比" class="header-anchor">#</a> <a href="#/backend/mysql/view?id=%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A1%A8%E7%9A%84%E5%AF%B9%E6%AF%94">视图和表的对比</a></h3> <table><thead><tr><th></th> <th>关键字</th> <th>是否占用物理空间</th> <th>使用</th></tr></thead> <tbody><tr><td>视图</td> <td>view</td> <td>占用较小，只保存sql逻辑</td> <td>一般用于查询</td></tr> <tr><td>表</td> <td>table</td> <td>保存实际的数据</td> <td>增删改查</td></tr></tbody></table> <h2 id="变量"><a href="#变量" class="header-anchor">#</a> <a href="#/backend/mysql/variable?id=%E5%8F%98%E9%87%8F">变量</a></h2> <h3 id="系统变量"><a href="#系统变量" class="header-anchor">#</a> <a href="#/backend/mysql/variable?id=%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F">系统变量</a></h3> <p>系统变量：</p> <ul><li>全局变量</li> <li>会话变量</li></ul> <p>说明：变量由系统定义，不是用户定义，属于服务器层面</p> <p>注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别</p> <ol><li><p>查看所有系统变量</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 全局
show global variables;

#会话
show【session】variables;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>查看满足条件的部分系统变量</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>show global |【session】 variables like '%char%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看指定的系统变量的值（<code>带.</code>）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select @@global |【@@session】.系统变量名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>为某个系统变量赋值</p> <ul><li><p>方式一</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>set global|【session】系统变量名=值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>方式二（<code>带.</code>）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>set @@global|【@@session】.系统变量名=值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ol> <p><strong>例如：</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 查看所有全局变量
SHOW GLOBAL VARIABLES;
# 查看满足条件的部分系统变量
SHOW GLOBAL VARIABLES LIKE '%char%';
# 查看指定的系统变量的值
SELECT @@global.autocommit;
# 为某个系统变量赋值
SET @@global.autocommit=0;
SET GLOBAL autocommit=0;
# 查看所有会话变量
SHOW SESSION VARIABLES;
# 查看满足条件的部分会话变量
SHOW SESSION VARIABLES LIKE '%char%';
# 查看指定的会话变量的值
SELECT @@autocommit;
SELECT @@session.tx_isolation;
# 为某个会话变量赋值
SET @@session.tx_isolation='read-uncommitted';
SET SESSION tx_isolation='read-committed';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="自定义变量"><a href="#自定义变量" class="header-anchor">#</a> <a href="#/backend/mysql/variable?id=%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">自定义变量</a></h3> <p>变量由用户自定义，而不是系统提供的</p> <p>作用域：针对于当前会话（连接）有效，作用域同于会话变量</p> <p><strong>声明并初始化</strong></p> <p>赋值操作符：<code>=</code>或<code>:=</code></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET @变量名=值;
SET @变量名:=值;
SELECT @变量名:=值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>更新变量的值</strong></p> <ul><li><p>方式一</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET @变量名=值;
SET @变量名:=值;
SELECT @变量名:=值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>方式二</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 字段 INTO @变量名
FROM 表;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><strong>查看变量的值</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT @变量名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="局部变量"><a href="#局部变量" class="header-anchor">#</a> <a href="#/backend/mysql/variable?id=%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F">局部变量</a></h3> <p>作用域：仅仅在定义它的begin end块中有效</p> <p>应在 begin end中的第一句话声明</p> <p><strong>声明</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DECLARE
    变量名 类型;
    ...
END

## 

DECLARE 
    变量名 类型 【DEFAULT 值】;
    ...
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>赋值（更新变量的值）</strong></p> <ul><li><p>方式一</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET 局部变量名=值;
SET 局部变量名:=值;
SELECT 局部变量名:=值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>方式二</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 字段 INTO 具备变量名
FROM 表;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><strong>查看变量的值</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 局部变量名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="案例-9"><a href="#案例-9" class="header-anchor">#</a> <a href="#/backend/mysql/variable?id=%E6%A1%88%E4%BE%8B">案例</a></h3> <ol><li><p>声明两个用户变量，求和并打印</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET @m=1;
SET @n=1;
SET @sum=@m+@n;
SELECT @sum;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h2 id="存储过程"><a href="#存储过程" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">存储过程</a></h2> <p><strong>什么是存储过程：</strong></p> <blockquote><p>事先经过编译并存储在数据库中的一段sql语句的集合。</p> <p>类似于java中的方法</p></blockquote> <p><strong>使用好处</strong></p> <ol><li>简化应用开发人员的很多工作</li> <li>减少数据在数据库和应用服务器之间的传输</li> <li>提高了数据处理的效率</li> <li></li></ol> <p>一组预先编译好的SQL语句的集合，理解成批处理语句</p> <h3 id="创建语法"><a href="#创建语法" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E5%88%9B%E5%BB%BA%E8%AF%AD%E6%B3%95">创建语法</a></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE PROCEDURE 存储过程名(参数列表)
BEGIN

    存储过程体（一组合法的SQL语句）
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>参数列表包含三部分</strong></p> <ul><li>参数模式</li> <li>参数名</li> <li>参数类型</li></ul> <blockquote><p>例：in stuname varchar(20)</p></blockquote> <p><strong>参数模式：</strong></p> <p><code>in</code>：该参数可以作为输入，也就是该参数需要调用方传入值</p> <p><code>out</code>：该参数可以作为输出，也就是该参数可以作为返回值</p> <p><code>inout</code>：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p> <ul><li><p>如果存储过程体仅仅只有一句话，begin end可以省略</p></li> <li><p>存储过程体中的每条sql语句的结尾要求必须加分号。</p></li> <li><p>存储过程的结尾可以使用 delimiter 重新设置（避免与存储过程体的分号混淆）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>delimiter 结束标记
# 例
delimiter $
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p><strong>例：</strong></p> <p>插入到admin表中五条记录</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>USE girls;

DELIMITER $
CREATE PROCEDURE myp1()
BEGIN
    INSERT INTO admin(username,`password`) 
    VALUES
    ('john1','0000'),('lily','0000'),('rose','0000'),('jack','0000'),('tom','0000');
END $
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="调用语法"><a href="#调用语法" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E8%B0%83%E7%94%A8%E8%AF%AD%E6%B3%95">调用语法</a></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>CALL 存储过程名(实参列表);
CALL myp1();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="创建带in模式参数的存储过程"><a href="#创建带in模式参数的存储过程" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E5%88%9B%E5%BB%BA%E5%B8%A6in%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">创建带in模式参数的存储过程</a></h3> <p>创建存储过程实现 根据女神名，查询对应的男神信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER $
CREATE PROCEDURE myp2(IN beautyName VARCHAR(20))
BEGIN
    SELECT bo.*
    FROM boys bo
    RIGHT JOIN beauty b ON bo.id = b.boyfriend_id
    WHERE b.name=beautyName;
END $
CALL myp2('赵敏');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>创建存储过程实现，判断用户是否登录成功</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER $
CREATE PROCEDURE myp3(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))
BEGIN
    DECLARE result INT DEFAULT 0;    #声明并初始化

    SELECT COUNT(*) INTO result    #赋值
    FROM admin
    WHERE admin.username = username
    AND admin.password = PASSWORD;

    SELECT IF(result&gt;0,'成功','失败');    #使用
END $
CALL myp3('john','8888');
CALL myp3('john','1234');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="创建out模式参数的存储过程"><a href="#创建out模式参数的存储过程" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E5%88%9B%E5%BB%BAout%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">创建out模式参数的存储过程</a></h3> <p>根据输入的女神名，返回对应的男神名</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER $
CREATE PROCEDURE myp4(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20))
BEGIN
    SELECT bo.boyname INTO boyname
    FROM boys bo
    RIGHT JOIN
    beauty b ON b.boyfriend_id = bo.id
    WHERE b.name=beautyName ;
END $
# 调用 使用自定义变量接收
CALL myp4('赵敏',@name);
SELECT @name;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>根据输入的女神名，返回对应的男神名和魅力值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER $
CREATE PROCEDURE myp5(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20),OUT usercp INT) 
BEGIN
    SELECT boys.boyname ,boys.usercp INTO boyname,usercp
    FROM boys 
    RIGHT JOIN
    beauty b ON b.boyfriend_id = boys.id
    WHERE b.name=beautyName ;

END $
CALL myp5('小昭',@name,@cp);
SELECT @name,@cp;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="创建带inout模式参数的存储过程"><a href="#创建带inout模式参数的存储过程" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E5%88%9B%E5%BB%BA%E5%B8%A6inout%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">创建带inout模式参数的存储过程</a></h3> <p>传入a和b两个值，最终a和b都翻倍并返回</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER $
CREATE OR REPLACE PROCEDURE myp5(INOUT a INT,INOUT b INT)
BEGIN

    SET a:=a*2;
    SET b:=b*2;

END $
SET @m=10;
SET @n=20;
CALL myp5(@m,@n);
SELECT @m,@n;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="查看存储过程的信息"><a href="#查看存储过程的信息" class="header-anchor">#</a> <a href="#/backend/mysql/procedure?id=%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E4%BF%A1%E6%81%AF">查看存储过程的信息</a></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW CREATE PROCEDURE myp5;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="存储函数"><a href="#存储函数" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0">存储函数</a></h2> <h3 id="存储过程与存储函数的区别"><a href="#存储过程与存储函数的区别" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB">存储过程与存储函数的区别</a></h3> <blockquote><p>存储过程：可以有0个返回，也可以有多个返回，适合做批量插入、批量更新</p> <p>存储函数：有且仅有1 个返回，适合做处理数据后返回一个结果</p></blockquote> <h3 id="创建语法-2"><a href="#创建语法-2" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E5%88%9B%E5%BB%BA%E8%AF%AD%E6%B3%95">创建语法</a></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>CREATE FUNCTION 函数名(参数列表) RETURNS 返回类型
BEGIN
    函数体
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>参数列表 包含两部分：参数名，参数类型</li> <li>函数体：
<ul><li>肯定会有return语句，如果没有会报错 如果return语句没有放在函数体的最后也不报错，但不建议</li> <li>函数体中仅有一句话，则可以省略begin end</li></ul></li> <li>使用 delimiter语句设置结束标记</li></ul> <h3 id="调用语法-2"><a href="#调用语法-2" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E8%B0%83%E7%94%A8%E8%AF%AD%E6%B3%95">调用语法</a></h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT 函数名(参数列表);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="无参有返回"><a href="#无参有返回" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E6%97%A0%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E">无参有返回</a></h3> <p>返回公司的员工个数</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>USE myemployees;
DELIMITER //
CREATE FUNCTION myf1() RETURNS INT
BEGIN

    DECLARE c INT DEFAULT 0;    #定义局部变量
    SELECT COUNT(*) INTO c     #赋值
    FROM employees;
    RETURN c;

END //
SELECT myf1();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="有参有返回"><a href="#有参有返回" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E6%9C%89%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E">有参有返回</a></h3> <p>根据员工名，返回它的工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE FUNCTION myf2(empName VARCHAR(20)) RETURNS DOUBLE
BEGIN
    SET @sal=0;    #定义用户变量 
    SELECT salary INTO @sal    #赋值
    FROM employees
    WHERE last_name = empName;

    RETURN @sal;

END //
SELECT myf2('Kochhar');

SELECT @sal;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>根据部门名，返回该部门的平均工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE
BEGIN
    DECLARE sal DOUBLE ;
    SELECT AVG(salary) INTO sal
    FROM employees e
    JOIN departments d ON e.department_id = d.department_id
    WHERE d.department_name=deptName;
    RETURN sal;
END //
SELECT myf3('IT');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="查看函数"><a href="#查看函数" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0">查看函数</a></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW CREATE FUNCTION myf3;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="删除函数"><a href="#删除函数" class="header-anchor">#</a> <a href="#/backend/mysql/function?id=%E5%88%A0%E9%99%A4%E5%87%BD%E6%95%B0">删除函数</a></h4> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DROP FUNCTION myf3;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建函数，实现传入两个float，返回二者之和</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE OR REPLACE FUNCTION myf3(num1 FLOAT,num2 FLOAT) RETURNS FLOAT(3,1)
BEGIN
    DECLARE SUM FLOAT(3,1) DEFAULT 0;
    SET SUM=num1+num2;
    RETURN SUM;
END //
SELECT myf3(15.5,15.3);    --&gt; 30.8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="流程控制结构"><a href="#流程控制结构" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84">流程控制结构</a></h2> <h3 id="分支结构"><a href="#分支结构" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84">分支结构</a></h3> <h4 id="if函数"><a href="#if函数" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=if%E5%87%BD%E6%95%B0">if函数</a></h4> <p><strong>语法</strong>：<code>if(条件,值1，值2)</code></p> <p><strong>功能</strong>：实现双分支</p> <p>应用在begin end中或外面</p> <h4 id="case结构"><a href="#case结构" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=case%E7%BB%93%E6%9E%84">case结构</a></h4> <p>类似java中的switch</p> <p><strong>功能</strong>：实现多分支</p> <p>应用在begin end 中或外面</p> <p><strong>语法一</strong>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>case 表达式或字段
when 值1 then 语句1;
when 值2 then 语句2；
...
else 语句n;
end [case];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>语法二</strong>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>case 
when 条件1 then 语句1;
when 条件2 then 语句2；
...
else 语句n;
end [case];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE OR REPLACE FUNCTION test_case(score DOUBLE) RETURNS CHAR
BEGIN
-- DECLARE result CHAR;
CASE  
    WHEN score&gt;90 THEN
        RETURN 'A';
    WHEN score&gt;80 THEN 
        RETURN 'B';
    WHEN score&gt;60 THEN
        RETURN 'C';
    ELSE
        RETURN 'D';
END CASE;

END //
SELECT test_case(95);

SELECT test_case(85);

SELECT test_case(75);

SELECT test_case(55);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="if结构"><a href="#if结构" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=if%E7%BB%93%E6%9E%84">if结构</a></h4> <p><strong>功能</strong>：实现多分支</p> <p>只能放在begin end中</p> <p><strong>语法：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>if 条件1 then 语句1;
elseif 条件2 then 语句2;
...
else 语句n;
end if;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE OR REPLACE FUNCTION test_if(score DOUBLE) RETURNS CHAR 
BEGIN 
    DECLARE result CHAR;
    IF score&gt;90 THEN
        SET result:='A';
    ELSEIF score&gt;80 THEN
        SET result:='B';
    ELSEIF score&gt;60 THEN
        SET result:='C';
    ELSE
        SET result:='D';
    END IF;
    RETURN result;
END //
SELECT test_if(95);

SELECT test_if(85);

SELECT test_if(75);

SELECT test_if(55);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>创建存储过程，如果工资&lt;2000,则删除，如果5000&gt;工资&gt;2000,则涨工资1000，否则涨工资500</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE OR REPLACE PROCEDURE test_if2(IN salary DOUBLE)
BEGIN

    IF salary&lt;2000 THEN
            DELETE FROM employees WHERE employees.salary=salary;
    ELSEIF 2000&lt;salary&lt;5000 THEN 
            UPDATE employees SET employees.salary=employees.salary+1000 WHERE employees.salary=salary; 
    ELSE
            UPDATE employees SET employees.salary=employees.salary+500 WHERE employees.salary=salary; 
    END IF;
END //
CALL test_if2(3300.00);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="循环结构"><a href="#循环结构" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84">循环结构</a></h3> <p><strong>分类</strong>：<code>while</code>、<code>loop</code>、<code>repeat</code></p> <p><strong>循环控制</strong>：</p> <p><code>iterate</code>类似于 <code>continue</code>，继续，结束本次循环，继续下一次</p> <p><code>leave</code> 类似于 <code>break</code>，跳出，结束当前所在的循环</p> <p>只能放在begin end中</p> <p><strong>标签</strong>：用上循环控制就必须要加</p> <h4 id="while"><a href="#while" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=while">while</a></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>[标签:] while 循环条件 do
    循环体;
end while [标签];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>批量插入，根据次数插入到admin表中多条记录</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>USE girls;

DELIMITER //
CREATE OR REPLACE PROCEDURE test_while(IN total INT)
BEGIN

DECLARE i INT DEFAULT 0;

WHILE i&lt;total DO
    INSERT INTO admin VALUES(NULL,CONCAT('员工',i),'8888');
    SET i:=i+1;
END WHILE;

END //
CALL test_while(10);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止 （需要加标签）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE OR REPLACE PROCEDURE test_while(IN total INT)
BEGIN

DECLARE i INT DEFAULT 1;

a:WHILE i&lt;=total DO
    IF i&gt;20 THEN LEAVE a;
    END IF;
    INSERT INTO admin VALUES(NULL,CONCAT('员工',i),'8888');
    SET i:=i+1;
END WHILE a;

END //
TRUNCATE TABLE admin;
CALL test_while(100);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>批量插入，根据次数插入到admin表中多条记录，只插入偶数次</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER //
CREATE OR REPLACE PROCEDURE test_while(IN total INT)
BEGIN

DECLARE i INT DEFAULT 0;

a:WHILE i&lt;=total DO
    SET i:=i+1;
    IF MOD(i,2)!=0 THEN ITERATE a;
    END IF;
    INSERT INTO admin VALUES(NULL,CONCAT('员工',i),'8888');

END WHILE a;

END //

TRUNCATE TABLE admin;
CALL test_while(20);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="loop"><a href="#loop" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=loop">loop</a></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>[标签:] loop

    循环体;

end loop [标签];

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="repeat"><a href="#repeat" class="header-anchor">#</a> <a href="#/backend/mysql/processcontrol?id=repeat">repeat</a></h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>[标签] repeat
    循环体;
until 结束循环的条件
end repeat [标签];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div></div></div>
    <script src="/assets/js/app.20e080e3.js" defer></script><script src="/assets/js/3.69b4042a.js" defer></script><script src="/assets/js/1.c4c6ad86.js" defer></script><script src="/assets/js/43.14107803.js" defer></script>
  </body>
</html>
