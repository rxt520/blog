(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{354:function(a,s,t){"use strict";t.r(s);var _=t(3),v=Object(_.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[a._v("#")]),a._v(" 索引")]),a._v(" "),t("h2",{attrs:{id:"索引的分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引的分类"}},[a._v("#")]),a._v(" 索引的分类")]),a._v(" "),t("h3",{attrs:{id:"单值索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单值索引"}},[a._v("#")]),a._v(" 单值索引")]),a._v(" "),t("p",[a._v("一个索引只包含单个列，一个表可以有多个单列索引")]),a._v(" "),t("h3",{attrs:{id:"唯一索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#唯一索引"}},[a._v("#")]),a._v(" 唯一索引")]),a._v(" "),t("p",[a._v("索引列的值必须唯一，但允许有空值")]),a._v(" "),t("h3",{attrs:{id:"复合索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#复合索引"}},[a._v("#")]),a._v(" 复合索引")]),a._v(" "),t("p",[a._v("一个索引包含多个列")]),a._v(" "),t("h2",{attrs:{id:"基本语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[a._v("#")]),a._v(" 基本语法")]),a._v(" "),t("h3",{attrs:{id:"创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建"}},[a._v("#")]),a._v(" 创建")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("create [unique] INDEX indexName ON tableNme(columnname(length))\n\nalert tableName add [unique] INDEX [indexName] ON(columnname(length))\n\nDROP INDEX[indexName] ON tableName\n\nSHOW INDEX FROM tableName\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h2",{attrs:{id:"索引结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引结构"}},[a._v("#")]),a._v(" 索引结构")]),a._v(" "),t("h3",{attrs:{id:"btree索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#btree索引"}},[a._v("#")]),a._v(" BTree索引")]),a._v(" "),t("h3",{attrs:{id:"hash索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hash索引"}},[a._v("#")]),a._v(" Hash索引")]),a._v(" "),t("h3",{attrs:{id:"full-text全文索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#full-text全文索引"}},[a._v("#")]),a._v(" full-text全文索引")]),a._v(" "),t("h3",{attrs:{id:"r-tree索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#r-tree索引"}},[a._v("#")]),a._v(" R-Tree索引")]),a._v(" "),t("h2",{attrs:{id:"哪些情况下需要创建索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#哪些情况下需要创建索引"}},[a._v("#")]),a._v(" 哪些情况下需要创建索引")]),a._v(" "),t("ul",[t("li",[a._v("主键自动建立唯一索引")]),a._v(" "),t("li",[a._v("频繁作为查询条件的字段应该创建索引")]),a._v(" "),t("li",[a._v("查询中与其他表关联的字段，外键关系建立索引")]),a._v(" "),t("li",[a._v("频繁更新的字段不适合创建索引")]),a._v(" "),t("li",[a._v("where条件用不到的字段不创建索引")]),a._v(" "),t("li",[a._v("单键/组合索引的选择问题")]),a._v(" "),t("li",[a._v("查询中排序的字段，排序字段若通过索引去访问将大大提高速度")]),a._v(" "),t("li",[a._v("查询中统计或分组字段")])]),a._v(" "),t("h2",{attrs:{id:"哪些情况下不需要创建索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#哪些情况下不需要创建索引"}},[a._v("#")]),a._v(" 哪些情况下不需要创建索引")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("表记录太少")])]),a._v(" "),t("li",[t("p",[a._v("经常增删改的表")])]),a._v(" "),t("li",[t("p",[a._v("数据重复且分布平均的字段")])])]),a._v(" "),t("h2",{attrs:{id:"explain关键字"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#explain关键字"}},[a._v("#")]),a._v(" EXPLAIN关键字")]),a._v(" "),t("p",[a._v("EXPLAIN可以模拟优化器执行SQL查询语句,从而知道MySQL是如何处理你的SQL语句的。")]),a._v(" "),t("h3",{attrs:{id:"功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[a._v("#")]),a._v(" 功能")]),a._v(" "),t("ul",[t("li",[a._v("表的读取顺序")]),a._v(" "),t("li",[a._v("数据读取操作的操作类型")]),a._v(" "),t("li",[a._v("哪些索引可以使用")]),a._v(" "),t("li",[a._v("哪些索引被实际使用")]),a._v(" "),t("li",[a._v("表之间的引用")]),a._v(" "),t("li",[a._v("每张表有多少行被优化器查询")])]),a._v(" "),t("h3",{attrs:{id:"包含的信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#包含的信息"}},[a._v("#")]),a._v(" 包含的信息")]),a._v(" "),t("h4",{attrs:{id:"id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#id"}},[a._v("#")]),a._v(" id")]),a._v(" "),t("p",[a._v("select 查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序")]),a._v(" "),t("p",[a._v("id相同 执行顺序由上至下")]),a._v(" "),t("p",[a._v("id不同 id值越大优先级越高")]),a._v(" "),t("p",[a._v("id相同不同 先执行优先级高的，再顺序执行")]),a._v(" "),t("h4",{attrs:{id:"select-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select-type"}},[a._v("#")]),a._v(" select_type")]),a._v(" "),t("p",[a._v("simple")]),a._v(" "),t("p",[a._v("primary 查询中若包含任何复杂的子查询，则最外层被标记为primary")]),a._v(" "),t("p",[a._v("subquery 子查询")]),a._v(" "),t("p",[a._v("derived  衍生 在from 列表中包含的子查询被标记为derived，mysql\t\t\t\t会递归执行这些子查询，把结果放在临时表里")]),a._v(" "),t("p",[a._v("union")]),a._v(" "),t("p",[a._v("union result")]),a._v(" "),t("h4",{attrs:{id:"table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#table"}},[a._v("#")]),a._v(" table")]),a._v(" "),t("h4",{attrs:{id:"type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[a._v("#")]),a._v(" type")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("ALL 扫描全表")])]),a._v(" "),t("li",[t("p",[a._v("index 扫描全索引")])]),a._v(" "),t("li",[t("p",[a._v("Range 扫描范围 where 后 >、<、in、between")])]),a._v(" "),t("li",[t("p",[a._v("ref  非唯一性索引扫描")])]),a._v(" "),t("li",[t("p",[a._v("eq_ref  唯一性索引扫描。对于每个索引键，表中只能查询到一条 记录")])]),a._v(" "),t("li",[t("p",[a._v("const")])]),a._v(" "),t("li",[t("p",[a._v("system")])]),a._v(" "),t("li",[t("p",[a._v("null")])])]),a._v(" "),t("h4",{attrs:{id:"possible-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#possible-key"}},[a._v("#")]),a._v(" possible_key")]),a._v(" "),t("p",[a._v("显示可能应用在这张表中的索引，一个或者多个。")]),a._v(" "),t("p",[a._v("查询设计到的字段上若存在索引，则该索引将被列出，但不一定被查询实际使用")]),a._v(" "),t("h4",{attrs:{id:"key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[a._v("#")]),a._v(" key")]),a._v(" "),t("ul",[t("li",[a._v("实际使用的索引，如果是NULL，则没有使用索引")]),a._v(" "),t("li",[a._v("查询中若使用了覆盖索引，则该索引仅出现在key列表中")])]),a._v(" "),t("h4",{attrs:{id:"key-len"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#key-len"}},[a._v("#")]),a._v(" KEY_LEN")]),a._v(" "),t("ul",[t("li",[a._v("显示的值为索引字段的最大可能长度")])]),a._v(" "),t("h4",{attrs:{id:"ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ref"}},[a._v("#")]),a._v(" ref")]),a._v(" "),t("h4",{attrs:{id:"rows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rows"}},[a._v("#")]),a._v(" rows")]),a._v(" "),t("h4",{attrs:{id:"extra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#extra"}},[a._v("#")]),a._v(" Extra")]),a._v(" "),t("ul",[t("li",[a._v("using filesort  mysql中无法利用索引完成的排序操作称为文件排序")]),a._v(" "),t("li",[a._v("using temporary 使用了临时表保存中间结果，mysql在对查询结果排序时使用了临时表，常见于order by 和 group by")]),a._v(" "),t("li",[a._v("using index 使用了覆盖索引。")]),a._v(" "),t("li",[a._v("using where")]),a._v(" "),t("li",[a._v("using join buffer")]),a._v(" "),t("li",[a._v("impossible where")]),a._v(" "),t("li",[a._v("distinct")]),a._v(" "),t("li",[a._v("select table optimiszed away")])]),a._v(" "),t("h2",{attrs:{id:"索引单表优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引单表优化"}},[a._v("#")]),a._v(" 索引单表优化")]),a._v(" "),t("p",[a._v("索引无法对范围值进行检索，会把后面的索引失效。可以去掉范围值列名的索引。")]),a._v(" "),t("h2",{attrs:{id:"索引双表优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引双表优化"}},[a._v("#")]),a._v(" 索引双表优化")]),a._v(" "),t("p",[a._v("如果是左连接，则索引加在右表上，如果是右连接则索引加在左表上")]),a._v(" "),t("h2",{attrs:{id:"索引三表优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引三表优化"}},[a._v("#")]),a._v(" 索引三表优化")]),a._v(" "),t("p",[a._v("同索引双表优化")]),a._v(" "),t("h2",{attrs:{id:"索引优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引优化"}},[a._v("#")]),a._v(" 索引优化")]),a._v(" "),t("h3",{attrs:{id:"案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[a._v("#")]),a._v(" 案例")]),a._v(" "),t("ul",[t("li",[a._v("全值匹配我最爱")]),a._v(" "),t("li",[a._v("最佳左前缀法则\n"),t("ul",[t("li",[a._v("如果索引了多列，要遵循最左前缀法则，指查询从索引的最左前列开始并且不跳过索引中的列")]),a._v(" "),t("li",[a._v("例如索引为name_age_pos   如果查询条件没有name 则索引全部失效，如果没有age 则pos索引失效")])])]),a._v(" "),t("li",[a._v("不在索引列上做任何操作（计算、函数、类型转换），以上操作会导致索引失效而转向全表扫描")]),a._v(" "),t("li",[a._v("存储引擎不能使用索引范围条件右边的列\n"),t("ul",[t("li",[a._v("即范围后面的索引全部失效 例如: age>25 and pos=''  则pos索引失效")])])]),a._v(" "),t("li",[a._v("尽量使用覆盖索引(只访问索引的查询(索引列和查询列一致))，减少select *")]),a._v(" "),t("li",[a._v("mysql 在使用  不等于(！= 或者 <> )的时候无法使用索引 会导致全表扫描")]),a._v(" "),t("li",[a._v("is null，is not null 也无法使用索引")]),a._v(" "),t("li",[a._v("like 以通配符开头('%abc...')mysql索引失效会变成全表扫描的操作\n"),t("ul",[t("li",[a._v("但是like ‘abc%’就为范围扫描")]),a._v(" "),t("li",[a._v("如何解决？ 使用覆盖索引，")]),a._v(" "),t("li",[a._v("例如：select name，age from table where name like “%aa%” 就不会失效 type 为index")])])]),a._v(" "),t("li",[a._v("字符串不加单引号索引会失效")]),a._v(" "),t("li",[a._v("少用or，用它来连接时索引会失效")])]),a._v(" "),t("h2",{attrs:{id:"慢日志查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#慢日志查询"}},[a._v("#")]),a._v(" 慢日志查询")]),a._v(" "),t("p",[a._v("SHOW VARIABLES LIKE '%slow_query_log%'")]),a._v(" "),t("p",[a._v("set global slow_query_log = 1 开启慢日志查询")]),a._v(" "),t("p",[a._v("查看参数 ：")]),a._v(" "),t("p",[a._v("show variables like '%long_query_time%'")]),a._v(" "),t("p",[a._v("设置参数")]),a._v(" "),t("p",[a._v("set global long_query_time=3")]),a._v(" "),t("p",[a._v("查看日志下有几条慢记录")]),a._v(" "),t("p",[a._v("show global status like '%Slow_queries%'")]),a._v(" "),t("p",[a._v("mysqlID配置")]),a._v(" "),t("p",[a._v("slow_query_log=1;")]),a._v(" "),t("p",[a._v("slow_query_log_file=/var/lib/mysql/servername.log")]),a._v(" "),t("p",[a._v("long_query_time=3")]),a._v(" "),t("p",[a._v("log_output=FILE")]),a._v(" "),t("h3",{attrs:{id:"mysql日志分析工具-mysqldumpslow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql日志分析工具-mysqldumpslow"}},[a._v("#")]),a._v(" MySQL日志分析工具---mysqldumpslow")]),a._v(" "),t("h2",{attrs:{id:"批量插入数据脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#批量插入数据脚本"}},[a._v("#")]),a._v(" 批量插入数据脚本")]),a._v(" "),t("p",[a._v("如果开启过慢查询日志")]),a._v(" "),t("p",[a._v("show variables like 'log_bin_trust_function_creators'")]),a._v(" "),t("p",[a._v("set global log_bin_trust_function_creators=1")]),a._v(" "),t("p",[a._v("永久方法")]),a._v(" "),t("p",[a._v("window 下 my.ini[mysqld] 加上l log_bin_trust_function_creators=1")]),a._v(" "),t("p",[a._v("linux  /etc/my.cnf下my.cnf[mysqld] 加上l log_bin_trust_function_creators=1")]),a._v(" "),t("h3",{attrs:{id:"创建数据函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建数据函数"}},[a._v("#")]),a._v(" 创建数据函数")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("DELIMITER $$\nCREATE FUNCTION rand_string(n INT) RETURNS VARCHAR(255)\nBEGIN\n\n  DECLARE chars_str VARCHAR(100) DEFAULT 'asdasdasfsdaf';\n  DECLARE return_str VARCHAR(255) DEFAULT '';\n  DECLARE i INT DEFAULT 0;\n  WHILE i < n DO\n    SET return_str = CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));\n    SET i = i +1;\n  END WHILE;\n  RETURN return_str;\nEND $$\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br")])]),t("h3",{attrs:{id:"创建存储过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建存储过程"}},[a._v("#")]),a._v(" 创建存储过程")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("DELIMITER $$\nCREATE PROCEDURE insert_emp(IN START INT(10),IN max_num INT(10))\nBEGIN\n DECLARE i INT DEFAULT 0;\n SET autocommit = 0 ;\n REPEAT\n SET i = i+1;\n INSERT INTO emp(empno,ename) values ((START+i),rand_string(6));\n UNTIL i = max_num\n END REPEAT;\n COMMIT;\nEND $$\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("h3",{attrs:{id:"调用存储函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调用存储函数"}},[a._v("#")]),a._v(" 调用存储函数")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("DELIMITER;\nCALL insert_dept(100,10)\n\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h2",{attrs:{id:"show-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#show-profile"}},[a._v("#")]),a._v(" Show Profile")]),a._v(" "),t("h2",{attrs:{id:"myisam读锁、写锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#myisam读锁、写锁"}},[a._v("#")]),a._v(" MyISAM读锁、写锁")]),a._v(" "),t("h3",{attrs:{id:"mysql的表级锁有两种模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql的表级锁有两种模式"}},[a._v("#")]),a._v(" MySQL的表级锁有两种模式")]),a._v(" "),t("p",[a._v("lock table 表名")]),a._v(" "),t("p",[a._v("show open table")]),a._v(" "),t("p",[a._v("unlock tables")]),a._v(" "),t("h4",{attrs:{id:"表共享读锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#表共享读锁"}},[a._v("#")]),a._v(" 表共享读锁")]),a._v(" "),t("h4",{attrs:{id:"表独占写锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#表独占写锁"}},[a._v("#")]),a._v(" 表独占写锁")]),a._v(" "),t("p",[a._v("1、对MyISAM表的读操作（加读锁），不会阻塞其他进程对同一表的读请求，但会阻塞对同一表的写请求，只有当读锁释放才会执行其他进程的写操作")]),a._v(" "),t("p",[a._v("2、对MyISAM表的写操作（加写锁），会阻塞其他进程对同一表的读和写操作。只有当写锁释放时才可以执行其他进程的读写操作；")]),a._v(" "),t("h2",{attrs:{id:"innodb-行锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#innodb-行锁"}},[a._v("#")]),a._v(" InnoDB 行锁")]),a._v(" "),t("p",[a._v("show status like ‘%innodb_row_lock%’")]),a._v(" "),t("h2",{attrs:{id:"主从复制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主从复制"}},[a._v("#")]),a._v(" 主从复制")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("master 与 slave 版本一致且后台以服务运行")])]),a._v(" "),t("li",[t("p",[a._v("主从都配置在[mysqld]结点下，都是小写")])]),a._v(" "),t("li",[t("p",[a._v("主机修改my.ini配置文件")]),a._v(" "),t("ul",[t("li",[a._v("server-id =1  必须主机唯一id")]),a._v(" "),t("li",[a._v("log-bin=自己本地的路径/mysqlbin  必须启用二进制日志")]),a._v(" "),t("li",[a._v("log-err=自己本地的路径/mysqlerr   可选启用错误日志")]),a._v(" "),t("li",[a._v("basedir=‘自己的本地路径’      basedir=“D://MySQLServer5.5/”  可选 根目录")]),a._v(" "),t("li",[a._v("tmpdir=‘’ 自己的本地路径“        可选 临时目录")]),a._v(" "),t("li",[a._v("datadir= “自己的本地路径/DATA/”      可选 数据目录")]),a._v(" "),t("li",[a._v("binlog-ignore-db=mysql  设置不要复制的数据库")]),a._v(" "),t("li",[a._v("binlog-do-db=需要复制的主数据库的名字 可选 复制主数据库")]),a._v(" "),t("li",[a._v("修改过配置文件需要重启mysql")])])]),a._v(" "),t("li",[t("p",[a._v("从机修改my.cnf配置文件")]),a._v(" "),t("ul",[t("li",[a._v("从服务器唯一ID 必选")]),a._v(" "),t("li",[a._v("启用二进制日志  可选")]),a._v(" "),t("li",[a._v("修改过配置文件需要重启mysql")])])]),a._v(" "),t("li",[t("p",[a._v("在windows 主机上建立账户并授权slave")]),a._v(" "),t("ul",[t("li",[a._v("GRANT REPLICATION SLAVE ON *. * TO 'zhangsan'@‘192.168.12.130’ IDENTIFIED BY '123456'")]),a._v(" "),t("li",[a._v("flush privileges 刷新")]),a._v(" "),t("li",[a._v("show master status  记下File 和 Position的值")]),a._v(" "),t("li",[a._v("以上命令在mysql 命令下执行")])])]),a._v(" "),t("li",[t("p",[a._v("在linux从机上配置需要复制的主机")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("CHANGE MASTER TO MASTER_HOST='192.168.12.128',")]),a._v(" "),t("p",[a._v("MASTER_USER='zhangsan'，")]),a._v(" "),t("p",[a._v("MASTER_PASSWORD='123456',")]),a._v(" "),t("p",[a._v("MASTER_LOG_FILE='mysqlbin.具体数字',")]),a._v(" "),t("p",[a._v("MASTER_LOG_POS=具体值；")])]),a._v(" "),t("li",[t("p",[a._v("start slave；")])]),a._v(" "),t("li",[t("p",[a._v("show slave status\\G")])]),a._v(" "),t("li",[t("p",[a._v("以上命令在linux mysql 下执行")])])])]),a._v(" "),t("li",[t("p",[a._v("主机新建库、新建表、insert记录，从机复制")])]),a._v(" "),t("li",[t("p",[a._v("如何停止从服务复制功能")]),a._v(" "),t("ul",[t("li",[a._v("stop slave;")])])])]),a._v(" "),t("h2",{attrs:{id:"索引底层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引底层"}},[a._v("#")]),a._v(" 索引底层")]),a._v(" "),t("h3",{attrs:{id:"主键索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主键索引"}},[a._v("#")]),a._v(" 主键索引")]),a._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1582722160506.png",alt:"1582722160506"}})]),a._v(" "),t("p",[a._v("B+ 树")]),a._v(" "),t("p",[a._v("页")]),a._v(" "),t("p",[a._v("聚簇索引")]),a._v(" "),t("p",[a._v("页与页之间的指针是为了范围查找和遍历。")]),a._v(" "),t("h3",{attrs:{id:"组合索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组合索引"}},[a._v("#")]),a._v(" 组合索引")]),a._v(" "),t("p",[a._v("按照组合索引的字段顺序进行排序")]),a._v(" "),t("p",[a._v("index(b,c,d)")]),a._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1582722464842.png",alt:"1582722464842"}})]),a._v(" "),t("p",[a._v("但是这样和主键索引形成了复制浪费")]),a._v(" "),t("p",[a._v("所以不保存数据，指向主键。就可以查找到数据")]),a._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1582722563369.png",alt:"1582722563369"}})]),a._v(" "),t("p",[a._v("最左前缀原则：因为排序的时候是从最左边的索引b开始排序，如果最左边都没有提供，就不能通过排序查找了")]),a._v(" "),t("p",[a._v("select 'a' = 0    1    字符转int  都是变成0")]),a._v(" "),t("p",[a._v("select '1' = 1    1")]),a._v(" "),t("p",[a._v("同一字符串 和 数字进行比较 字符串都会转成数字")]),a._v(" "),t("h3",{attrs:{id:"什么是聚集索引？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是聚集索引？"}},[a._v("#")]),a._v(" 什么是聚集索引？")]),a._v(" "),t("p",[a._v("聚集索引也称为聚簇索引，数据行的物理顺序与列值(一般是主键)的逻辑顺序相同，一个表只能有一个聚集索引。聚集索引的叶子结点就是对应的数据结点。")]),a._v(" "),t("h3",{attrs:{id:"什么是主键索引？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是主键索引？"}},[a._v("#")]),a._v(" 什么是主键索引？")]),a._v(" "),t("p",[a._v("主键索引要求主键中的每个值都唯一。当在查询中使用主键索引时，它还允许对数据的快速访问。")]),a._v(" "),t("h3",{attrs:{id:"什么是联合索引？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是联合索引？"}},[a._v("#")]),a._v(" 什么是联合索引？")]),a._v(" "),t("p",[a._v("复合索引|组合索引|联合索引是由多个字段组成的索引。")]),a._v(" "),t("h3",{attrs:{id:"什么是覆盖索引？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是覆盖索引？"}},[a._v("#")]),a._v(" 什么是覆盖索引？")]),a._v(" "),t("p",[a._v("索引是高效找到行的一个方法，但是一般数据库也能使用索引找到一个列的数据，因此它不必读取整个行。毕竟索引叶子节点存储了它们索引的数据；当能通过读取索引就可以得到想要的数据，那就不需要读取行了。一个索引包含了（或覆盖了）满足查询结果的数据就叫做覆盖索引。")]),a._v(" "),t("h3",{attrs:{id:"什么是索引条件下推？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是索引条件下推？"}},[a._v("#")]),a._v(" 什么是索引条件下推？")]),a._v(" "),t("p",[a._v("索引条件下推（ICP）是针对MySQL使用索引从表中检索行的情况的一种优化。如果不使用ICP，则存储引擎将遍历索引以在基表中定位行，并将其返回给MySQL服务器，后者将评估WHERE行的条件。启用ICP后，如果WHERE可以仅使用索引中的列来评估部分 条件，则MySQL服务器会将这部分条件压入WHERE条件下降到存储引擎。然后，存储引擎通过使用索引条目来评估推送的索引条件，并且只有满足此条件的情况下，才从表中读取行。ICP可以减少存储引擎必须访问基表的次数以及MySQL服务器必须访问存储引擎的次数。")])])}),[],!1,null,null,null);s.default=v.exports}}]);