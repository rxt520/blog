(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{338:function(s,a,n){"use strict";n.r(a);var t=n(3),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"直播网站的搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#直播网站的搭建"}},[s._v("#")]),s._v(" 直播网站的搭建")]),s._v(" "),n("h2",{attrs:{id:"测试搭建流媒体服务器-obs推流直播"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试搭建流媒体服务器-obs推流直播"}},[s._v("#")]),s._v(" 测试搭建流媒体服务器+OBS推流直播")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("本文使用的流媒体服务器的搭建是基于rtmp（Real Time Message Protocol）协议的，rtmp协议是应用层的协议，要依靠底层的传输层协议，比如tcp协议来保证信息传输的可靠性。最后提供了一个不错的测试方案。\n\n流媒体服务器依赖的服务，1.nginx 服务器；2.nginx服务器安装需要依赖的服务 OpenSSL、pcre、zlib、 c++、gcc等。\n\n服务器环境是ubuntu 16.04 64 位，本地操作系统 win10 家庭版\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"安装nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx"}},[s._v("#")]),s._v(" 安装nginx")]),s._v(" "),n("h4",{attrs:{id:"ubuntu版"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu版"}},[s._v("#")]),s._v(" ubuntu版")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /usr/local/\nmkdir source #创建源码目录 后面的源码都放在这个目录\ncd source\n\n安装gcc\nsudo apt-get install gcc\n\n安装git\napt-get install git\n\ngit clone https://github.com/nginx/nginx.git \n#从github服务器上将nginx的源代码下载下来\n\ngit clone https://github.com/arut/nginx-rtmp-module.git \n#将rtmp模块的源码下载下来\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("下载依赖模块源码pcre、OpenSSL、zlib 如果机器上已经安装了这些模块就不需要了 。注意要与下面config.sh的版本号对应")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("wget https://www.openssl.org/source/openssl-1.1.0.tar.gz \n#下载OpenSSL源码包\nwget https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz \n#下载pcre源码包\nwget http://www.zlib.net/zlib-1.2.11.tar.gz \n#下载zlib包源码\n\ntar -zxvf 包名\n#解压\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("目录结构图")]),s._v(" "),n("p",[n("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200220055820003.png",alt:"image-20200220055820003"}})]),s._v(" "),n("p",[s._v("找到nginx源码包中 configure 所在的目录，以下脚本就是基于configure来实现的，在本机上configure 命令就在auto 目录下，当前目录 /root/source/nginx 就在这个目录下编写脚本vi config.sh 加入以下内容")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("./auto/configure --prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --with-pcre"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/pcre-8.39 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --with-openssl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/openssl-1.1.0 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --with-zlib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/zlib-1.2.11 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --with-http_v2_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --with-http_flv_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --with-http_mp4_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        --add-module"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/nginx-rtmp-module/\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chmod 777 config.sh   #赋予权限\n./config.sh           #执行脚本\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("make #编译\nmake install  #安装\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#查看nginx安装情况\ncd /usr/local/nginx/\n\n# 查看版本\nsbin/nginx -v\n\n#默认配置启动\nsudo /usr/local/nginx/sbin/nginx\n#查看是否启动成功  端口默认是80端口\n\ncurl 127.0.0.1\n#如果返回html 里面有  Welcome to nginx! 则成功\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"centos版"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos版"}},[s._v("#")]),s._v(" centOS版")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd\nmkdir source #创建源码目录 后面的源码都放在这个目录\ncd source\nyum -y install git #安装git\ngit clone https://github.com/nginx/nginx.git #从github服务器上将nginx的源代码下载下来\ngit clone https://github.com/arut/nginx-rtmp-module.git #将rtmp模块的源码下载下来\nwget https://www.openssl.org/source/openssl-1.1.0.tar.gz #下载OpenSSL源码包\nwget https://ftp.pcre.org/pub/pcre/pcre-8.39.tar.gz #下载pcre源码包\nwget http://www.zlib.net/zlib-1.2.11.tar.gz #下载zlib包源码\ntar -zxvf 包名  #解压各个包源码\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("找到nginx源码包中 configure 所在的目录，以下脚本就是基于configure来实现的，在本机上configure 命令就在auto 目录下，当前目录 /root/source/nginx 就在这个目录下编写脚本vi config.sh 加入以下内容")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("./auto/configure --prefix=/usr/local/nginx \\\n        --with-pcre=../pcre-8.39 \\\n        --with-openssl=../openssl-1.1.0 \\\n        --with-zlib=../zlib-1.2.11 \\\n        --with-http_v2_module \\\n        --with-http_flv_module \\\n        --with-http_mp4_module \\\n        --add-module=../nginx-rtmp-module/\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("保存后给文件赋予操作权限，再执行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chmod 777 config.sh   #赋予权限\n./config.sh           #执行脚本\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("yum -y install gcc #确保依赖的gcc安装\nyum -y install gcc-c++ #确保依赖的c++已经安装\nmake #编译\nmake install  #安装\nsudo /usr/local/nginx/sbin/nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"配置rtmp"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置rtmp"}},[s._v("#")]),s._v(" 配置rtmp")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在nginx配置文件中配置rtmp服务，记住rtmp服务是和http服务是平级的，所以我们需要在和http配置平级的位置另起rtmp服务\nvi /usr/local/nginx/conf/nginx.conf #修改配置文件\n# rtmp config\nrtmp  {\n    server  {\n        listen 1935;\n        chunk_size 4096;\n        application live  {\n            live on;\n            record off;\n        }\n        application live2  {\n            live on;\n            record off;\n        }\n        application vod  {\n            play /var/flvs;\n        }\n        application vod_http  {\n            play http://服务器的ip/vod;\n        }\n        application hls  {\n            live on;\n            hls on;\n            hls_path /tmp/hls;\n        }\n    }\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/usr/local/nginx/sbin/nginx -s reload  \n#修改配置文件重启nginx服务\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"测试rtmp端口是否通"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试rtmp端口是否通"}},[s._v("#")]),s._v(" 测试rtmp端口是否通")]),s._v(" "),n("p",[s._v("需要安全组、防火墙、宝塔安全等放行端口1935")]),s._v(" "),n("p",[s._v("windows开启telnet之后 运行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("telnet ip 端口 #测试\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200220060637492.png",alt:"image-20200220060637492"}})]),s._v(" "),n("p",[s._v("即为成功")]),s._v(" "),n("h3",{attrs:{id:"下载obs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载obs"}},[s._v("#")]),s._v(" 下载OBS")]),s._v(" "),n("p",[n("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200220060747946.png",alt:"image-20200220060747946"}})]),s._v(" "),n("p",[s._v("obs设置")]),s._v(" "),n("p",[n("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200220060826650.png",alt:"image-20200220060826650"}})]),s._v(" "),n("p",[s._v("可以进入"),n("a",{attrs:{href:"https://www.wowza.com/testplayers",target:"_blank",rel:"noopener noreferrer"}},[s._v("拉流网站"),n("OutboundLink")],1),s._v("查看成功与否")]),s._v(" "),n("p",[n("img",{attrs:{src:"C:%5CUsers%5CRXT-2020%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200220061113477.png",alt:"image-20200220061113477"}})]),s._v(" "),n("p",[s._v("Server填推流的地址。Stream与推流名字一致")]),s._v(" "),n("h3",{attrs:{id:"搭建rabbitmq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建rabbitmq"}},[s._v("#")]),s._v(" 搭建RabbitMQ")]),s._v(" "),n("h4",{attrs:{id:"_1、安装erlang"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装erlang"}},[s._v("#")]),s._v(" 1、安装erlang")]),s._v(" "),n("p",[s._v("因为rabbitmq是用erlang语言开发的，所以要先安装好语言环境即可。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt-get install erlang-nox\n如果在安装过程中报错：ubuntu18.04 E: dpkg 被中断，您必须手工运行 ‘sudo dpkg –configure -a’ 解决此问题。\n如果使用之后不行，\n那么删除掉然后重建即可。sudo rm /var/lib/dpkg/updates/*\nsudo apt-get update\nsudo apt-get upgrade\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h4",{attrs:{id:"_2、安装rabbitmq"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装rabbitmq"}},[s._v("#")]),s._v(" 2、安装rabbitmq")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt-get update\nsudo apt-get upgrade\nsudo qpt-get install rabbitmq-server\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h4",{attrs:{id:"_3、rabbitmq状态管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、rabbitmq状态管理"}},[s._v("#")]),s._v(" 3、rabbitmq状态管理")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("启动rabbitmq服务\nsudo service rabbitmq-server start\nsudo rabbitmq-server start &\n\n关闭rabbitmq服务\nrabbitmqctl stop_app\nsudo service rabbitmq-server stop\n\n重启服务\n\nsudo service rabbitmq-server restart\n\n查看服务运行状态\n\nsudo service rabbitmqctl status\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("4、rabbitmq既可以命令行操作，也可以用rabbitmq自带的web管理界面，只需要启动插件便可以使用。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo rabbitmqctl start_app\nsudo rabbitmq-plugins enable rabbitmq_management\nrabbitmq-plugins enable rabbitmq_stomp\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("然后通过浏览器访问，如果是本机则可以输入http://127.0.0.1:15672打开登录界面，输入用户名和密码访问web管理界面了。默认用户名guest密码guest。 如果访问登录失败说明没有开启超级管理员登录。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("新建用户\nsudo rabbitmqctl add_user  admin  admin  \n赋予权限\nsudo rabbitmqctl set_user_tags admin administrator \n赋予virtual host中所有资源的配置、写、读权限以便管理其中的资源，也是添加远程访问权限\nsudo rabbitmqctl  set_permissions -p / admin '.*' '.*' '.*'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("3.3.1 后 为了安全 默认guest 只能local登录")]),s._v(" "),n("p",[s._v("如果要guest登录则要修改配置文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('vi /usr/lib/rabbitmq/lib/rabbitmq_server-3.5.7/ebin/rabbit.app\n\nenv 下的loop 将 <<"guest">>修改为guest\n重启\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);