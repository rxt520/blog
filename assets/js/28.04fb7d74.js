(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{341:function(s,n,a){"use strict";a.r(n);var e=a(3),r=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"springcloudalibaba-02"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springcloudalibaba-02"}},[s._v("#")]),s._v(" SpringCloudAlibaba_02")]),s._v(" "),a("h2",{attrs:{id:"什么是-dubbo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-dubbo"}},[s._v("#")]),s._v(" 什么是 Dubbo")]),s._v(" "),a("p",[s._v("Apache Dubbo (incubating) |ˈdʌbəʊ| 是一款高性能、轻量级的开源 Java RPC 分布式服务框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。她最大的特点是按照分层的方式来架构，使用这种方式可以使各个层之间解耦合（或者最大限度地松耦合）。从服务模型的角度来看，Dubbo 采用的是一种非常简单的模型，要么是提供方提供服务，要么是消费方消费服务，所以基于这一点可以抽象出服务提供方（Provider）和服务消费方（Consumer）两个角色。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("备注：")]),s._v(" 2019 年 5 月 21 日 Apache 软件基金会发表博文，宣布 Dubbo 在 2019 年 5 月 20 日 这天正式毕业，成为 Apache 的顶级项目。")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://dubbo.apache.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方网站"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/apache/dubbo",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方 GitHub"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"dubbo-架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-架构"}},[s._v("#")]),s._v(" Dubbo 架构")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/c873bedbe1d1a2b.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"节点角色说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#节点角色说明"}},[s._v("#")]),s._v(" 节点角色说明")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("节点")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[s._v("角色说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Provider")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("暴露服务的服务提供方")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Consumer")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("调用远程服务的服务消费方")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Registry")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("服务注册与发现的注册中心")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Monitor")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("统计服务的调用次数和调用时间的监控中心")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Container")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("服务运行容器")])])])]),s._v(" "),a("h3",{attrs:{id:"调用关系说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调用关系说明"}},[s._v("#")]),s._v(" 调用关系说明")]),s._v(" "),a("ul",[a("li",[s._v("服务容器负责启动，加载，运行服务提供者")]),s._v(" "),a("li",[s._v("服务提供者在启动时，向注册中心注册自己提供的服务")]),s._v(" "),a("li",[s._v("服务消费者在启动时，向注册中心订阅自己所需的服务")]),s._v(" "),a("li",[s._v("注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者")]),s._v(" "),a("li",[s._v("服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用")]),s._v(" "),a("li",[s._v("服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心")])]),s._v(" "),a("h2",{attrs:{id:"dubbo-功能特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-功能特点"}},[s._v("#")]),s._v(" Dubbo 功能特点")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("面向接口代理的高性能 RPC 调用：")]),s._v(" 提供高性能的基于代理的远程调用能力，服务以接口为粒度，为开发者屏蔽远程调用底层细节")]),s._v(" "),a("li",[a("strong",[s._v("智能负载均衡：")]),s._v(" 内置多种负载均衡策略，智能感知下游节点健康状况，显著减少调用延迟，提高系统吞吐量")]),s._v(" "),a("li",[a("strong",[s._v("服务自动注册与发现：")]),s._v(" 支持多种注册中心服务，服务实例上下线实时感知")]),s._v(" "),a("li",[a("strong",[s._v("高度可扩展能力：")]),s._v(" 遵循微内核 + 插件的设计原则，所有核心能力如 Protocol、Transport、Serialization 被设计为扩展点，平等对待内置实现和第三方实现")]),s._v(" "),a("li",[a("strong",[s._v("运行期流量调度：")]),s._v(" 内置条件、脚本等路由策略，通过配置不同的路由规则，轻松实现灰度发布，同机房优先等功能")]),s._v(" "),a("li",[a("strong",[s._v("可视化的服务治理与运维：")]),s._v(" 提供丰富服务治理、运维工具：随时查询服务元数据、服务健康状态及调用统计，实时下发路由策略、调整配置参数")])]),s._v(" "),a("h2",{attrs:{id:"附：扩展阅读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附：扩展阅读"}},[s._v("#")]),s._v(" 附：扩展阅读")]),s._v(" "),a("h3",{attrs:{id:"什么是-rpc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-rpc"}},[s._v("#")]),s._v(" 什么是 RPC")]),s._v(" "),a("p",[s._v("分布式是促使 RPC 诞生的领域，"),a("strong",[s._v("RPC 是一种编程模型，并没有规定你具体要怎样实现")]),s._v("，无论使用 HTTP 或是 RMI 都是可以的。")]),s._v(" "),a("p",[s._v("假设你有一个计算器接口，Calculator，以及它的实现类 CalculatorImpl，那么在系统还是 "),a("strong",[s._v("单体应用")]),s._v(" 时，你要调用 Calculator 的 add 方法来执行一个加运算，直接 new 一个 CalculatorImpl，然后调用 add 方法就行了，这其实就是非常普通的 "),a("strong",[s._v("本地函数调用")]),s._v("，因为在 "),a("strong",[s._v("同一个地址空间")]),s._v("，或者说在同一块内存，所以通过方法栈和参数栈就可以实现。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/b6c75b17e0815a4.png",alt:"img"}})]),s._v(" "),a("p",[s._v("现在，基于高性能和高可靠等因素的考虑，你决定将系统改造为分布式应用，将很多可以共享的功能都单独拎出来，比如上面说到的计算器，你单独把它放到一个服务里头，让别的服务去调用它。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/e3f7acc2bbd72f3.png",alt:"img"}})]),s._v(" "),a("p",[s._v("这下问题来了，服务 A 里头并没有 CalculatorImpl 这个类，那它要怎样调用服务 B 的 CalculatorImpl 的 add 方法呢？")]),s._v(" "),a("p",[a("strong",[s._v("RPC 要解决的两个问题")])]),s._v(" "),a("ul",[a("li",[s._v("解决分布式系统中，服务之间的调用问题")]),s._v(" "),a("li",[s._v("远程调用时，要能够像本地调用一样方便，让调用者感知不到远程调用的逻辑")])]),s._v(" "),a("h3",{attrs:{id:"如何实现一个-rpc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何实现一个-rpc"}},[s._v("#")]),s._v(" 如何实现一个 RPC")]),s._v(" "),a("p",[s._v("实际情况下，"),a("strong",[s._v("RPC 很少用到 HTTP 协议来进行数据传输")]),s._v("，毕竟我只是想传输一下数据而已，何必动用到一个文本传输的应用层协议呢，我为什么不直接使用"),a("strong",[s._v("二进制传输")]),s._v("？比如直接用 Java 的 Socket 协议进行传输？")]),s._v(" "),a("p",[s._v("不管你用何种协议进行数据传输，一个完整的 RPC 过程，都可以用下面这张图来描述")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/5a51296646d19df.png",alt:"img"}})]),s._v(" "),a("p",[s._v("以左边的 Client 端为例，Application 就是 RPC 的调用方，Client Stub 就是我们上面说到的代理对象，也就是那个看起来像是 Calculator 的实现类，其实内部是通过 RPC 方式来进行远程调用的代理对象，至于 Client Run-time Library，则是实现远程调用的工具包，比如 JDK 的 Socket，最后通过底层网络实现实现数据的传输。")]),s._v(" "),a("p",[s._v("这个过程中最重要的就是 "),a("strong",[s._v("序列化")]),s._v(" 和 "),a("strong",[s._v("反序列化")]),s._v(" 了，因为数据传输的数据包必须是二进制的，你直接丢一个 Java 对象过去，人家可不认识，你必须把 Java 对象序列化为二进制格式，传给 Server 端，Server 端接收到之后，再反序列化为 Java 对象。")]),s._v(" "),a("h3",{attrs:{id:"rpc-vs-restful"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpc-vs-restful"}},[s._v("#")]),s._v(" RPC vs Restful")]),s._v(" "),a("p",[a("strong",[s._v("RPC 是面向过程")]),s._v("，"),a("strong",[s._v("Restful 是面向资源")]),s._v("，并且使用了 HTTP 动词。从这个维度上看，Restful 风格的 URL 在表述的精简性、可读性上都要更好。")]),s._v(" "),a("h3",{attrs:{id:"阿里为何放弃-zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里为何放弃-zookeeper"}},[s._v("#")]),s._v(" 阿里为何放弃 Zookeeper")]),s._v(" "),a("p",[a("strong",[s._v("CAP")])]),s._v(" "),a("p",[s._v("有个思考，从 CAP 角度考虑，服务注册中心是 CP 系统还是 AP 系统呢？")]),s._v(" "),a("ul",[a("li",[s._v("服务注册中心是为了服务间调用服务的，那么绝对不允许因为服务注册中心出现了问题而导致服务间的调用出问题")]),s._v(" "),a("li",[s._v("假如有 node1，node2，node3 集群节点。保存着可用服务列表 ip1，ip2，ip3，试想如果此时不一致，比如 node1 只保存了ip1，ip2，此时服务读取 node1 的节点，那么会造成什么影响？")])]),s._v(" "),a("p",[s._v("调用 node1 的服务，顶多就是负载均衡时不会有流量打到 ip3，然后等 node1 同步回 ip3 后，又一致了，这对服务其实没什么太大影响。所以，推测出服务注册中心应该是个 AP 系统。")]),s._v(" "),a("p",[a("strong",[s._v("Zookeeper 是个 CP 系统，强一致性")])]),s._v(" "),a("ul",[a("li",[s._v("场景1，当 master 挂了，此时 Zookeeper 集群需要重新选举，而此时服务需要来读取可用服务，是不可用的。影响到了服务的可用性当然你可以说服务本地有缓存可用列表。然而下面这种方式就更无法处理了。")]),s._v(" "),a("li",[s._v("场景2，分区可用。试想，有 3 个机房，如果其中机房 3 和机房 1，2 网络断了，那么机房 3 的注册中心就不能注册新的机器了，这显然也不合理从健康检查角度来看")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/f8c9233820b89d2.png",alt:"img"}})]),s._v(" "),a("p",[s._v("Zookeeper 是通过 TCP 的心跳判断服务是否可用，但 TCP 的活性并不代表服务是可用的，如：连接池已满，DB 挂了等")]),s._v(" "),a("p",[a("strong",[s._v("理想的注册中心")])]),s._v(" "),a("ul",[a("li",[s._v("服务自动注册发现。最好有新的服务注册上去时还能推送到调用端")]),s._v(" "),a("li",[s._v("能对注册上来的机器方便的进行管理，能手动删除（发送信号让服务优雅下线）、恢复机器")]),s._v(" "),a("li",[s._v("服务的健康检查，能真正的检测到服务是否可用")]),s._v(" "),a("li",[s._v("可以看到是否有其他调用服务正在订阅注册上来的服务")]),s._v(" "),a("li",[s._v("能够带上些除了 IP 外的其它信息")])]),s._v(" "),a("h2",{attrs:{id:"创建项目工程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目工程"}},[s._v("#")]),s._v(" 创建项目工程")]),s._v(" "),a("h3",{attrs:{id:"pom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.1.6.RELEASE</version>\n        <relativePath/> \x3c!-- lookup parent from repository --\x3e\n    </parent>\n    <groupId>com.smxy</groupId>\n    <artifactId>hello-apache-dubbo</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <packaging>pom</packaging>\n    <url>https://rxt520.github.io/Ruan.X.T.blog</url>\n    <modules>\n        <module>hello-apache-dubbo-dependencies</module>\n    </modules>\n    <properties>\n        <java.version>1.8</java.version>\n        <maven.compiler.source>${java.version}</maven.compiler.source>\n        <maven.compiler.target>${java.version}</maven.compiler.target>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n    </properties>\n    <licenses>\n        <license>\n            <name>Apache 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <id>ruanxiongteng</id>\n            <name>Liberty ruan</name>\n            <email>958465427@qq.com</email>\n        </developer>\n    </developers>\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>ccom.smxy/groupId>\n                <artifactId>hello-apache-dubbo-dependencies</artifactId>\n                <version>${project.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n    <profiles>\n        <profile>\n            <id>default</id>\n            <activation>\n                <activeByDefault>true</activeByDefault>\n            </activation>\n            <properties>\n                <spring-javaformat.version>0.0.12</spring-javaformat.version>\n            </properties>\n            <build>\n                <plugins>\n                    <plugin>\n                        <groupId>io.spring.javaformat</groupId>\n                        <artifactId>spring-javaformat-maven-plugin</artifactId>\n                        <version>${spring-javaformat.version}</version>\n                    </plugin>\n                    <plugin>\n                        <groupId>org.apache.maven.plugins</groupId>\n                        <artifactId>maven-surefire-plugin</artifactId>\n                        <configuration>\n                            <includes>\n                                <include>**/*Tests.java</include>\n                            </includes>\n                            <excludes>\n                                <exclude>**/Abstract*.java</exclude>\n                            </excludes>\n                            <systemPropertyVariables>\n                                <java.security.egd>file:/dev/./urandom</java.security.egd>\n                                <java.awt.headless>true</java.awt.headless>\n                            </systemPropertyVariables>\n                        </configuration>\n                    </plugin>\n                    <plugin>\n                        <groupId>org.apache.maven.plugins</groupId>\n                        <artifactId>maven-enforcer-plugin</artifactId>\n                        <executions>\n                            <execution>\n                                <id>enforce-rules</id>\n                                <goals>\n                                    <goal>enforce</goal>\n                                </goals>\n                                <configuration>\n                                    <rules>\n                                        <bannedDependencies>\n                                            <excludes>\n                                                <exclude>commons-logging:*:*</exclude>\n                                            </excludes>\n                                            <searchTransitive>true</searchTransitive>\n                                        </bannedDependencies>\n                                    </rules>\n                                    <fail>true</fail>\n                                </configuration>\n                            </execution>\n                        </executions>\n                    </plugin>\n                    <plugin>\n                        <groupId>org.apache.maven.plugins</groupId>\n                        <artifactId>maven-install-plugin</artifactId>\n                        <configuration>\n                            <skip>true</skip>\n                        </configuration>\n                    </plugin>\n                    <plugin>\n                        <groupId>org.apache.maven.plugins</groupId>\n                        <artifactId>maven-javadoc-plugin</artifactId>\n                        <configuration>\n                            <skip>true</skip>\n                        </configuration>\n                        <inherited>true</inherited>\n                    </plugin>\n                </plugins>\n            </build>\n        </profile>\n    </profiles>\n    <repositories>\n        <repository>\n            <id>spring-milestone</id>\n            <name>Spring Milestone</name>\n            <url>https://repo.spring.io/milestone</url>\n            <snapshots>\n                <enabled>false</enabled>\n            </snapshots>\n        </repository>\n        <repository>\n            <id>spring-snapshot</id>\n            <name>Spring Snapshot</name>\n            <url>https://repo.spring.io/snapshot</url>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n        </repository>\n    </repositories>\n    <pluginRepositories>\n        <pluginRepository>\n            <id>spring-milestone</id>\n            <name>Spring Milestone</name>\n            <url>https://repo.spring.io/milestone</url>\n            <snapshots>\n                <enabled>false</enabled>\n            </snapshots>\n        </pluginRepository>\n        <pluginRepository>\n            <id>spring-snapshot</id>\n            <name>Spring Snapshot</name>\n            <url>https://repo.spring.io/snapshot</url>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n        </pluginRepository>\n    </pluginRepositories>\n</project>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br")])]),a("h2",{attrs:{id:"创建统一的依赖管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建统一的依赖管理"}},[s._v("#")]),s._v(" 创建统一的依赖管理")]),s._v(" "),a("h3",{attrs:{id:"pom-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-2"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.smxy</groupId>\n    <artifactId>hello-apache-dubbo-dependencies</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <packaging>pom</packaging>\n    <url>https://rxt520.github.io/Ruan.X.T.blog</url>\n    <properties>\n        <dubbo.version>2.7.2</dubbo.version>\n        <dubbo-actuator.version>2.7.1</dubbo-actuator.version>\n        <spring-cloud.version>Greenwich.RELEASE</spring-cloud.version>\n        <spring-cloud-alibaba.verion>0.9.0.RELEASE</spring-cloud-alibaba.verion>\n        <alibaba-spring-context-support.version>1.0.2</alibaba-spring-context-support.version>\n    </properties>\n    <licenses>\n        <license>\n            <name>Apache 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <id>ruanxiongteng</id>\n            <name>Liberty ruan</name>\n            <email>958465427@qq.com</email>\n        </developer>\n    </developers>\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>${spring-cloud.version}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n                <version>${spring-cloud-alibaba.verion}</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n            <dependency>\n                <groupId>org.apache.dubbo</groupId>\n                <artifactId>dubbo</artifactId>\n                <version>${dubbo.version}</version>\n                <exclusions>\n                    <exclusion>\n                        <groupId>org.springframework</groupId>\n                        <artifactId>spring</artifactId>\n                    </exclusion>\n                    <exclusion>\n                        <groupId>javax.servlet</groupId>\n                        <artifactId>servlet-api</artifactId>\n                    </exclusion>\n                    <exclusion>\n                        <groupId>log4j</groupId>\n                        <artifactId>log4j</artifactId>\n                    </exclusion>\n                </exclusions>\n            </dependency>\n            <dependency>\n                <groupId>org.apache.dubbo</groupId>\n                <artifactId>dubbo-spring-boot-actuator</artifactId>\n                <version>${dubbo-actuator.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>com.alibaba.spring</groupId>\n                <artifactId>spring-context-support</artifactId>\n                <version>${alibaba-spring-context-support.version}</version>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n    <repositories>\n        <repository>\n            <id>spring-milestone</id>\n            <name>Spring Milestone</name>\n            <url>https://repo.spring.io/milestone</url>\n            <snapshots>\n                <enabled>false</enabled>\n            </snapshots>\n        </repository>\n        <repository>\n            <id>spring-snapshot</id>\n            <name>Spring Snapshot</name>\n            <url>https://repo.spring.io/snapshot</url>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n        </repository>\n    </repositories>\n    <pluginRepositories>\n        <pluginRepository>\n            <id>spring-milestone</id>\n            <name>Spring Milestone</name>\n            <url>https://repo.spring.io/milestone</url>\n            <snapshots>\n                <enabled>false</enabled>\n            </snapshots>\n        </pluginRepository>\n        <pluginRepository>\n            <id>spring-snapshot</id>\n            <name>Spring Snapshot</name>\n            <url>https://repo.spring.io/snapshot</url>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n        </pluginRepository>\n    </pluginRepositories>\n</project>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br")])]),a("h2",{attrs:{id:"服务注册与发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务注册与发现"}},[s._v("#")]),s._v(" 服务注册与发现")]),s._v(" "),a("h3",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("由于我们已经有了 Nacos 注册中心，Sentinel 熔断限流控制中心，所以我们不再使用 Zookeeper 和 Dubbo Admin 来管理我们的 Dubbo 应用程序，Dubbo 仅当作我们微服务中的 RPC 通信框架，真正实现对内 RPC，对外 REST")]),s._v(" "),a("h3",{attrs:{id:"创建服务提供者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建服务提供者"}},[s._v("#")]),s._v(" 创建服务提供者")]),s._v(" "),a("h5",{attrs:{id:"pom-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-3"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("创建一个名为 "),a("code",[s._v("hello-apache-dubbo-provider")]),s._v(" 的服务提供者项目，"),a("code",[s._v("pom.xml")]),s._v(" 配置如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>com.smxy</groupId>\n        <artifactId>hello-apache-dubbo</artifactId>\n        <version>0.0.1-SNAPSHOT</version>\n    </parent>\n    <artifactId>hello-apache-dubbo-provider</artifactId>\n    <packaging>pom</packaging>\n    <url>https://rxt520.github.io/Ruan.X.T.blog</url>\n    <inceptionYear>2018-Now</inceptionYear>\n    <licenses>\n        <license>\n            <name>Apache 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <id>ruanxiongteng</id>\n            <name>Liberty ruan</name>\n            <email>958465427@qq.com</email>\n        </developer>\n    </developers>\n    <modules>\n        <module>hello-apache-dubbo-provider-api</module>\n        <module>hello-apache-dubbo-provider-service</module>\n    </modules>\n</project>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("h4",{attrs:{id:"创建服务提供者接口模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建服务提供者接口模块"}},[s._v("#")]),s._v(" 创建服务提供者接口模块")]),s._v(" "),a("h5",{attrs:{id:"pom-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-4"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("创建一个名为 "),a("code",[s._v("hello-apache-dubbo-provider-api")]),s._v(" 的模块（该模块只负责定义接口），"),a("code",[s._v("pom.xml")]),s._v(" 配置如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>com.smxy</groupId>\n        <artifactId>hello-apache-dubbo-provider</artifactId>\n        <version>0.0.1-SNAPSHOT</version>\n    </parent>\n    <artifactId>hello-apache-dubbo-provider-api</artifactId>\n    <packaging>jar</packaging>\n    <url>https://rxt520.github.io/Ruan.X.T.blog</url>\n    <inceptionYear>2018-Now</inceptionYear>\n    <licenses>\n        <license>\n            <name>Apache 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <id>ruanxiongteng</id>\n            <name>Liberty ruan</name>\n            <email>958465427@qq.com</email>\n        </developer>\n    </developers>\n</project>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h5",{attrs:{id:"定义接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义接口"}},[s._v("#")]),s._v(" 定义接口")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("package com.smxy.apache.dubbo.provider.api;\npublic interface EchoService {\n    String echo(String string);\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"创建服务提供者接口实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建服务提供者接口实现"}},[s._v("#")]),s._v(" 创建服务提供者接口实现")]),s._v(" "),a("h5",{attrs:{id:"pom-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-5"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("创建一个名为 "),a("code",[s._v("hello-apache-dubbo-provider-service")]),s._v(" 的模块，"),a("code",[s._v("pom.xml")]),s._v(" 配置如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>com.smxy</groupId>\n        <artifactId>hello-apache-dubbo-provider</artifactId>\n        <version>0.0.1-SNAPSHOT</version>\n    </parent>\n    <artifactId>hello-apache-dubbo-provider-service</artifactId>\n    <packaging>jar</packaging>\n    <url>https://rxt520.github.io/Ruan.X.T.blog</url>\n    <inceptionYear>2018-Now</inceptionYear>\n    <licenses>\n        <license>\n            <name>Apache 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <id>ruanxiongteng</id>\n            <name>Liberty ruan</name>\n            <email>958465427@qq.com</email>\n        </developer>\n    </developers>\n    <dependencies>\n        \x3c!-- Spring Boot Begin --\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        \x3c!-- Spring Boot End --\x3e\n        \x3c!-- Apache Dubbo Begin --\x3e\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo-spring-boot-starter</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>dubbo-registry-nacos</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba.nacos</groupId>\n            <artifactId>nacos-client</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba.spring</groupId>\n            <artifactId>spring-context-support</artifactId>\n        </dependency>\n        \x3c!-- Apache Dubbo End --\x3e\n        \x3c!-- Projects Begin --\x3e\n        <dependency>\n            <groupId>com.smxy</groupId>\n            <artifactId>hello-apache-dubbo-provider-api</artifactId>\n            <version>${project.parent.version}</version>\n        </dependency>\n        \x3c!-- Projects End --\x3e\n    </dependencies>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n                <configuration>\n                    <mainClass>com.smxy.apache.dubbo.provider.ProviderApplication</mainClass>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br")])]),a("h5",{attrs:{id:"application-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-yml"}},[s._v("#")]),s._v(" application.yml")]),s._v(" "),a("p",[s._v("主要增加了 Dubbo 包扫描路径和 Nacos Server 配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("spring:\n  application:\n    name: dubbo-provider\n  main:\n    allow-bean-definition-overriding: true\ndubbo:\n  scan:\n    base-packages: com.smxy.apache.dubbo.provider.service\n  protocol:\n    name: dubbo\n    port: -1\n  registry:\n    address: nacos://192.168.141.132:8848\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h5",{attrs:{id:"application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application"}},[s._v("#")]),s._v(" Application")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("package com.smxy.apache.dubbo.provider;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n@SpringBootApplication\npublic class ProviderApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(ProviderApplication.class, args);\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h5",{attrs:{id:"service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[s._v("#")]),s._v(" Service")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("org.apache.dubbo")]),s._v(" 包下的 "),a("code",[s._v("@Service")]),s._v(" 注解将服务暴露出去")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package com.smxy.apache.dubbo.provider.service;\nimport ccom.smxyapache.dubbo.provider.api.EchoService;\nimport org.apache.dubbo.config.annotation.Service;\n@Service(version = "1.0.0")\npublic class EchoServiceImpl implements EchoService {\n    @Override\n    public String echo(String string) {\n        return "Echo Hello Dubbo " + string;\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h5",{attrs:{id:"验证是否成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证是否成功"}},[s._v("#")]),s._v(" 验证是否成功")]),s._v(" "),a("p",[s._v("通过浏览器访问 "),a("a",{attrs:{href:"http://192.168.141.132:8848/nacos",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://192.168.141.132:8848/nacos"),a("OutboundLink")],1),s._v(" Nacos Server 网址")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/b7ff926faa8e579.png",alt:"img"}})]),s._v(" "),a("p",[s._v("你会发现一个服务已经注册在服务中了，服务名为 "),a("code",[s._v("providers:com.smxy.apache.dubbo.provider.api.EchoService:1.0.0:")])]),s._v(" "),a("h3",{attrs:{id:"创建服务消费者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建服务消费者"}},[s._v("#")]),s._v(" 创建服务消费者")]),s._v(" "),a("h4",{attrs:{id:"pom-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-6"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("创建一个名为 "),a("code",[s._v("hello-apache-dubbo-consumer")]),s._v(" 的服务消费者项目，"),a("code",[s._v("pom.xml")]),s._v(" 配置如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <parent>\n        <groupId>com.smxy</groupId>\n        <artifactId>hello-apache-dubbo</artifactId>\n        <version>0.0.1-SNAPSHOT</version>\n    </parent>\n    <artifactId>hello-apache-dubbo-consumer</artifactId>\n    <packaging>jar</packaging>\n    <url>https://rxt520.github.io/Ruan.X.T.blog</url>\n    <inceptionYear>2018-Now</inceptionYear>\n    <licenses>\n        <license>\n            <name>Apache 2.0</name>\n            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n        </license>\n    </licenses>\n    <developers>\n        <developer>\n            <id>ruanxiongteng</id>\n            <name>Liberty ruan</name>\n            <email>958465427@qq.com</email>\n        </developer>\n    </developers>\n    <dependencies>\n        \x3c!-- Spring Boot Begin --\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-actuator</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        \x3c!-- Spring Boot End --\x3e\n        \x3c!-- Apache Dubbo Begin --\x3e\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo-spring-boot-starter</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo-spring-boot-actuator</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.dubbo</groupId>\n            <artifactId>dubbo</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>dubbo-registry-nacos</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba.nacos</groupId>\n            <artifactId>nacos-client</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba.spring</groupId>\n            <artifactId>spring-context-support</artifactId>\n        </dependency>\n        \x3c!-- Apache Dubbo End --\x3e\n        \x3c!-- Projects Begin --\x3e\n        <dependency>\n            <groupId>ccom.smxy</groupId>\n            <artifactId>hello-apache-dubbo-provider-api</artifactId>\n            <version>${project.parent.version}</version>\n        </dependency>\n        \x3c!-- Projects End --\x3e\n    </dependencies>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n                <configuration>\n                    <mainClass>cocom.smxy.apache.dubbo.consumer.ConsumerApplication</mainClass>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br")])]),a("h4",{attrs:{id:"application-yml-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-yml-2"}},[s._v("#")]),s._v(" application.yml")]),s._v(" "),a("p",[s._v("主要增加了 Dubbo 包扫描路径、健康检查以及 Nacos Server 配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('spring:\n  application:\n    name: dubbo-consumer\n  main:\n    allow-bean-definition-overriding: true\ndubbo:\n  scan:\n    base-packages: com.smxy.apache.dubbo.consumer.controller\n  protocol:\n    name: dubbo\n    port: -1\n  registry:\n    address: nacos://192.168.12.130:8848\nserver:\n  port: 8080\nendpoints:\n  dubbo:\n    enabled: true\nmanagement:\n  health:\n    dubbo:\n      status:\n        defaults: memory\n        extras: threadpool\n  endpoints:\n    web:\n      exposure:\n        include: "*"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("h4",{attrs:{id:"application-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-2"}},[s._v("#")]),s._v(" Application")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("package com.smxy.apache.dubbo.consumer;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n@SpringBootApplication\npublic class ConsumerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(ConsumerApplication.class, args);\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"controller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controller"}},[s._v("#")]),s._v(" Controller")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("org.apache.dubbo")]),s._v(" 包下的 "),a("code",[s._v("@Reference")]),s._v(" 注解像调用本地服务一样调用远程服务，轻松实现透明的远程过程调用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package com.smxy.apache.dubbo.consumer.controller;\nimport ccom.smxyapache.dubbo.provider.api.EchoService;\nimport org.apache.dubbo.config.annotation.Reference;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n@RestController\npublic class EchoController {\n    @Reference(version = "1.0.0")\n    private EchoService echoService;\n    @GetMapping(value = "/echo/{string}")\n    public String echo(@PathVariable String string) {\n        return echoService.echo(string);\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h4",{attrs:{id:"验证是否成功-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证是否成功-2"}},[s._v("#")]),s._v(" 验证是否成功")]),s._v(" "),a("p",[s._v("通过浏览器访问 "),a("a",{attrs:{href:"http://192.168.141.132:8848/nacos",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://192.168.141.132:8848/nacos"),a("OutboundLink")],1),s._v(" Nacos Server 网址")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/c6375bd2296fd84.png",alt:"img"}})]),s._v(" "),a("p",[s._v("你会发现一个服务已经注册在服务中了，服务名为 "),a("code",[s._v("consumers:com.smxy.apache.dubbo.provider.api.EchoService:1.0.0:")]),s._v("，通过浏览器访问 "),a("a",{attrs:{href:"%5Bhttp://localhost:8080/echo/hi%5D(http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2VjaG8vaGk=)"}},[s._v("http://localhost:8080/echo/hi")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Echo Hello Dubbo hi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"服务端点检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端点检查"}},[s._v("#")]),s._v(" 服务端点检查")]),s._v(" "),a("p",[s._v("通过浏览器访问 "),a("a",{attrs:{href:"http://localhost:8080/actuator/health",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080/actuator/health"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{    "status": "UP"}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"dubbo-中的序列化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-中的序列化"}},[s._v("#")]),s._v(" Dubbo 中的序列化")]),s._v(" "),a("p",[s._v("Dubbo RPC 是 Dubbo 体系中最核心的一种高性能、高吞吐量的远程调用方式，可以称之为多路复用的 TCP 长连接调用：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("长连接：")]),s._v(" 避免了每次调用新建 TCP 连接，提高了调用的响应速度")]),s._v(" "),a("li",[a("strong",[s._v("多路复用：")]),s._v(" 单个 TCP 连接可交替传输多个请求和响应的消息，降低了连接的等待闲置时间，从而减少了同样并发数下的网络连接数，提高了系统吞吐量")])]),s._v(" "),a("p",[s._v("Dubbo RPC 主要用于两个 Dubbo 系统之间的远程调用，特别适合高并发、小数据的互联网场景。而序列化对于远程调用的响应速度、吞吐量、网络带宽消耗等同样也起着至关重要的作用，是我们提升分布式系统性能的最关键因素之一。")]),s._v(" "),a("p",[s._v("Dubbo 中支持的序列化方式：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("dubbo 序列化：")]),s._v(" 阿里尚未开发成熟的高效 Java 序列化实现，阿里不建议在生产环境使用它")]),s._v(" "),a("li",[a("strong",[s._v("hessian2 序列化：")]),s._v(" hessian 是一种跨语言的高效二进制序列化方式。但这里实际不是原生的 hessian2 序列化，而是阿里修改过的 hessian lite，它是 dubbo RPC 默认启用的序列化方式")]),s._v(" "),a("li",[a("strong",[s._v("json 序列化：")]),s._v(" 目前有两种实现，一种是采用的阿里的 fastjson 库，另一种是采用 dubbo 中自己实现的简单 json 库，但其实现都不是特别成熟，而且 json 这种文本序列化性能一般不如上面两种二进制序列化。")]),s._v(" "),a("li",[a("strong",[s._v("java 序列化：")]),s._v(" 主要是采用 JDK 自带的 Java 序列化实现，性能很不理想。")])]),s._v(" "),a("p",[s._v("在通常情况下，这四种主要序列化方式的性能从上到下依次递减。对于 dubbo RPC 这种追求高性能的远程调用方式来说，实际上只有 1、2 两种高效序列化方式比较般配，而第 1 个 dubbo 序列化由于还不成熟，所以实际只剩下 2 可用，所以 dubbo RPC 默认采用 hessian2 序列化。")]),s._v(" "),a("p",[s._v("但 hessian 是一个比较老的序列化实现了，而且它是跨语言的，所以不是单独针对 Java 进行优化的。而 dubbo RPC 实际上完全是一种 Java to Java 的远程调用，其实没有必要采用跨语言的序列化方式（当然肯定也不排斥跨语言的序列化）。")]),s._v(" "),a("p",[s._v("最近几年，各种新的高效序列化方式层出不穷，不断刷新序列化性能的上限，最典型的包括：")]),s._v(" "),a("ul",[a("li",[s._v("专门针对 Java 语言的："),a("strong",[s._v("Kryo")]),s._v("，FST 等等")]),s._v(" "),a("li",[s._v("跨语言的：Protostuff，ProtoBuf，"),a("strong",[s._v("Thrift")]),s._v("，Avro，MsgPack 等等")])]),s._v(" "),a("p",[s._v("这些序列化方式的性能多数都显著优于 hessian2（甚至包括尚未成熟的 dubbo 序列化），有鉴于此，我们为 dubbo 引入 Kryo 和 FST 这两种高效 Java 序列化实现，来逐步取代 hessian2。")]),s._v(" "),a("p",[s._v("其中，Kryo 是一种非常成熟的序列化实现，已经在 Twitter、Groupon、Yahoo 以及多个著名开源项目（如 Hive、Storm）中广泛的使用。而 FST 是一种较新的序列化实现，目前还缺乏足够多的成熟使用案例。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" 在面向生产环境的应用中，目前更优先选择 Kryo")])]),s._v(" "),a("h3",{attrs:{id:"启用-kryo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启用-kryo"}},[s._v("#")]),s._v(" 启用 Kryo")]),s._v(" "),a("p",[s._v("在 Provider 和 Consumer 项目启用 Kryo 高速序列化功能，两个项目的配置方式相同")]),s._v(" "),a("h4",{attrs:{id:"pom-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-7"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("增加 "),a("code",[s._v("org.apache.dubbo:dubbo-serialization-kryo")]),s._v(" 依赖")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<properties>\n    <dubbo-kryo.version>2.7.2</dubbo-kryo.version>\n</properties>\n<dependency>\n    <groupId>org.apache.dubbo</groupId>\n    <artifactId>dubbo-serialization-kryo</artifactId>\n    <version>${dubbo-kryo.version}</version>\n</dependency>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h4",{attrs:{id:"application-yml-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-yml-3"}},[s._v("#")]),s._v(" application.yml")]),s._v(" "),a("p",[s._v("增加 "),a("code",[s._v("dubbo.protocol.serialization=kryo")]),s._v(" 配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("dubbo:\n  protocol:\n    serialization: kryo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"序列化类说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#序列化类说明"}},[s._v("#")]),s._v(" 序列化类说明")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" 想要使用 Kryo 序列化只需要 DTO/Domain/Entity 这类传输对象实现序列化接口即可，无需额外再做配置，如："),a("code",[s._v("public class User implements Serializable{}")])])]),s._v(" "),a("p",[s._v("在对一个类做序列化的时候，可能还级联引用到很多类，比如 Java 集合类。针对这种情况，Dubbo 已经自动将 JDK 中的常用类进行了注册，包括：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("GregorianCalendar\nInvocationHandler\nBigDecimal\nBigInteger\nPattern\nBitSet\nURI\nUUID\nHashMap\nArrayList\nLinkedList\nHashSet\nTreeSet\nHashtable\nDate\nCalendar\nConcurrentHashMap\nSimpleDateFormat\nVector\nBitSet\nStringBuffer\nStringBuilder\nObject\nObject[]\nString[]\nbyte[]\nchar[]\nint[]\nfloat[]\ndouble[]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[s._v("由于注册被序列化的类仅仅是出于性能优化的目的，所以即使你忘记注册某些类也没有关系。事实上，即使不注册任何类，Kryo 和 FST 的性能依然普遍优于 hessian 和 dubbo 序列化。")]),s._v(" "),a("h3",{attrs:{id:"附：扩展阅读-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附：扩展阅读-2"}},[s._v("#")]),s._v(" 附：扩展阅读")]),s._v(" "),a("h4",{attrs:{id:"序列化性能分析与测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#序列化性能分析与测试"}},[s._v("#")]),s._v(" 序列化性能分析与测试")]),s._v(" "),a("h5",{attrs:{id:"测试环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试环境"}},[s._v("#")]),s._v(" 测试环境")]),s._v(" "),a("ul",[a("li",[s._v("两台独立服务器")]),s._v(" "),a("li",[s._v("4 核 Intel(R) Xeon(R) CPU E5-2603 0 @ 1.80GHz")]),s._v(" "),a("li",[s._v("8G 内存")]),s._v(" "),a("li",[s._v("虚拟机之间网络通过百兆交换机")]),s._v(" "),a("li",[s._v("CentOS 5")]),s._v(" "),a("li",[s._v("JDK 7")]),s._v(" "),a("li",[s._v("Tomcat 7")]),s._v(" "),a("li",[s._v("JVM 参数 "),a("code",[s._v("-server -Xms1g -Xmx1g -XX:PermSize=64M -XX:+UseConcMarkSweepGC")])])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" 当然这个测试环境较有局限，故当前测试结果未必有非常权威的代表性")])]),s._v(" "),a("h5",{attrs:{id:"测试脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试脚本"}},[s._v("#")]),s._v(" 测试脚本")]),s._v(" "),a("p",[s._v("和 dubbo 自身的基准测试保持接近，10 个并发客户端持续不断发出请求：")]),s._v(" "),a("ul",[a("li",[s._v("传入嵌套复杂对象（但单个数据量很小），不做任何处理，原样返回")]),s._v(" "),a("li",[s._v("传入 50K 字符串，不做任何处理，原样返回（TODO：结果尚未列出）")])]),s._v(" "),a("p",[s._v("进行 5 分钟性能测试。（引用 dubbo 自身测试的考虑：“主要考察序列化和网络 IO 的性能，因此服务端无任何业务逻辑。"),a("strong",[s._v("取 10 并发是考虑到 HTTP 协议在高并发下对 CPU 的使用率较高可能会先达到瓶颈。")]),s._v("”）")]),s._v(" "),a("h5",{attrs:{id:"dubbo-rpc-中不同序列化生成字节大小比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-rpc-中不同序列化生成字节大小比较"}},[s._v("#")]),s._v(" Dubbo RPC 中不同序列化生成字节大小比较")]),s._v(" "),a("p",[s._v("序列化生成字节码的大小是一个比较有确定性的指标，它决定了远程调用的网络传输时间和带宽占用。针对复杂对象的结果如下（数值越小越好）：")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/9f13cfc86553e42.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/4b3a6218bb3e3a7.png",alt:"img"}})]),s._v(" "),a("h5",{attrs:{id:"dubbo-rpc-中不同序列化响应时间和吞吐量对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-rpc-中不同序列化响应时间和吞吐量对比"}},[s._v("#")]),s._v(" Dubbo RPC 中不同序列化响应时间和吞吐量对比")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/14fdadbbd525f56.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/822050d9ae3c47f.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/339a57d16284b3a.png",alt:"img"}})]),s._v(" "),a("h5",{attrs:{id:"结论"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结论"}},[s._v("#")]),s._v(" 结论")]),s._v(" "),a("p",[s._v("就目前结果而言，我们可以看到不管从生成字节的大小，还是平均响应时间和平均 TPS，Kryo 和 FST 相比 Dubbo RPC 中原有的序列化方式都有非常显著的改进。")]),s._v(" "),a("h2",{attrs:{id:"dubbo-负载均衡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-负载均衡"}},[s._v("#")]),s._v(" Dubbo 负载均衡")]),s._v(" "),a("h2",{attrs:{id:"概述-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述-2"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("在集群负载均衡时，Dubbo 提供了多种均衡策略，缺省为 "),a("code",[s._v("random")]),s._v(" 随机调用。")]),s._v(" "),a("h2",{attrs:{id:"负载均衡策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡策略"}},[s._v("#")]),s._v(" 负载均衡策略")]),s._v(" "),a("h3",{attrs:{id:"随机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#随机"}},[s._v("#")]),s._v(" 随机")]),s._v(" "),a("p",[a("strong",[s._v("Random LoadBalance：")]),s._v(" 按权重设置随机概率，在一个截面上碰撞的概率高，但调用量越大分布越均匀，而且按概率使用权重后也比较均匀，有利于动态调整提供者权重。")]),s._v(" "),a("h3",{attrs:{id:"轮循"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#轮循"}},[s._v("#")]),s._v(" 轮循")]),s._v(" "),a("p",[a("strong",[s._v("RoundRobin LoadBalance：")]),s._v(" 按公约后的权重设置轮询比率，存在慢的提供者累积请求的问题，比如：第二台机器很慢，但没挂，当请求调到第二台时就卡在那，久而久之，所有请求都卡在调到第二台上。")]),s._v(" "),a("h3",{attrs:{id:"最少活跃调用数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最少活跃调用数"}},[s._v("#")]),s._v(" 最少活跃调用数")]),s._v(" "),a("p",[a("strong",[s._v("LeastActive LoadBalance：")]),s._v(" 相同活跃数的随机，活跃数指调用前后计数差，使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。")]),s._v(" "),a("h3",{attrs:{id:"一致性-hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一致性-hash"}},[s._v("#")]),s._v(" 一致性 Hash")]),s._v(" "),a("p",[a("strong",[s._v("ConsistentHash LoadBalance：")]),s._v(" 相同参数的请求总是发到同一提供者。当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动。")]),s._v(" "),a("p",[s._v("算法参见："),a("a",{attrs:{href:"http://en.wikipedia.org/wiki/Consistent_hashing",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://en.wikipedia.org/wiki/Consistent_hashing"),a("OutboundLink")],1),s._v(" ，缺省只对第一个参数 Hash，如果要修改，请配置 "),a("code",[s._v("，缺省用 160 份虚拟节点，如果要修改，请配置")])]),s._v(" "),a("h3",{attrs:{id:"配置负载均衡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置负载均衡"}},[s._v("#")]),s._v(" 配置负载均衡")]),s._v(" "),a("ul",[a("li",[s._v("修改 "),a("code",[s._v("dubbo-provider")]),s._v(" 项目的负载均衡策略，默认的负载均衡策略是 "),a("strong",[s._v("随机")]),s._v("，我们修改为 "),a("strong",[s._v("轮循")]),s._v("，可配置的值分别是："),a("code",[s._v("random")]),s._v("，"),a("code",[s._v("roundrobin")]),s._v("，"),a("code",[s._v("leastactive")]),s._v("，"),a("code",[s._v("consistenthash")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("dubbo:  provider:    loadbalance: roundrobin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("修改 "),a("code",[s._v("dubbo-provider")]),s._v(" 的协议端口为 20880 和 20881，并启动多个实例，IDEA 中依次点击 "),a("strong",[s._v("Run")]),s._v(" -> "),a("strong",[s._v("Edit Configurations")]),s._v(" 并勾选 "),a("strong",[s._v("Allow parallel run")]),s._v(" 以允许 IDEA 多实例运行项目")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/9b0a0ba30182ae3.png",alt:"img"}})]),s._v(" "),a("ul",[a("li",[s._v("Nacos Server 控制台可以看到 "),a("code",[s._v("dubbo-provider")]),s._v(" 有 2 个实例")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/6b78be78da8dc0a.png",alt:"img"}})]),s._v(" "),a("ul",[a("li",[s._v("修改 "),a("code",[s._v("dubbo-provider")]),s._v(" 项目的 "),a("code",[s._v("EchoServiceImpl")]),s._v(" 中的测试方法")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package com.funtl.apache.dubbo.provider.service;\nimport com.funtl.apache.dubbo.provider.api.EchoService;\nimport org.apache.dubbo.config.annotation.Service;\nimport org.springframework.beans.factory.annotation.Value;\n@Service(version = "1.0.0")\npublic class EchoServiceImpl implements EchoService {\n    @Value("${dubbo.protocol.port}")\n    private String port;\n    @Override\n    public String echo(String string) {\n        return "Echo Hello Dubbo " + string + " i am from port: " + port;\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("重启服务，通过浏览器访问 "),a("a",{attrs:{href:"http://localhost:8080/echo/hi",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080/echo/hi"),a("OutboundLink")],1),s._v(" ，反复刷新浏览器，浏览器交替显示")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Echo Hello Dubbo hi i am from port: 20880\nEcho Hello Dubbo hi i am from port: 20881\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"dubbo-外部化配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-外部化配置"}},[s._v("#")]),s._v(" Dubbo 外部化配置")]),s._v(" "),a("h2",{attrs:{id:"概述-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述-3"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("由于我们已经使用了 Nacos Server 作为我们的注册中心，所以此处依然使用 Nacos Config 实现 Dubbo 的外部化配置")]),s._v(" "),a("h2",{attrs:{id:"接入配置中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接入配置中心"}},[s._v("#")]),s._v(" 接入配置中心")]),s._v(" "),a("h3",{attrs:{id:"pom-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-8"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("我们以 "),a("code",[s._v("dubbo-consumer")]),s._v(" 项目为例，修改 "),a("code",[s._v("pom.xml")]),s._v(" ，引入 "),a("strong",[s._v("Nacos Config Starter")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n</dependency>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"controller-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controller-2"}},[s._v("#")]),s._v(" Controller")]),s._v(" "),a("p",[s._v("完成上述两步后，应用会从 Nacos Config 中获取相应的配置，并添加在 Spring Environment 的 PropertySources 中。这里我们使用 "),a("code",[s._v("@Value")]),s._v(" 注解来将对应的配置注入到 "),a("code",[s._v("EchoController")]),s._v(" 的 "),a("code",[s._v("username")]),s._v("字段，并添加 "),a("code",[s._v("@RefreshScope")]),s._v(" 打开动态刷新功能")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package com.funtl.apache.dubbo.consumer.controller;\nimport com.funtl.apache.dubbo.provider.api.EchoService;\nimport org.apache.dubbo.config.annotation.Reference;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n@RefreshScope\n@RestController\npublic class EchoController {\n    @Reference(version = "1.0.0")\n    private EchoService echoService;\n    @Value("${user.name}")\n    private String username;\n    @GetMapping(value = "/echo/{string}")\n    public String echo(@PathVariable String string) {\n        return echoService.echo(string) + " " + username;\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"使用控制台发布配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用控制台发布配置"}},[s._v("#")]),s._v(" 使用控制台发布配置")]),s._v(" "),a("p",[s._v("创建DATA ID：dubbo-consumer-config.yaml")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" Data ID 的默认扩展名为 "),a("code",[s._v(".properties")]),s._v(" ，希望使用 YAML 配置，此处必须指明是 "),a("code",[s._v(".yaml")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('spring:\n  application:\n    name: dubbo-consumer\n  main:\n    allow-bean-definition-overriding: true\ndubbo:\n  scan:\n    base-packages: com.smxy.apache.dubbo.consumer.controller\n  protocol:\n    name: dubbo\n    port: -1\n    serialization: kryo\n  registry:\n    address: nacos://192.168.12.130:8848\nserver:\n  port: 8080\nendpoints:\n  dubbo:\n    enabled: true\nmanagement:\n  health:\n    dubbo:\n      status:\n        defaults: memory\n        extras: threadpool\n  endpoints:\n    web:\n      exposure:\n        include: "*"\nuser:\n  name: RXT\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("h3",{attrs:{id:"修改客户端配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改客户端配置"}},[s._v("#")]),s._v(" 修改客户端配置")]),s._v(" "),a("p",[s._v("创建名为 "),a("code",[s._v("bootstrap.properties")]),s._v(" 的配置文件并删除之前创建的 "),a("code",[s._v("application.yml")]),s._v(" 配置文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("spring.application.name=dubbo-consumer-config\nspring.cloud.nacos.config.server-addr=192.168.141.132:8848\nspring.cloud.nacos.config.file-extension=yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("通过浏览器访问 "),a("a",{attrs:{href:"http://localhost:8080/echo/hi",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080/echo/hi"),a("OutboundLink")],1),s._v(" ，浏览器输出如下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Echo Hello Dubbo hi i am from port: -1 唯我成幸\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"动态刷新配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态刷新配置"}},[s._v("#")]),s._v(" 动态刷新配置")]),s._v(" "),a("p",[s._v("在 Nacos Server 控制台修改配置文件，将 "),a("code",[s._v("user.name")]),s._v(" 属性修改为 "),a("code",[s._v("桐须真冬")]),s._v("，此时观察控制台日志，你会发现我们已经成功刷新了配置")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.qfdmy.com/wp-content/uploads/2019/08/a2aba035cf4a0c2.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"验证是否成功-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证是否成功-3"}},[s._v("#")]),s._v(" 验证是否成功")]),s._v(" "),a("p",[s._v("通过浏览器访问 "),a("a",{attrs:{href:"http://www.qfdmy.com/wp-content/themes/quanbaike/go.php?url=aHR0cDovL2xvY2FsaG9zdDo4MDgwL2VjaG8vaGk=",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080/echo/hi"),a("OutboundLink")],1),s._v(" ，浏览器输出如下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Echo Hello Dubbo hi i am from port: -1 桐须真冬\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("提示：")]),s._v(" 你可以使用 "),a("code",[s._v("spring.cloud.nacos.config.refresh.enabled=false")]),s._v(" 来关闭动态刷新")])])])}),[],!1,null,null,null);n.default=r.exports}}]);